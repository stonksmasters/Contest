var Sc=Object.defineProperty;var Bc=(r,t,e)=>t in r?Sc(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var _c=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports);var ae=(r,t,e)=>Bc(r,typeof t!="symbol"?t+"":t,e);var Xd=_c(fe=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();var kc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ri(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function xs(r){if(r.__esModule)return r;var t=r.default;if(typeof t=="function"){var e=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var s=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:function(){return r[n]}})}),e}var nt={},ii={};ii.byteLength=Mc;ii.toByteArray=Tc;ii.fromByteArray=Uc;var je=[],Oe=[],Ac=typeof Uint8Array<"u"?Uint8Array:Array,Ui="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Nn=0,Ic=Ui.length;Nn<Ic;++Nn)je[Nn]=Ui[Nn],Oe[Ui.charCodeAt(Nn)]=Nn;Oe[45]=62;Oe[95]=63;function Po(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");e===-1&&(e=t);var n=e===t?0:4-e%4;return[e,n]}function Mc(r){var t=Po(r),e=t[0],n=t[1];return(e+n)*3/4-n}function Rc(r,t,e){return(t+e)*3/4-e}function Tc(r){var t,e=Po(r),n=e[0],s=e[1],i=new Ac(Rc(r,n,s)),o=0,c=s>0?n-4:n,d;for(d=0;d<c;d+=4)t=Oe[r.charCodeAt(d)]<<18|Oe[r.charCodeAt(d+1)]<<12|Oe[r.charCodeAt(d+2)]<<6|Oe[r.charCodeAt(d+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return s===2&&(t=Oe[r.charCodeAt(d)]<<2|Oe[r.charCodeAt(d+1)]>>4,i[o++]=t&255),s===1&&(t=Oe[r.charCodeAt(d)]<<10|Oe[r.charCodeAt(d+1)]<<4|Oe[r.charCodeAt(d+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function Lc(r){return je[r>>18&63]+je[r>>12&63]+je[r>>6&63]+je[r&63]}function Cc(r,t,e){for(var n,s=[],i=t;i<e;i+=3)n=(r[i]<<16&16711680)+(r[i+1]<<8&65280)+(r[i+2]&255),s.push(Lc(n));return s.join("")}function Uc(r){for(var t,e=r.length,n=e%3,s=[],i=16383,o=0,c=e-n;o<c;o+=i)s.push(Cc(r,o,o+i>c?c:o+i));return n===1?(t=r[e-1],s.push(je[t>>2]+je[t<<4&63]+"==")):n===2&&(t=(r[e-2]<<8)+r[e-1],s.push(je[t>>10]+je[t>>4&63]+je[t<<2&63]+"=")),s.join("")}var vs={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */vs.read=function(r,t,e,n,s){var i,o,c=s*8-n-1,d=(1<<c)-1,b=d>>1,v=-7,_=e?s-1:0,k=e?-1:1,S=r[t+_];for(_+=k,i=S&(1<<-v)-1,S>>=-v,v+=c;v>0;i=i*256+r[t+_],_+=k,v-=8);for(o=i&(1<<-v)-1,i>>=-v,v+=n;v>0;o=o*256+r[t+_],_+=k,v-=8);if(i===0)i=1-b;else{if(i===d)return o?NaN:(S?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-b}return(S?-1:1)*o*Math.pow(2,i-n)};vs.write=function(r,t,e,n,s,i){var o,c,d,b=i*8-s-1,v=(1<<b)-1,_=v>>1,k=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=n?0:i-1,I=n?1:-1,T=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,o=v):(o=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-o))<1&&(o--,d*=2),o+_>=1?t+=k/d:t+=k*Math.pow(2,1-_),t*d>=2&&(o++,d/=2),o+_>=v?(c=0,o=v):o+_>=1?(c=(t*d-1)*Math.pow(2,s),o=o+_):(c=t*Math.pow(2,_-1)*Math.pow(2,s),o=0));s>=8;r[e+S]=c&255,S+=I,c/=256,s-=8);for(o=o<<s|c,b+=s;b>0;r[e+S]=o&255,S+=I,o/=256,b-=8);r[e+S-I]|=T*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const t=ii,e=vs,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=c,r.SlowBuffer=D,r.INSPECT_MAX_BYTES=50;const s=2147483647;r.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=i(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const g=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(g,u),g.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function o(g){if(g>s)throw new RangeError('The value "'+g+'" is invalid for option "size"');const u=new Uint8Array(g);return Object.setPrototypeOf(u,c.prototype),u}function c(g,u,h){if(typeof g=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(g)}return d(g,u,h)}c.poolSize=8192;function d(g,u,h){if(typeof g=="string")return k(g,u);if(ArrayBuffer.isView(g))return I(g);if(g==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(Ae(g,ArrayBuffer)||g&&Ae(g.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ae(g,SharedArrayBuffer)||g&&Ae(g.buffer,SharedArrayBuffer)))return T(g,u,h);if(typeof g=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const x=g.valueOf&&g.valueOf();if(x!=null&&x!==g)return c.from(x,u,h);const L=R(g);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof g[Symbol.toPrimitive]=="function")return c.from(g[Symbol.toPrimitive]("string"),u,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g)}c.from=function(g,u,h){return d(g,u,h)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function b(g){if(typeof g!="number")throw new TypeError('"size" argument must be of type number');if(g<0)throw new RangeError('The value "'+g+'" is invalid for option "size"')}function v(g,u,h){return b(g),g<=0?o(g):u!==void 0?typeof h=="string"?o(g).fill(u,h):o(g).fill(u):o(g)}c.alloc=function(g,u,h){return v(g,u,h)};function _(g){return b(g),o(g<0?0:C(g)|0)}c.allocUnsafe=function(g){return _(g)},c.allocUnsafeSlow=function(g){return _(g)};function k(g,u){if((typeof u!="string"||u==="")&&(u="utf8"),!c.isEncoding(u))throw new TypeError("Unknown encoding: "+u);const h=F(g,u)|0;let x=o(h);const L=x.write(g,u);return L!==h&&(x=x.slice(0,L)),x}function S(g){const u=g.length<0?0:C(g.length)|0,h=o(u);for(let x=0;x<u;x+=1)h[x]=g[x]&255;return h}function I(g){if(Ae(g,Uint8Array)){const u=new Uint8Array(g);return T(u.buffer,u.byteOffset,u.byteLength)}return S(g)}function T(g,u,h){if(u<0||g.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<u+(h||0))throw new RangeError('"length" is outside of buffer bounds');let x;return u===void 0&&h===void 0?x=new Uint8Array(g):h===void 0?x=new Uint8Array(g,u):x=new Uint8Array(g,u,h),Object.setPrototypeOf(x,c.prototype),x}function R(g){if(c.isBuffer(g)){const u=C(g.length)|0,h=o(u);return h.length===0||g.copy(h,0,0,u),h}if(g.length!==void 0)return typeof g.length!="number"||Lt(g.length)?o(0):S(g);if(g.type==="Buffer"&&Array.isArray(g.data))return S(g.data)}function C(g){if(g>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return g|0}function D(g){return+g!=g&&(g=0),c.alloc(+g)}c.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==c.prototype},c.compare=function(u,h){if(Ae(u,Uint8Array)&&(u=c.from(u,u.offset,u.byteLength)),Ae(h,Uint8Array)&&(h=c.from(h,h.offset,h.byteLength)),!c.isBuffer(u)||!c.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===h)return 0;let x=u.length,L=h.length;for(let U=0,P=Math.min(x,L);U<P;++U)if(u[U]!==h[U]){x=u[U],L=h[U];break}return x<L?-1:L<x?1:0},c.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(u,h){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return c.alloc(0);let x;if(h===void 0)for(h=0,x=0;x<u.length;++x)h+=u[x].length;const L=c.allocUnsafe(h);let U=0;for(x=0;x<u.length;++x){let P=u[x];if(Ae(P,Uint8Array))U+P.length>L.length?(c.isBuffer(P)||(P=c.from(P)),P.copy(L,U)):Uint8Array.prototype.set.call(L,P,U);else if(c.isBuffer(P))P.copy(L,U);else throw new TypeError('"list" argument must be an Array of Buffers');U+=P.length}return L};function F(g,u){if(c.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||Ae(g,ArrayBuffer))return g.byteLength;if(typeof g!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);const h=g.length,x=arguments.length>2&&arguments[2]===!0;if(!x&&h===0)return 0;let L=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return Tt(g).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h*2;case"hex":return h>>>1;case"base64":return Ct(g).length;default:if(L)return x?-1:Tt(g).length;u=(""+u).toLowerCase(),L=!0}}c.byteLength=F;function W(g,u,h){let x=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0,u>>>=0,h<=u))return"";for(g||(g="utf8");;)switch(g){case"hex":return A(this,u,h);case"utf8":case"utf-8":return a(this,u,h);case"ascii":return w(this,u,h);case"latin1":case"binary":return E(this,u,h);case"base64":return m(this,u,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,u,h);default:if(x)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase(),x=!0}}c.prototype._isBuffer=!0;function Y(g,u,h){const x=g[u];g[u]=g[h],g[h]=x}c.prototype.swap16=function(){const u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let h=0;h<u;h+=2)Y(this,h,h+1);return this},c.prototype.swap32=function(){const u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let h=0;h<u;h+=4)Y(this,h,h+3),Y(this,h+1,h+2);return this},c.prototype.swap64=function(){const u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let h=0;h<u;h+=8)Y(this,h,h+7),Y(this,h+1,h+6),Y(this,h+2,h+5),Y(this,h+3,h+4);return this},c.prototype.toString=function(){const u=this.length;return u===0?"":arguments.length===0?a(this,0,u):W.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(u){if(!c.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:c.compare(this,u)===0},c.prototype.inspect=function(){let u="";const h=r.INSPECT_MAX_BYTES;return u=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(u+=" ... "),"<Buffer "+u+">"},n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=function(u,h,x,L,U){if(Ae(u,Uint8Array)&&(u=c.from(u,u.offset,u.byteLength)),!c.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(h===void 0&&(h=0),x===void 0&&(x=u?u.length:0),L===void 0&&(L=0),U===void 0&&(U=this.length),h<0||x>u.length||L<0||U>this.length)throw new RangeError("out of range index");if(L>=U&&h>=x)return 0;if(L>=U)return-1;if(h>=x)return 1;if(h>>>=0,x>>>=0,L>>>=0,U>>>=0,this===u)return 0;let P=U-L,pt=x-h;const dt=Math.min(P,pt),ht=this.slice(L,U),It=u.slice(h,x);for(let lt=0;lt<dt;++lt)if(ht[lt]!==It[lt]){P=ht[lt],pt=It[lt];break}return P<pt?-1:pt<P?1:0};function tt(g,u,h,x,L){if(g.length===0)return-1;if(typeof h=="string"?(x=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,Lt(h)&&(h=L?0:g.length-1),h<0&&(h=g.length+h),h>=g.length){if(L)return-1;h=g.length-1}else if(h<0)if(L)h=0;else return-1;if(typeof u=="string"&&(u=c.from(u,x)),c.isBuffer(u))return u.length===0?-1:ot(g,u,h,x,L);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(g,u,h):Uint8Array.prototype.lastIndexOf.call(g,u,h):ot(g,[u],h,x,L);throw new TypeError("val must be string, number or Buffer")}function ot(g,u,h,x,L){let U=1,P=g.length,pt=u.length;if(x!==void 0&&(x=String(x).toLowerCase(),x==="ucs2"||x==="ucs-2"||x==="utf16le"||x==="utf-16le")){if(g.length<2||u.length<2)return-1;U=2,P/=2,pt/=2,h/=2}function dt(It,lt){return U===1?It[lt]:It.readUInt16BE(lt*U)}let ht;if(L){let It=-1;for(ht=h;ht<P;ht++)if(dt(g,ht)===dt(u,It===-1?0:ht-It)){if(It===-1&&(It=ht),ht-It+1===pt)return It*U}else It!==-1&&(ht-=ht-It),It=-1}else for(h+pt>P&&(h=P-pt),ht=h;ht>=0;ht--){let It=!0;for(let lt=0;lt<pt;lt++)if(dt(g,ht+lt)!==dt(u,lt)){It=!1;break}if(It)return ht}return-1}c.prototype.includes=function(u,h,x){return this.indexOf(u,h,x)!==-1},c.prototype.indexOf=function(u,h,x){return tt(this,u,h,x,!0)},c.prototype.lastIndexOf=function(u,h,x){return tt(this,u,h,x,!1)};function at(g,u,h,x){h=Number(h)||0;const L=g.length-h;x?(x=Number(x),x>L&&(x=L)):x=L;const U=u.length;x>U/2&&(x=U/2);let P;for(P=0;P<x;++P){const pt=parseInt(u.substr(P*2,2),16);if(Lt(pt))return P;g[h+P]=pt}return P}function q(g,u,h,x){return At(Tt(u,g.length-h),g,h,x)}function Q(g,u,h,x){return At(Pt(u),g,h,x)}function z(g,u,h,x){return At(Ct(u),g,h,x)}function K(g,u,h,x){return At(Br(u,g.length-h),g,h,x)}c.prototype.write=function(u,h,x,L){if(h===void 0)L="utf8",x=this.length,h=0;else if(x===void 0&&typeof h=="string")L=h,x=this.length,h=0;else if(isFinite(h))h=h>>>0,isFinite(x)?(x=x>>>0,L===void 0&&(L="utf8")):(L=x,x=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const U=this.length-h;if((x===void 0||x>U)&&(x=U),u.length>0&&(x<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let P=!1;for(;;)switch(L){case"hex":return at(this,u,h,x);case"utf8":case"utf-8":return q(this,u,h,x);case"ascii":case"latin1":case"binary":return Q(this,u,h,x);case"base64":return z(this,u,h,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,u,h,x);default:if(P)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),P=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function m(g,u,h){return u===0&&h===g.length?t.fromByteArray(g):t.fromByteArray(g.slice(u,h))}function a(g,u,h){h=Math.min(g.length,h);const x=[];let L=u;for(;L<h;){const U=g[L];let P=null,pt=U>239?4:U>223?3:U>191?2:1;if(L+pt<=h){let dt,ht,It,lt;switch(pt){case 1:U<128&&(P=U);break;case 2:dt=g[L+1],(dt&192)===128&&(lt=(U&31)<<6|dt&63,lt>127&&(P=lt));break;case 3:dt=g[L+1],ht=g[L+2],(dt&192)===128&&(ht&192)===128&&(lt=(U&15)<<12|(dt&63)<<6|ht&63,lt>2047&&(lt<55296||lt>57343)&&(P=lt));break;case 4:dt=g[L+1],ht=g[L+2],It=g[L+3],(dt&192)===128&&(ht&192)===128&&(It&192)===128&&(lt=(U&15)<<18|(dt&63)<<12|(ht&63)<<6|It&63,lt>65535&&lt<1114112&&(P=lt))}}P===null?(P=65533,pt=1):P>65535&&(P-=65536,x.push(P>>>10&1023|55296),P=56320|P&1023),x.push(P),L+=pt}return p(x)}const f=4096;function p(g){const u=g.length;if(u<=f)return String.fromCharCode.apply(String,g);let h="",x=0;for(;x<u;)h+=String.fromCharCode.apply(String,g.slice(x,x+=f));return h}function w(g,u,h){let x="";h=Math.min(g.length,h);for(let L=u;L<h;++L)x+=String.fromCharCode(g[L]&127);return x}function E(g,u,h){let x="";h=Math.min(g.length,h);for(let L=u;L<h;++L)x+=String.fromCharCode(g[L]);return x}function A(g,u,h){const x=g.length;(!u||u<0)&&(u=0),(!h||h<0||h>x)&&(h=x);let L="";for(let U=u;U<h;++U)L+=Dt[g[U]];return L}function M(g,u,h){const x=g.slice(u,h);let L="";for(let U=0;U<x.length-1;U+=2)L+=String.fromCharCode(x[U]+x[U+1]*256);return L}c.prototype.slice=function(u,h){const x=this.length;u=~~u,h=h===void 0?x:~~h,u<0?(u+=x,u<0&&(u=0)):u>x&&(u=x),h<0?(h+=x,h<0&&(h=0)):h>x&&(h=x),h<u&&(h=u);const L=this.subarray(u,h);return Object.setPrototypeOf(L,c.prototype),L};function y(g,u,h){if(g%1!==0||g<0)throw new RangeError("offset is not uint");if(g+u>h)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(u,h,x){u=u>>>0,h=h>>>0,x||y(u,h,this.length);let L=this[u],U=1,P=0;for(;++P<h&&(U*=256);)L+=this[u+P]*U;return L},c.prototype.readUintBE=c.prototype.readUIntBE=function(u,h,x){u=u>>>0,h=h>>>0,x||y(u,h,this.length);let L=this[u+--h],U=1;for(;h>0&&(U*=256);)L+=this[u+--h]*U;return L},c.prototype.readUint8=c.prototype.readUInt8=function(u,h){return u=u>>>0,h||y(u,1,this.length),this[u]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(u,h){return u=u>>>0,h||y(u,2,this.length),this[u]|this[u+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(u,h){return u=u>>>0,h||y(u,2,this.length),this[u]<<8|this[u+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(u,h){return u=u>>>0,h||y(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(u,h){return u=u>>>0,h||y(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},c.prototype.readBigUInt64LE=ze(function(u){u=u>>>0,Ce(u,"offset");const h=this[u],x=this[u+7];(h===void 0||x===void 0)&&Bt(u,this.length-8);const L=h+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24,U=this[++u]+this[++u]*2**8+this[++u]*2**16+x*2**24;return BigInt(L)+(BigInt(U)<<BigInt(32))}),c.prototype.readBigUInt64BE=ze(function(u){u=u>>>0,Ce(u,"offset");const h=this[u],x=this[u+7];(h===void 0||x===void 0)&&Bt(u,this.length-8);const L=h*2**24+this[++u]*2**16+this[++u]*2**8+this[++u],U=this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+x;return(BigInt(L)<<BigInt(32))+BigInt(U)}),c.prototype.readIntLE=function(u,h,x){u=u>>>0,h=h>>>0,x||y(u,h,this.length);let L=this[u],U=1,P=0;for(;++P<h&&(U*=256);)L+=this[u+P]*U;return U*=128,L>=U&&(L-=Math.pow(2,8*h)),L},c.prototype.readIntBE=function(u,h,x){u=u>>>0,h=h>>>0,x||y(u,h,this.length);let L=h,U=1,P=this[u+--L];for(;L>0&&(U*=256);)P+=this[u+--L]*U;return U*=128,P>=U&&(P-=Math.pow(2,8*h)),P},c.prototype.readInt8=function(u,h){return u=u>>>0,h||y(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},c.prototype.readInt16LE=function(u,h){u=u>>>0,h||y(u,2,this.length);const x=this[u]|this[u+1]<<8;return x&32768?x|4294901760:x},c.prototype.readInt16BE=function(u,h){u=u>>>0,h||y(u,2,this.length);const x=this[u+1]|this[u]<<8;return x&32768?x|4294901760:x},c.prototype.readInt32LE=function(u,h){return u=u>>>0,h||y(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},c.prototype.readInt32BE=function(u,h){return u=u>>>0,h||y(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},c.prototype.readBigInt64LE=ze(function(u){u=u>>>0,Ce(u,"offset");const h=this[u],x=this[u+7];(h===void 0||x===void 0)&&Bt(u,this.length-8);const L=this[u+4]+this[u+5]*2**8+this[u+6]*2**16+(x<<24);return(BigInt(L)<<BigInt(32))+BigInt(h+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24)}),c.prototype.readBigInt64BE=ze(function(u){u=u>>>0,Ce(u,"offset");const h=this[u],x=this[u+7];(h===void 0||x===void 0)&&Bt(u,this.length-8);const L=(h<<24)+this[++u]*2**16+this[++u]*2**8+this[++u];return(BigInt(L)<<BigInt(32))+BigInt(this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+x)}),c.prototype.readFloatLE=function(u,h){return u=u>>>0,h||y(u,4,this.length),e.read(this,u,!0,23,4)},c.prototype.readFloatBE=function(u,h){return u=u>>>0,h||y(u,4,this.length),e.read(this,u,!1,23,4)},c.prototype.readDoubleLE=function(u,h){return u=u>>>0,h||y(u,8,this.length),e.read(this,u,!0,52,8)},c.prototype.readDoubleBE=function(u,h){return u=u>>>0,h||y(u,8,this.length),e.read(this,u,!1,52,8)};function l(g,u,h,x,L,U){if(!c.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>L||u<U)throw new RangeError('"value" argument is out of bounds');if(h+x>g.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(u,h,x,L){if(u=+u,h=h>>>0,x=x>>>0,!L){const pt=Math.pow(2,8*x)-1;l(this,u,h,x,pt,0)}let U=1,P=0;for(this[h]=u&255;++P<x&&(U*=256);)this[h+P]=u/U&255;return h+x},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(u,h,x,L){if(u=+u,h=h>>>0,x=x>>>0,!L){const pt=Math.pow(2,8*x)-1;l(this,u,h,x,pt,0)}let U=x-1,P=1;for(this[h+U]=u&255;--U>=0&&(P*=256);)this[h+U]=u/P&255;return h+x},c.prototype.writeUint8=c.prototype.writeUInt8=function(u,h,x){return u=+u,h=h>>>0,x||l(this,u,h,1,255,0),this[h]=u&255,h+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(u,h,x){return u=+u,h=h>>>0,x||l(this,u,h,2,65535,0),this[h]=u&255,this[h+1]=u>>>8,h+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(u,h,x){return u=+u,h=h>>>0,x||l(this,u,h,2,65535,0),this[h]=u>>>8,this[h+1]=u&255,h+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(u,h,x){return u=+u,h=h>>>0,x||l(this,u,h,4,4294967295,0),this[h+3]=u>>>24,this[h+2]=u>>>16,this[h+1]=u>>>8,this[h]=u&255,h+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(u,h,x){return u=+u,h=h>>>0,x||l(this,u,h,4,4294967295,0),this[h]=u>>>24,this[h+1]=u>>>16,this[h+2]=u>>>8,this[h+3]=u&255,h+4};function B(g,u,h,x,L){St(u,x,L,g,h,7);let U=Number(u&BigInt(4294967295));g[h++]=U,U=U>>8,g[h++]=U,U=U>>8,g[h++]=U,U=U>>8,g[h++]=U;let P=Number(u>>BigInt(32)&BigInt(4294967295));return g[h++]=P,P=P>>8,g[h++]=P,P=P>>8,g[h++]=P,P=P>>8,g[h++]=P,h}function G(g,u,h,x,L){St(u,x,L,g,h,7);let U=Number(u&BigInt(4294967295));g[h+7]=U,U=U>>8,g[h+6]=U,U=U>>8,g[h+5]=U,U=U>>8,g[h+4]=U;let P=Number(u>>BigInt(32)&BigInt(4294967295));return g[h+3]=P,P=P>>8,g[h+2]=P,P=P>>8,g[h+1]=P,P=P>>8,g[h]=P,h+8}c.prototype.writeBigUInt64LE=ze(function(u,h=0){return B(this,u,h,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=ze(function(u,h=0){return G(this,u,h,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(u,h,x,L){if(u=+u,h=h>>>0,!L){const dt=Math.pow(2,8*x-1);l(this,u,h,x,dt-1,-dt)}let U=0,P=1,pt=0;for(this[h]=u&255;++U<x&&(P*=256);)u<0&&pt===0&&this[h+U-1]!==0&&(pt=1),this[h+U]=(u/P>>0)-pt&255;return h+x},c.prototype.writeIntBE=function(u,h,x,L){if(u=+u,h=h>>>0,!L){const dt=Math.pow(2,8*x-1);l(this,u,h,x,dt-1,-dt)}let U=x-1,P=1,pt=0;for(this[h+U]=u&255;--U>=0&&(P*=256);)u<0&&pt===0&&this[h+U+1]!==0&&(pt=1),this[h+U]=(u/P>>0)-pt&255;return h+x},c.prototype.writeInt8=function(u,h,x){return u=+u,h=h>>>0,x||l(this,u,h,1,127,-128),u<0&&(u=255+u+1),this[h]=u&255,h+1},c.prototype.writeInt16LE=function(u,h,x){return u=+u,h=h>>>0,x||l(this,u,h,2,32767,-32768),this[h]=u&255,this[h+1]=u>>>8,h+2},c.prototype.writeInt16BE=function(u,h,x){return u=+u,h=h>>>0,x||l(this,u,h,2,32767,-32768),this[h]=u>>>8,this[h+1]=u&255,h+2},c.prototype.writeInt32LE=function(u,h,x){return u=+u,h=h>>>0,x||l(this,u,h,4,2147483647,-2147483648),this[h]=u&255,this[h+1]=u>>>8,this[h+2]=u>>>16,this[h+3]=u>>>24,h+4},c.prototype.writeInt32BE=function(u,h,x){return u=+u,h=h>>>0,x||l(this,u,h,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[h]=u>>>24,this[h+1]=u>>>16,this[h+2]=u>>>8,this[h+3]=u&255,h+4},c.prototype.writeBigInt64LE=ze(function(u,h=0){return B(this,u,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=ze(function(u,h=0){return G(this,u,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function V(g,u,h,x,L,U){if(h+x>g.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function J(g,u,h,x,L){return u=+u,h=h>>>0,L||V(g,u,h,4),e.write(g,u,h,x,23,4),h+4}c.prototype.writeFloatLE=function(u,h,x){return J(this,u,h,!0,x)},c.prototype.writeFloatBE=function(u,h,x){return J(this,u,h,!1,x)};function mt(g,u,h,x,L){return u=+u,h=h>>>0,L||V(g,u,h,8),e.write(g,u,h,x,52,8),h+8}c.prototype.writeDoubleLE=function(u,h,x){return mt(this,u,h,!0,x)},c.prototype.writeDoubleBE=function(u,h,x){return mt(this,u,h,!1,x)},c.prototype.copy=function(u,h,x,L){if(!c.isBuffer(u))throw new TypeError("argument should be a Buffer");if(x||(x=0),!L&&L!==0&&(L=this.length),h>=u.length&&(h=u.length),h||(h=0),L>0&&L<x&&(L=x),L===x||u.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(x<0||x>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),u.length-h<L-x&&(L=u.length-h+x);const U=L-x;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(h,x,L):Uint8Array.prototype.set.call(u,this.subarray(x,L),h),U},c.prototype.fill=function(u,h,x,L){if(typeof u=="string"){if(typeof h=="string"?(L=h,h=0,x=this.length):typeof x=="string"&&(L=x,x=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!c.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(u.length===1){const P=u.charCodeAt(0);(L==="utf8"&&P<128||L==="latin1")&&(u=P)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(h<0||this.length<h||this.length<x)throw new RangeError("Out of range index");if(x<=h)return this;h=h>>>0,x=x===void 0?this.length:x>>>0,u||(u=0);let U;if(typeof u=="number")for(U=h;U<x;++U)this[U]=u;else{const P=c.isBuffer(u)?u:c.from(u,L),pt=P.length;if(pt===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(U=0;U<x-h;++U)this[U+h]=P[U%pt]}return this};const ft={};function ut(g,u,h){ft[g]=class extends h{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${g}]`,this.stack,delete this.name}get code(){return g}set code(L){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:L,writable:!0})}toString(){return`${this.name} [${g}]: ${this.message}`}}}ut("ERR_BUFFER_OUT_OF_BOUNDS",function(g){return g?`${g} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ut("ERR_INVALID_ARG_TYPE",function(g,u){return`The "${g}" argument must be of type number. Received type ${typeof u}`},TypeError),ut("ERR_OUT_OF_RANGE",function(g,u,h){let x=`The value of "${g}" is out of range.`,L=h;return Number.isInteger(h)&&Math.abs(h)>2**32?L=Ot(String(h)):typeof h=="bigint"&&(L=String(h),(h>BigInt(2)**BigInt(32)||h<-(BigInt(2)**BigInt(32)))&&(L=Ot(L)),L+="n"),x+=` It must be ${u}. Received ${L}`,x},RangeError);function Ot(g){let u="",h=g.length;const x=g[0]==="-"?1:0;for(;h>=x+4;h-=3)u=`_${g.slice(h-3,h)}${u}`;return`${g.slice(0,h)}${u}`}function Et(g,u,h){Ce(u,"offset"),(g[u]===void 0||g[u+h]===void 0)&&Bt(u,g.length-(h+1))}function St(g,u,h,x,L,U){if(g>h||g<u){const P=typeof u=="bigint"?"n":"";let pt;throw u===0||u===BigInt(0)?pt=`>= 0${P} and < 2${P} ** ${(U+1)*8}${P}`:pt=`>= -(2${P} ** ${(U+1)*8-1}${P}) and < 2 ** ${(U+1)*8-1}${P}`,new ft.ERR_OUT_OF_RANGE("value",pt,g)}Et(x,L,U)}function Ce(g,u){if(typeof g!="number")throw new ft.ERR_INVALID_ARG_TYPE(u,"number",g)}function Bt(g,u,h){throw Math.floor(g)!==g?(Ce(g,h),new ft.ERR_OUT_OF_RANGE("offset","an integer",g)):u<0?new ft.ERR_BUFFER_OUT_OF_BOUNDS:new ft.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${u}`,g)}const Ft=/[^+/0-9A-Za-z-_]/g;function Sr(g){if(g=g.split("=")[0],g=g.trim().replace(Ft,""),g.length<2)return"";for(;g.length%4!==0;)g=g+"=";return g}function Tt(g,u){u=u||1/0;let h;const x=g.length;let L=null;const U=[];for(let P=0;P<x;++P){if(h=g.charCodeAt(P),h>55295&&h<57344){if(!L){if(h>56319){(u-=3)>-1&&U.push(239,191,189);continue}else if(P+1===x){(u-=3)>-1&&U.push(239,191,189);continue}L=h;continue}if(h<56320){(u-=3)>-1&&U.push(239,191,189),L=h;continue}h=(L-55296<<10|h-56320)+65536}else L&&(u-=3)>-1&&U.push(239,191,189);if(L=null,h<128){if((u-=1)<0)break;U.push(h)}else if(h<2048){if((u-=2)<0)break;U.push(h>>6|192,h&63|128)}else if(h<65536){if((u-=3)<0)break;U.push(h>>12|224,h>>6&63|128,h&63|128)}else if(h<1114112){if((u-=4)<0)break;U.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw new Error("Invalid code point")}return U}function Pt(g){const u=[];for(let h=0;h<g.length;++h)u.push(g.charCodeAt(h)&255);return u}function Br(g,u){let h,x,L;const U=[];for(let P=0;P<g.length&&!((u-=2)<0);++P)h=g.charCodeAt(P),x=h>>8,L=h%256,U.push(L),U.push(x);return U}function Ct(g){return t.toByteArray(Sr(g))}function At(g,u,h,x){let L;for(L=0;L<x&&!(L+h>=u.length||L>=g.length);++L)u[L+h]=g[L];return L}function Ae(g,u){return g instanceof u||g!=null&&g.constructor!=null&&g.constructor.name!=null&&g.constructor.name===u.name}function Lt(g){return g!==g}const Dt=function(){const g="0123456789abcdef",u=new Array(256);for(let h=0;h<16;++h){const x=h*16;for(let L=0;L<16;++L)u[x+L]=g[h]+g[L]}return u}();function ze(g){return typeof BigInt>"u"?qt:g}function qt(){throw new Error("BigInt not supported")}})(nt);window.Buffer||(window.Buffer=nt.Buffer);const Ni={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_DEFAULT_CLUSTER:"mainnet",VITE_OWNER_SOL_DOMAIN:"stonkystonkster.sol",VITE_OWNER_WALLET:"HeGffZqFhB9euhind4aJFWy8waLCppTkie4gvW8bQhzp",VITE_RPC_DEVNET:"https://api.devnet.solana.com",VITE_RPC_MAINNET:"https://mainnet.helius-rpc.com/?api-key=41701dab-24cf-4c52-8583-b60a3a8ddaac"},On=(r,t="")=>{var e;return(Ni==null?void 0:Ni[r])??((e=window.__ENV__)==null?void 0:e[r])??t},so=r=>r.split(",").map(t=>t.trim()).filter(Boolean),vt={DEFAULT_CLUSTER:On("VITE_DEFAULT_CLUSTER","mainnet"),TIP_DEST_SOL:On("VITE_OWNER_WALLET","HeGffZqFhB9euhind4aJFWy8waLCppTkie4gvW8bQhzp"),OWNER_SOL_DOMAIN:On("VITE_OWNER_SOL_DOMAIN",""),DEVNET_RPCS:(()=>{const r=On("VITE_RPC_DEVNET","");return r?so(r):["https://rpc.ankr.com/solana_devnet","https://api.devnet.solana.com"]})(),MAINNET_RPCS:(()=>{const r=On("VITE_RPC_MAINNET","");return r?so(r):["https://rpc.ankr.com/solana","https://solana.drpc.org","https://api.mainnet-beta.solana.com","https://solana-api.projectserum.com"]})(),MEMEGEN_API_KEY:On("VITE_MEMEGEN_API_KEY","")},Fn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function mr(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function as(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function Mn(r,...t){if(!mr(r))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(r.length))throw new Error("Uint8Array expected of length "+t+", got length="+r.length)}function Do(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");as(r.outputLen),as(r.blockLen)}function Pr(r,t=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(t&&r.finished)throw new Error("Hash#digest() has already been called")}function Nc(r,t){Mn(r);const e=t.outputLen;if(r.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function Yn(...r){for(let t=0;t<r.length;t++)r[t].fill(0)}function Oi(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function Ve(r,t){return r<<32-t|r>>>t}const qo=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Oc=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function Bn(r){if(Mn(r),qo)return r.toHex();let t="";for(let e=0;e<r.length;e++)t+=Oc[r[e]];return t}const en={_0:48,_9:57,A:65,F:70,a:97,f:102};function oo(r){if(r>=en._0&&r<=en._9)return r-en._0;if(r>=en.A&&r<=en.F)return r-(en.A-10);if(r>=en.a&&r<=en.f)return r-(en.a-10)}function Dr(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(qo)return Uint8Array.fromHex(r);const t=r.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const o=oo(r.charCodeAt(i)),c=oo(r.charCodeAt(i+1));if(o===void 0||c===void 0){const d=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+i)}n[s]=o*16+c}return n}function Fc(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function Es(r){return typeof r=="string"&&(r=Fc(r)),Mn(r),r}function Ge(...r){let t=0;for(let n=0;n<r.length;n++){const s=r[n];Mn(s),t+=s.length}const e=new Uint8Array(t);for(let n=0,s=0;n<r.length;n++){const i=r[n];e.set(i,s),s+=i.length}return e}class zo{}function $o(r){const t=n=>r().update(Es(n)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t}function Ss(r=32){if(Fn&&typeof Fn.getRandomValues=="function")return Fn.getRandomValues(new Uint8Array(r));if(Fn&&typeof Fn.randomBytes=="function")return Uint8Array.from(Fn.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function Pc(r,t,e,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),c=Number(e&i),d=n?4:0,b=n?0:4;r.setUint32(t+d,o,n),r.setUint32(t+b,c,n)}function Dc(r,t,e){return r&t^~r&e}function qc(r,t,e){return r&t^r&e^t&e}class Ko extends zo{constructor(t,e,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(t),this.view=Oi(this.buffer)}update(t){Pr(this),t=Es(t),Mn(t);const{view:e,buffer:n,blockLen:s}=this,i=t.length;for(let o=0;o<i;){const c=Math.min(s-this.pos,i-o);if(c===s){const d=Oi(t);for(;s<=i-o;o+=s)this.process(d,o);continue}n.set(t.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Pr(this),Nc(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,Yn(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let _=o;_<s;_++)e[_]=0;Pc(n,s-8,BigInt(this.length*8),i),this.process(n,0);const c=Oi(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const b=d/4,v=this.get();if(b>v.length)throw new Error("_sha2: outputLen bigger than state");for(let _=0;_<b;_++)c.setUint32(4*_,v[_],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:s,finished:i,destroyed:o,pos:c}=this;return t.destroyed=o,t.finished=i,t.length=s,t.pos=c,s%e&&t.buffer.set(n),t}clone(){return this._cloneInto()}}const ln=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ye=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),_r=BigInt(2**32-1),ao=BigInt(32);function zc(r,t=!1){return t?{h:Number(r&_r),l:Number(r>>ao&_r)}:{h:Number(r>>ao&_r)|0,l:Number(r&_r)|0}}function $c(r,t=!1){const e=r.length;let n=new Uint32Array(e),s=new Uint32Array(e);for(let i=0;i<e;i++){const{h:o,l:c}=zc(r[i],t);[n[i],s[i]]=[o,c]}return[n,s]}const co=(r,t,e)=>r>>>e,uo=(r,t,e)=>r<<32-e|t>>>e,Pn=(r,t,e)=>r>>>e|t<<32-e,Dn=(r,t,e)=>r<<32-e|t>>>e,kr=(r,t,e)=>r<<64-e|t>>>e-32,Ar=(r,t,e)=>r>>>e-32|t<<64-e;function nn(r,t,e,n){const s=(t>>>0)+(n>>>0);return{h:r+e+(s/2**32|0)|0,l:s|0}}const Kc=(r,t,e)=>(r>>>0)+(t>>>0)+(e>>>0),Wc=(r,t,e,n)=>t+e+n+(r/2**32|0)|0,Hc=(r,t,e,n)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0),Vc=(r,t,e,n,s)=>t+e+n+s+(r/2**32|0)|0,jc=(r,t,e,n,s)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),Gc=(r,t,e,n,s,i)=>t+e+n+s+i+(r/2**32|0)|0,Zc=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),fn=new Uint32Array(64);class Yc extends Ko{constructor(t=32){super(64,t,8,!1),this.A=ln[0]|0,this.B=ln[1]|0,this.C=ln[2]|0,this.D=ln[3]|0,this.E=ln[4]|0,this.F=ln[5]|0,this.G=ln[6]|0,this.H=ln[7]|0}get(){const{A:t,B:e,C:n,D:s,E:i,F:o,G:c,H:d}=this;return[t,e,n,s,i,o,c,d]}set(t,e,n,s,i,o,c,d){this.A=t|0,this.B=e|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=c|0,this.H=d|0}process(t,e){for(let _=0;_<16;_++,e+=4)fn[_]=t.getUint32(e,!1);for(let _=16;_<64;_++){const k=fn[_-15],S=fn[_-2],I=Ve(k,7)^Ve(k,18)^k>>>3,T=Ve(S,17)^Ve(S,19)^S>>>10;fn[_]=T+fn[_-7]+I+fn[_-16]|0}let{A:n,B:s,C:i,D:o,E:c,F:d,G:b,H:v}=this;for(let _=0;_<64;_++){const k=Ve(c,6)^Ve(c,11)^Ve(c,25),S=v+k+Dc(c,d,b)+Zc[_]+fn[_]|0,T=(Ve(n,2)^Ve(n,13)^Ve(n,22))+qc(n,s,i)|0;v=b,b=d,d=c,c=o+S|0,o=i,i=s,s=n,n=S+T|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,c=c+this.E|0,d=d+this.F|0,b=b+this.G|0,v=v+this.H|0,this.set(n,s,i,o,c,d,b,v)}roundClean(){Yn(fn)}destroy(){this.set(0,0,0,0,0,0,0,0),Yn(this.buffer)}}const Wo=$c(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),Xc=Wo[0],Jc=Wo[1],hn=new Uint32Array(80),dn=new Uint32Array(80);class Qc extends Ko{constructor(t=64){super(128,t,16,!1),this.Ah=ye[0]|0,this.Al=ye[1]|0,this.Bh=ye[2]|0,this.Bl=ye[3]|0,this.Ch=ye[4]|0,this.Cl=ye[5]|0,this.Dh=ye[6]|0,this.Dl=ye[7]|0,this.Eh=ye[8]|0,this.El=ye[9]|0,this.Fh=ye[10]|0,this.Fl=ye[11]|0,this.Gh=ye[12]|0,this.Gl=ye[13]|0,this.Hh=ye[14]|0,this.Hl=ye[15]|0}get(){const{Ah:t,Al:e,Bh:n,Bl:s,Ch:i,Cl:o,Dh:c,Dl:d,Eh:b,El:v,Fh:_,Fl:k,Gh:S,Gl:I,Hh:T,Hl:R}=this;return[t,e,n,s,i,o,c,d,b,v,_,k,S,I,T,R]}set(t,e,n,s,i,o,c,d,b,v,_,k,S,I,T,R){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=c|0,this.Dl=d|0,this.Eh=b|0,this.El=v|0,this.Fh=_|0,this.Fl=k|0,this.Gh=S|0,this.Gl=I|0,this.Hh=T|0,this.Hl=R|0}process(t,e){for(let F=0;F<16;F++,e+=4)hn[F]=t.getUint32(e),dn[F]=t.getUint32(e+=4);for(let F=16;F<80;F++){const W=hn[F-15]|0,Y=dn[F-15]|0,tt=Pn(W,Y,1)^Pn(W,Y,8)^co(W,Y,7),ot=Dn(W,Y,1)^Dn(W,Y,8)^uo(W,Y,7),at=hn[F-2]|0,q=dn[F-2]|0,Q=Pn(at,q,19)^kr(at,q,61)^co(at,q,6),z=Dn(at,q,19)^Ar(at,q,61)^uo(at,q,6),K=Hc(ot,z,dn[F-7],dn[F-16]),m=Vc(K,tt,Q,hn[F-7],hn[F-16]);hn[F]=m|0,dn[F]=K|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:c,Cl:d,Dh:b,Dl:v,Eh:_,El:k,Fh:S,Fl:I,Gh:T,Gl:R,Hh:C,Hl:D}=this;for(let F=0;F<80;F++){const W=Pn(_,k,14)^Pn(_,k,18)^kr(_,k,41),Y=Dn(_,k,14)^Dn(_,k,18)^Ar(_,k,41),tt=_&S^~_&T,ot=k&I^~k&R,at=jc(D,Y,ot,Jc[F],dn[F]),q=Gc(at,C,W,tt,Xc[F],hn[F]),Q=at|0,z=Pn(n,s,28)^kr(n,s,34)^kr(n,s,39),K=Dn(n,s,28)^Ar(n,s,34)^Ar(n,s,39),m=n&i^n&c^i&c,a=s&o^s&d^o&d;C=T|0,D=R|0,T=S|0,R=I|0,S=_|0,I=k|0,{h:_,l:k}=nn(b|0,v|0,q|0,Q|0),b=c|0,v=d|0,c=i|0,d=o|0,i=n|0,o=s|0;const f=Kc(Q,K,a);n=Wc(f,q,z,m),s=f|0}({h:n,l:s}=nn(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=nn(this.Bh|0,this.Bl|0,i|0,o|0),{h:c,l:d}=nn(this.Ch|0,this.Cl|0,c|0,d|0),{h:b,l:v}=nn(this.Dh|0,this.Dl|0,b|0,v|0),{h:_,l:k}=nn(this.Eh|0,this.El|0,_|0,k|0),{h:S,l:I}=nn(this.Fh|0,this.Fl|0,S|0,I|0),{h:T,l:R}=nn(this.Gh|0,this.Gl|0,T|0,R|0),{h:C,l:D}=nn(this.Hh|0,this.Hl|0,C|0,D|0),this.set(n,s,i,o,c,d,b,v,_,k,S,I,T,R,C,D)}roundClean(){Yn(hn,dn)}destroy(){Yn(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Ho=$o(()=>new Yc),tu=$o(()=>new Qc);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Bs=BigInt(0),cs=BigInt(1);function kn(r,t=""){if(typeof r!="boolean"){const e=t&&`"${t}"`;throw new Error(e+"expected boolean, got type="+typeof r)}return r}function Ke(r,t,e=""){const n=mr(r),s=r==null?void 0:r.length,i=t!==void 0;if(!n||i&&s!==t){const o=e&&`"${e}" `,c=i?` of length ${t}`:"",d=n?`length=${s}`:`type=${typeof r}`;throw new Error(o+"expected Uint8Array"+c+", got "+d)}return r}function Ir(r){const t=r.toString(16);return t.length&1?"0"+t:t}function Vo(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?Bs:BigInt("0x"+r)}function si(r){return Vo(Bn(r))}function fr(r){return Mn(r),Vo(Bn(Uint8Array.from(r).reverse()))}function _s(r,t){return Dr(r.toString(16).padStart(t*2,"0"))}function jo(r,t){return _s(r,t).reverse()}function $t(r,t,e){let n;if(typeof t=="string")try{n=Dr(t)}catch(i){throw new Error(r+" must be hex string or Uint8Array, cause: "+i)}else if(mr(t))n=Uint8Array.from(t);else throw new Error(r+" must be hex string or Uint8Array");const s=n.length;if(typeof e=="number"&&s!==e)throw new Error(r+" of length "+e+" expected, got "+s);return n}function lo(r){return Uint8Array.from(r)}const Fi=r=>typeof r=="bigint"&&Bs<=r;function eu(r,t,e){return Fi(r)&&Fi(t)&&Fi(e)&&t<=r&&r<e}function us(r,t,e,n){if(!eu(t,e,n))throw new Error("expected valid "+r+": "+e+" <= n < "+n+", got "+t)}function Go(r){let t;for(t=0;r>Bs;r>>=cs,t+=1);return t}const yr=r=>(cs<<BigInt(r))-cs;function nu(r,t,e){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");const n=S=>new Uint8Array(S),s=S=>Uint8Array.of(S);let i=n(r),o=n(r),c=0;const d=()=>{i.fill(1),o.fill(0),c=0},b=(...S)=>e(o,i,...S),v=(S=n(0))=>{o=b(s(0),S),i=b(),S.length!==0&&(o=b(s(1),S),i=b())},_=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let S=0;const I=[];for(;S<t;){i=b();const T=i.slice();I.push(T),S+=i.length}return Ge(...I)};return(S,I)=>{d(),v(S);let T;for(;!(T=I(_()));)v();return d(),T}}function wr(r,t,e={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function n(s,i,o){const c=r[s];if(o&&c===void 0)return;const d=typeof c;if(d!==i||c===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${d}`)}Object.entries(t).forEach(([s,i])=>n(s,i,!1)),Object.entries(e).forEach(([s,i])=>n(s,i,!0))}function qr(r){const t=new WeakMap;return(e,...n)=>{const s=t.get(e);if(s!==void 0)return s;const i=r(e,...n);return t.set(e,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ke=BigInt(0),me=BigInt(1),vn=BigInt(2),Zo=BigInt(3),Yo=BigInt(4),Xo=BigInt(5),ru=BigInt(7),Jo=BigInt(8),iu=BigInt(9),Qo=BigInt(16);function ce(r,t){const e=r%t;return e>=ke?e:t+e}function zt(r,t,e){let n=r;for(;t-- >ke;)n*=n,n%=e;return n}function fo(r,t){if(r===ke)throw new Error("invert: expected non-zero number");if(t<=ke)throw new Error("invert: expected positive modulus, got "+t);let e=ce(r,t),n=t,s=ke,i=me;for(;e!==ke;){const c=n/e,d=n%e,b=s-i*c;n=e,e=d,s=i,i=b}if(n!==me)throw new Error("invert: does not exist");return ce(s,t)}function ks(r,t,e){if(!r.eql(r.sqr(t),e))throw new Error("Cannot find square root")}function ta(r,t){const e=(r.ORDER+me)/Yo,n=r.pow(t,e);return ks(r,n,t),n}function su(r,t){const e=(r.ORDER-Xo)/Jo,n=r.mul(t,vn),s=r.pow(n,e),i=r.mul(t,s),o=r.mul(r.mul(i,vn),s),c=r.mul(i,r.sub(o,r.ONE));return ks(r,c,t),c}function ou(r){const t=Rn(r),e=ea(r),n=e(t,t.neg(t.ONE)),s=e(t,n),i=e(t,t.neg(n)),o=(r+ru)/Qo;return(c,d)=>{let b=c.pow(d,o),v=c.mul(b,n);const _=c.mul(b,s),k=c.mul(b,i),S=c.eql(c.sqr(v),d),I=c.eql(c.sqr(_),d);b=c.cmov(b,v,S),v=c.cmov(k,_,I);const T=c.eql(c.sqr(v),d),R=c.cmov(b,v,T);return ks(c,R,d),R}}function ea(r){if(r<Zo)throw new Error("sqrt is not defined for small field");let t=r-me,e=0;for(;t%vn===ke;)t/=vn,e++;let n=vn;const s=Rn(r);for(;ho(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1)return ta;let i=s.pow(n,t);const o=(t+me)/vn;return function(d,b){if(d.is0(b))return b;if(ho(d,b)!==1)throw new Error("Cannot find square root");let v=e,_=d.mul(d.ONE,i),k=d.pow(b,t),S=d.pow(b,o);for(;!d.eql(k,d.ONE);){if(d.is0(k))return d.ZERO;let I=1,T=d.sqr(k);for(;!d.eql(T,d.ONE);)if(I++,T=d.sqr(T),I===v)throw new Error("Cannot find square root");const R=me<<BigInt(v-I-1),C=d.pow(_,R);v=I,_=d.sqr(C),k=d.mul(k,_),S=d.mul(S,C)}return S}}function au(r){return r%Yo===Zo?ta:r%Jo===Xo?su:r%Qo===iu?ou(r):ea(r)}const cu=(r,t)=>(ce(r,t)&me)===me,uu=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function lu(r){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},e=uu.reduce((n,s)=>(n[s]="function",n),t);return wr(r,e),r}function fu(r,t,e){if(e<ke)throw new Error("invalid exponent, negatives unsupported");if(e===ke)return r.ONE;if(e===me)return t;let n=r.ONE,s=t;for(;e>ke;)e&me&&(n=r.mul(n,s)),s=r.sqr(s),e>>=me;return n}function na(r,t,e=!1){const n=new Array(t.length).fill(e?r.ZERO:void 0),s=t.reduce((o,c,d)=>r.is0(c)?o:(n[d]=o,r.mul(o,c)),r.ONE),i=r.inv(s);return t.reduceRight((o,c,d)=>r.is0(c)?o:(n[d]=r.mul(o,n[d]),r.mul(o,c)),i),n}function ho(r,t){const e=(r.ORDER-me)/vn,n=r.pow(t,e),s=r.eql(n,r.ONE),i=r.eql(n,r.ZERO),o=r.eql(n,r.neg(r.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function ra(r,t){t!==void 0&&as(t);const e=t!==void 0?t:r.toString(2).length,n=Math.ceil(e/8);return{nBitLength:e,nByteLength:n}}function Rn(r,t,e=!1,n={}){if(r<=ke)throw new Error("invalid field: expected ORDER > 0, got "+r);let s,i,o=!1,c;if(typeof t=="object"&&t!=null){if(n.sqrt||e)throw new Error("cannot specify opts in two arguments");const k=t;k.BITS&&(s=k.BITS),k.sqrt&&(i=k.sqrt),typeof k.isLE=="boolean"&&(e=k.isLE),typeof k.modFromBytes=="boolean"&&(o=k.modFromBytes),c=k.allowedLengths}else typeof t=="number"&&(s=t),n.sqrt&&(i=n.sqrt);const{nBitLength:d,nByteLength:b}=ra(r,s);if(b>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let v;const _=Object.freeze({ORDER:r,isLE:e,BITS:d,BYTES:b,MASK:yr(d),ZERO:ke,ONE:me,allowedLengths:c,create:k=>ce(k,r),isValid:k=>{if(typeof k!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof k);return ke<=k&&k<r},is0:k=>k===ke,isValidNot0:k=>!_.is0(k)&&_.isValid(k),isOdd:k=>(k&me)===me,neg:k=>ce(-k,r),eql:(k,S)=>k===S,sqr:k=>ce(k*k,r),add:(k,S)=>ce(k+S,r),sub:(k,S)=>ce(k-S,r),mul:(k,S)=>ce(k*S,r),pow:(k,S)=>fu(_,k,S),div:(k,S)=>ce(k*fo(S,r),r),sqrN:k=>k*k,addN:(k,S)=>k+S,subN:(k,S)=>k-S,mulN:(k,S)=>k*S,inv:k=>fo(k,r),sqrt:i||(k=>(v||(v=au(r)),v(_,k))),toBytes:k=>e?jo(k,b):_s(k,b),fromBytes:(k,S=!0)=>{if(c){if(!c.includes(k.length)||k.length>b)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+k.length);const T=new Uint8Array(b);T.set(k,e?0:T.length-k.length),k=T}if(k.length!==b)throw new Error("Field.fromBytes: expected "+b+" bytes, got "+k.length);let I=e?fr(k):si(k);if(o&&(I=ce(I,r)),!S&&!_.isValid(I))throw new Error("invalid field element: outside of range 0..ORDER");return I},invertBatch:k=>na(_,k),cmov:(k,S,I)=>I?S:k});return Object.freeze(_)}function ia(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const t=r.toString(2).length;return Math.ceil(t/8)}function sa(r){const t=ia(r);return t+Math.ceil(t/2)}function hu(r,t,e=!1){const n=r.length,s=ia(t),i=sa(t);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=e?fr(r):si(r),c=ce(o,t-me)+me;return e?jo(c,s):_s(c,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xn=BigInt(0),En=BigInt(1);function zr(r,t){const e=t.negate();return r?e:t}function Sn(r,t){const e=na(r.Fp,t.map(n=>n.Z));return t.map((n,s)=>r.fromAffine(n.toAffine(e[s])))}function oa(r,t){if(!Number.isSafeInteger(r)||r<=0||r>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+r)}function Pi(r,t){oa(r,t);const e=Math.ceil(t/r)+1,n=2**(r-1),s=2**r,i=yr(r),o=BigInt(r);return{windows:e,windowSize:n,mask:i,maxNumber:s,shiftBy:o}}function po(r,t,e){const{windowSize:n,mask:s,maxNumber:i,shiftBy:o}=e;let c=Number(r&s),d=r>>o;c>n&&(c-=i,d+=En);const b=t*n,v=b+Math.abs(c)-1,_=c===0,k=c<0,S=t%2!==0;return{nextN:d,offset:v,isZero:_,isNeg:k,isNegF:S,offsetF:b}}function du(r,t){if(!Array.isArray(r))throw new Error("array expected");r.forEach((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)})}function pu(r,t){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)})}const Di=new WeakMap,aa=new WeakMap;function qi(r){return aa.get(r)||1}function go(r){if(r!==Xn)throw new Error("invalid wNAF")}class ca{constructor(t,e){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=e}_unsafeLadder(t,e,n=this.ZERO){let s=t;for(;e>Xn;)e&En&&(n=n.add(s)),s=s.double(),e>>=En;return n}precomputeWindow(t,e){const{windows:n,windowSize:s}=Pi(e,this.bits),i=[];let o=t,c=o;for(let d=0;d<n;d++){c=o,i.push(c);for(let b=1;b<s;b++)c=c.add(o),i.push(c);o=c.double()}return i}wNAF(t,e,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=Pi(t,this.bits);for(let c=0;c<o.windows;c++){const{nextN:d,offset:b,isZero:v,isNeg:_,isNegF:k,offsetF:S}=po(n,c,o);n=d,v?i=i.add(zr(k,e[S])):s=s.add(zr(_,e[b]))}return go(n),{p:s,f:i}}wNAFUnsafe(t,e,n,s=this.ZERO){const i=Pi(t,this.bits);for(let o=0;o<i.windows&&n!==Xn;o++){const{nextN:c,offset:d,isZero:b,isNeg:v}=po(n,o,i);if(n=c,!b){const _=e[d];s=s.add(v?_.negate():_)}}return go(n),s}getPrecomputes(t,e,n){let s=Di.get(e);return s||(s=this.precomputeWindow(e,t),t!==1&&(typeof n=="function"&&(s=n(s)),Di.set(e,s))),s}cached(t,e,n){const s=qi(t);return this.wNAF(s,this.getPrecomputes(s,t,n),e)}unsafe(t,e,n,s){const i=qi(t);return i===1?this._unsafeLadder(t,e,s):this.wNAFUnsafe(i,this.getPrecomputes(i,t,n),e,s)}createCache(t,e){oa(e,this.bits),aa.set(t,e),Di.delete(t)}hasCache(t){return qi(t)!==1}}function gu(r,t,e,n){let s=t,i=r.ZERO,o=r.ZERO;for(;e>Xn||n>Xn;)e&En&&(i=i.add(s)),n&En&&(o=o.add(s)),s=s.double(),e>>=En,n>>=En;return{p1:i,p2:o}}function ua(r,t,e,n){du(e,r),pu(n,t);const s=e.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=r.ZERO,c=Go(BigInt(s));let d=1;c>12?d=c-3:c>4?d=c-2:c>0&&(d=2);const b=yr(d),v=new Array(Number(b)+1).fill(o),_=Math.floor((t.BITS-1)/d)*d;let k=o;for(let S=_;S>=0;S-=d){v.fill(o);for(let T=0;T<i;T++){const R=n[T],C=Number(R>>BigInt(S)&b);v[C]=v[C].add(e[T])}let I=o;for(let T=v.length-1,R=o;T>0;T--)R=R.add(v[T]),I=I.add(R);if(k=k.add(I),S!==0)for(let T=0;T<d;T++)k=k.double()}return k}function mo(r,t,e){if(t){if(t.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return lu(t),t}else return Rn(r,{isLE:e})}function la(r,t,e={},n){if(n===void 0&&(n=r==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${r} CURVE object`);for(const d of["p","n","h"]){const b=t[d];if(!(typeof b=="bigint"&&b>Xn))throw new Error(`CURVE.${d} must be positive bigint`)}const s=mo(t.p,e.Fp,n),i=mo(t.n,e.Fn,n),c=["Gx","Gy","a",r==="weierstrass"?"b":"d"];for(const d of c)if(!s.isValid(t[d]))throw new Error(`CURVE.${d} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:s,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pn=BigInt(0),ue=BigInt(1),zi=BigInt(2),mu=BigInt(8);function yu(r,t,e,n){const s=r.sqr(e),i=r.sqr(n),o=r.add(r.mul(t.a,s),i),c=r.add(r.ONE,r.mul(t.d,r.mul(s,i)));return r.eql(o,c)}function wu(r,t={}){const e=la("edwards",r,t,t.FpFnLE),{Fp:n,Fn:s}=e;let i=e.CURVE;const{h:o}=i;wr(t,{},{uvRatio:"function"});const c=zi<<BigInt(s.BYTES*8)-ue,d=R=>n.create(R),b=t.uvRatio||((R,C)=>{try{return{isValid:!0,value:n.sqrt(n.div(R,C))}}catch{return{isValid:!1,value:pn}}});if(!yu(n,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function v(R,C,D=!1){const F=D?ue:pn;return us("coordinate "+R,C,F,c),C}function _(R){if(!(R instanceof I))throw new Error("ExtendedPoint expected")}const k=qr((R,C)=>{const{X:D,Y:F,Z:W}=R,Y=R.is0();C==null&&(C=Y?mu:n.inv(W));const tt=d(D*C),ot=d(F*C),at=n.mul(W,C);if(Y)return{x:pn,y:ue};if(at!==ue)throw new Error("invZ was invalid");return{x:tt,y:ot}}),S=qr(R=>{const{a:C,d:D}=i;if(R.is0())throw new Error("bad point: ZERO");const{X:F,Y:W,Z:Y,T:tt}=R,ot=d(F*F),at=d(W*W),q=d(Y*Y),Q=d(q*q),z=d(ot*C),K=d(q*d(z+at)),m=d(Q+d(D*d(ot*at)));if(K!==m)throw new Error("bad point: equation left != right (1)");const a=d(F*W),f=d(Y*tt);if(a!==f)throw new Error("bad point: equation left != right (2)");return!0});class I{constructor(C,D,F,W){this.X=v("x",C),this.Y=v("y",D),this.Z=v("z",F,!0),this.T=v("t",W),Object.freeze(this)}static CURVE(){return i}static fromAffine(C){if(C instanceof I)throw new Error("extended point not allowed");const{x:D,y:F}=C||{};return v("x",D),v("y",F),new I(D,F,ue,d(D*F))}static fromBytes(C,D=!1){const F=n.BYTES,{a:W,d:Y}=i;C=lo(Ke(C,F,"point")),kn(D,"zip215");const tt=lo(C),ot=C[F-1];tt[F-1]=ot&-129;const at=fr(tt),q=D?c:n.ORDER;us("point.y",at,pn,q);const Q=d(at*at),z=d(Q-ue),K=d(Y*Q-W);let{isValid:m,value:a}=b(z,K);if(!m)throw new Error("bad point: invalid y coordinate");const f=(a&ue)===ue,p=(ot&128)!==0;if(!D&&a===pn&&p)throw new Error("bad point: x=0 and x_0=1");return p!==f&&(a=d(-a)),I.fromAffine({x:a,y:at})}static fromHex(C,D=!1){return I.fromBytes($t("point",C),D)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(C=8,D=!0){return T.createCache(this,C),D||this.multiply(zi),this}assertValidity(){S(this)}equals(C){_(C);const{X:D,Y:F,Z:W}=this,{X:Y,Y:tt,Z:ot}=C,at=d(D*ot),q=d(Y*W),Q=d(F*ot),z=d(tt*W);return at===q&&Q===z}is0(){return this.equals(I.ZERO)}negate(){return new I(d(-this.X),this.Y,this.Z,d(-this.T))}double(){const{a:C}=i,{X:D,Y:F,Z:W}=this,Y=d(D*D),tt=d(F*F),ot=d(zi*d(W*W)),at=d(C*Y),q=D+F,Q=d(d(q*q)-Y-tt),z=at+tt,K=z-ot,m=at-tt,a=d(Q*K),f=d(z*m),p=d(Q*m),w=d(K*z);return new I(a,f,w,p)}add(C){_(C);const{a:D,d:F}=i,{X:W,Y,Z:tt,T:ot}=this,{X:at,Y:q,Z:Q,T:z}=C,K=d(W*at),m=d(Y*q),a=d(ot*F*z),f=d(tt*Q),p=d((W+Y)*(at+q)-K-m),w=f-a,E=f+a,A=d(m-D*K),M=d(p*w),y=d(E*A),l=d(p*A),B=d(w*E);return new I(M,y,B,l)}subtract(C){return this.add(C.negate())}multiply(C){if(!s.isValidNot0(C))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:D,f:F}=T.cached(this,C,W=>Sn(I,W));return Sn(I,[D,F])[0]}multiplyUnsafe(C,D=I.ZERO){if(!s.isValid(C))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return C===pn?I.ZERO:this.is0()||C===ue?this:T.unsafe(this,C,F=>Sn(I,F),D)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return T.unsafe(this,i.n).is0()}toAffine(C){return k(this,C)}clearCofactor(){return o===ue?this:this.multiplyUnsafe(o)}toBytes(){const{x:C,y:D}=this.toAffine(),F=n.toBytes(D);return F[F.length-1]|=C&ue?128:0,F}toHex(){return Bn(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(C){return Sn(I,C)}static msm(C,D){return ua(I,s,C,D)}_setWindowSize(C){this.precompute(C)}toRawBytes(){return this.toBytes()}}I.BASE=new I(i.Gx,i.Gy,ue,d(i.Gx*i.Gy)),I.ZERO=new I(pn,ue,ue,pn),I.Fp=n,I.Fn=s;const T=new ca(I,s.BITS);return I.BASE.precompute(8),I}function bu(r,t,e={}){if(typeof t!="function")throw new Error('"hash" function param is required');wr(e,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n}=e,{BASE:s,Fp:i,Fn:o}=r,c=e.randomBytes||Ss,d=e.adjustScalarBytes||(q=>q),b=e.domain||((q,Q,z)=>{if(kn(z,"phflag"),Q.length||z)throw new Error("Contexts/pre-hash are not supported");return q});function v(q){return o.create(fr(q))}function _(q){const Q=F.secretKey;q=$t("private key",q,Q);const z=$t("hashed private key",t(q),2*Q),K=d(z.slice(0,Q)),m=z.slice(Q,2*Q),a=v(K);return{head:K,prefix:m,scalar:a}}function k(q){const{head:Q,prefix:z,scalar:K}=_(q),m=s.multiply(K),a=m.toBytes();return{head:Q,prefix:z,scalar:K,point:m,pointBytes:a}}function S(q){return k(q).pointBytes}function I(q=Uint8Array.of(),...Q){const z=Ge(...Q);return v(t(b(z,$t("context",q),!!n)))}function T(q,Q,z={}){q=$t("message",q),n&&(q=n(q));const{prefix:K,scalar:m,pointBytes:a}=k(Q),f=I(z.context,K,q),p=s.multiply(f).toBytes(),w=I(z.context,p,a,q),E=o.create(f+w*m);if(!o.isValid(E))throw new Error("sign failed: invalid s");const A=Ge(p,o.toBytes(E));return Ke(A,F.signature,"result")}const R={zip215:!0};function C(q,Q,z,K=R){const{context:m,zip215:a}=K,f=F.signature;q=$t("signature",q,f),Q=$t("message",Q),z=$t("publicKey",z,F.publicKey),a!==void 0&&kn(a,"zip215"),n&&(Q=n(Q));const p=f/2,w=q.subarray(0,p),E=fr(q.subarray(p,f));let A,M,y;try{A=r.fromBytes(z,a),M=r.fromBytes(w,a),y=s.multiplyUnsafe(E)}catch{return!1}if(!a&&A.isSmallOrder())return!1;const l=I(m,M.toBytes(),A.toBytes(),Q);return M.add(A.multiplyUnsafe(l)).subtract(y).clearCofactor().is0()}const D=i.BYTES,F={secretKey:D,publicKey:D,signature:2*D,seed:D};function W(q=c(F.seed)){return Ke(q,F.seed,"seed")}function Y(q){const Q=at.randomSecretKey(q);return{secretKey:Q,publicKey:S(Q)}}function tt(q){return mr(q)&&q.length===o.BYTES}function ot(q,Q){try{return!!r.fromBytes(q,Q)}catch{return!1}}const at={getExtendedPublicKey:k,randomSecretKey:W,isValidSecretKey:tt,isValidPublicKey:ot,toMontgomery(q){const{y:Q}=r.fromBytes(q),z=F.publicKey,K=z===32;if(!K&&z!==57)throw new Error("only defined for 25519 and 448");const m=K?i.div(ue+Q,ue-Q):i.div(Q-ue,Q+ue);return i.toBytes(m)},toMontgomeryPriv(q){const Q=F.secretKey;Ke(q,Q);const z=t(q.subarray(0,Q));return d(z).subarray(0,Q)},randomPrivateKey:W,precompute(q=8,Q=r.BASE){return Q.precompute(q,!1)}};return Object.freeze({keygen:Y,getPublicKey:S,sign:T,verify:C,utils:at,Point:r,lengths:F})}function xu(r){const t={a:r.a,d:r.d,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},e=r.Fp,n=Rn(t.n,r.nBitLength,!0),s={Fp:e,Fn:n,uvRatio:r.uvRatio},i={randomBytes:r.randomBytes,adjustScalarBytes:r.adjustScalarBytes,domain:r.domain,prehash:r.prehash,mapToCurve:r.mapToCurve};return{CURVE:t,curveOpts:s,hash:r.hash,eddsaOpts:i}}function vu(r,t){const e=t.Point;return Object.assign({},t,{ExtendedPoint:e,CURVE:r,nBitLength:e.Fn.BITS,nByteLength:e.Fn.BYTES})}function Eu(r){const{CURVE:t,curveOpts:e,hash:n,eddsaOpts:s}=xu(r),i=wu(t,e),o=bu(i,n,s);return vu(r,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Su=BigInt(1),yo=BigInt(2);BigInt(3);const Bu=BigInt(5),_u=BigInt(8),As=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),fa={p:As,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:_u,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function ku(r){const t=BigInt(10),e=BigInt(20),n=BigInt(40),s=BigInt(80),i=As,c=r*r%i*r%i,d=zt(c,yo,i)*c%i,b=zt(d,Su,i)*r%i,v=zt(b,Bu,i)*b%i,_=zt(v,t,i)*v%i,k=zt(_,e,i)*_%i,S=zt(k,n,i)*k%i,I=zt(S,s,i)*S%i,T=zt(I,s,i)*S%i,R=zt(T,t,i)*v%i;return{pow_p_5_8:zt(R,yo,i)*r%i,b2:c}}function Au(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}const wo=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Iu(r,t){const e=As,n=ce(t*t*t,e),s=ce(n*n*t,e),i=ku(r*s).pow_p_5_8;let o=ce(r*n*i,e);const c=ce(t*o*o,e),d=o,b=ce(o*wo,e),v=c===r,_=c===ce(-r,e),k=c===ce(-r*wo,e);return v&&(o=d),(_||k)&&(o=b),cu(o,e)&&(o=ce(-o,e)),{isValid:v||_,value:o}}const Mu=Rn(fa.p,{isLE:!0}),Ru={...fa,Fp:Mu,hash:tu,adjustScalarBytes:Au,uvRatio:Iu},br=Eu(Ru);var Is={exports:{}};const Tu={},Lu=Object.freeze(Object.defineProperty({__proto__:null,default:Tu},Symbol.toStringTag,{value:"Module"})),Cu=xs(Lu);Is.exports;(function(r){(function(t,e){function n(m,a){if(!m)throw new Error(a||"Assertion failed")}function s(m,a){m.super_=a;var f=function(){};f.prototype=a.prototype,m.prototype=new f,m.prototype.constructor=m}function i(m,a,f){if(i.isBN(m))return m;this.negative=0,this.words=null,this.length=0,this.red=null,m!==null&&((a==="le"||a==="be")&&(f=a,a=10),this._init(m||0,a||10,f||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Cu.Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,f){return a.cmp(f)>0?a:f},i.min=function(a,f){return a.cmp(f)<0?a:f},i.prototype._init=function(a,f,p){if(typeof a=="number")return this._initNumber(a,f,p);if(typeof a=="object")return this._initArray(a,f,p);f==="hex"&&(f=16),n(f===(f|0)&&f>=2&&f<=36),a=a.toString().replace(/\s+/g,"");var w=0;a[0]==="-"&&(w++,this.negative=1),w<a.length&&(f===16?this._parseHex(a,w,p):(this._parseBase(a,f,w),p==="le"&&this._initArray(this.toArray(),f,p)))},i.prototype._initNumber=function(a,f,p){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),p==="le"&&this._initArray(this.toArray(),f,p)},i.prototype._initArray=function(a,f,p){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var E,A,M=0;if(p==="be")for(w=a.length-1,E=0;w>=0;w-=3)A=a[w]|a[w-1]<<8|a[w-2]<<16,this.words[E]|=A<<M&67108863,this.words[E+1]=A>>>26-M&67108863,M+=24,M>=26&&(M-=26,E++);else if(p==="le")for(w=0,E=0;w<a.length;w+=3)A=a[w]|a[w+1]<<8|a[w+2]<<16,this.words[E]|=A<<M&67108863,this.words[E+1]=A>>>26-M&67108863,M+=24,M>=26&&(M-=26,E++);return this._strip()};function c(m,a){var f=m.charCodeAt(a);if(f>=48&&f<=57)return f-48;if(f>=65&&f<=70)return f-55;if(f>=97&&f<=102)return f-87;n(!1,"Invalid character in "+m)}function d(m,a,f){var p=c(m,f);return f-1>=a&&(p|=c(m,f-1)<<4),p}i.prototype._parseHex=function(a,f,p){this.length=Math.ceil((a.length-f)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var E=0,A=0,M;if(p==="be")for(w=a.length-1;w>=f;w-=2)M=d(a,f,w)<<E,this.words[A]|=M&67108863,E>=18?(E-=18,A+=1,this.words[A]|=M>>>26):E+=8;else{var y=a.length-f;for(w=y%2===0?f+1:f;w<a.length;w+=2)M=d(a,f,w)<<E,this.words[A]|=M&67108863,E>=18?(E-=18,A+=1,this.words[A]|=M>>>26):E+=8}this._strip()};function b(m,a,f,p){for(var w=0,E=0,A=Math.min(m.length,f),M=a;M<A;M++){var y=m.charCodeAt(M)-48;w*=p,y>=49?E=y-49+10:y>=17?E=y-17+10:E=y,n(y>=0&&E<p,"Invalid character"),w+=E}return w}i.prototype._parseBase=function(a,f,p){this.words=[0],this.length=1;for(var w=0,E=1;E<=67108863;E*=f)w++;w--,E=E/f|0;for(var A=a.length-p,M=A%w,y=Math.min(A,A-M)+p,l=0,B=p;B<y;B+=w)l=b(a,B,B+w,f),this.imuln(E),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(M!==0){var G=1;for(l=b(a,B,a.length,f),B=0;B<M;B++)G*=f;this.imuln(G),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this._strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var f=0;f<this.length;f++)a.words[f]=this.words[f];a.length=this.length,a.negative=this.negative,a.red=this.red};function v(m,a){m.words=a.words,m.length=a.length,m.negative=a.negative,m.red=a.red}if(i.prototype._move=function(a){v(a,this)},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=_}catch{i.prototype.inspect=_}else i.prototype.inspect=_;function _(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var k=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],I=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,f){a=a||10,f=f|0||1;var p;if(a===16||a==="hex"){p="";for(var w=0,E=0,A=0;A<this.length;A++){var M=this.words[A],y=((M<<w|E)&16777215).toString(16);E=M>>>24-w&16777215,w+=2,w>=26&&(w-=26,A--),E!==0||A!==this.length-1?p=k[6-y.length]+y+p:p=y+p}for(E!==0&&(p=E.toString(16)+p);p.length%f!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}if(a===(a|0)&&a>=2&&a<=36){var l=S[a],B=I[a];p="";var G=this.clone();for(G.negative=0;!G.isZero();){var V=G.modrn(B).toString(a);G=G.idivn(B),G.isZero()?p=V+p:p=k[l-V.length]+V+p}for(this.isZero()&&(p="0"+p);p.length%f!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(a,f){return this.toArrayLike(o,a,f)}),i.prototype.toArray=function(a,f){return this.toArrayLike(Array,a,f)};var T=function(a,f){return a.allocUnsafe?a.allocUnsafe(f):new a(f)};i.prototype.toArrayLike=function(a,f,p){this._strip();var w=this.byteLength(),E=p||Math.max(1,w);n(w<=E,"byte array longer than desired length"),n(E>0,"Requested array length <= 0");var A=T(a,E),M=f==="le"?"LE":"BE";return this["_toArrayLike"+M](A,w),A},i.prototype._toArrayLikeLE=function(a,f){for(var p=0,w=0,E=0,A=0;E<this.length;E++){var M=this.words[E]<<A|w;a[p++]=M&255,p<a.length&&(a[p++]=M>>8&255),p<a.length&&(a[p++]=M>>16&255),A===6?(p<a.length&&(a[p++]=M>>24&255),w=0,A=0):(w=M>>>24,A+=2)}if(p<a.length)for(a[p++]=w;p<a.length;)a[p++]=0},i.prototype._toArrayLikeBE=function(a,f){for(var p=a.length-1,w=0,E=0,A=0;E<this.length;E++){var M=this.words[E]<<A|w;a[p--]=M&255,p>=0&&(a[p--]=M>>8&255),p>=0&&(a[p--]=M>>16&255),A===6?(p>=0&&(a[p--]=M>>24&255),w=0,A=0):(w=M>>>24,A+=2)}if(p>=0)for(a[p--]=w;p>=0;)a[p--]=0},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var f=a,p=0;return f>=4096&&(p+=13,f>>>=13),f>=64&&(p+=7,f>>>=7),f>=8&&(p+=4,f>>>=4),f>=2&&(p+=2,f>>>=2),p+f},i.prototype._zeroBits=function(a){if(a===0)return 26;var f=a,p=0;return f&8191||(p+=13,f>>>=13),f&127||(p+=7,f>>>=7),f&15||(p+=4,f>>>=4),f&3||(p+=2,f>>>=2),f&1||p++,p},i.prototype.bitLength=function(){var a=this.words[this.length-1],f=this._countBits(a);return(this.length-1)*26+f};function R(m){for(var a=new Array(m.bitLength()),f=0;f<a.length;f++){var p=f/26|0,w=f%26;a[f]=m.words[p]>>>w&1}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,f=0;f<this.length;f++){var p=this._zeroBits(this.words[f]);if(a+=p,p!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var f=0;f<a.length;f++)this.words[f]=this.words[f]|a.words[f];return this._strip()},i.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var f;this.length>a.length?f=a:f=this;for(var p=0;p<f.length;p++)this.words[p]=this.words[p]&a.words[p];return this.length=f.length,this._strip()},i.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var f,p;this.length>a.length?(f=this,p=a):(f=a,p=this);for(var w=0;w<p.length;w++)this.words[w]=f.words[w]^p.words[w];if(this!==f)for(;w<f.length;w++)this.words[w]=f.words[w];return this.length=f.length,this._strip()},i.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var f=Math.ceil(a/26)|0,p=a%26;this._expand(f),p>0&&f--;for(var w=0;w<f;w++)this.words[w]=~this.words[w]&67108863;return p>0&&(this.words[w]=~this.words[w]&67108863>>26-p),this._strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,f){n(typeof a=="number"&&a>=0);var p=a/26|0,w=a%26;return this._expand(p+1),f?this.words[p]=this.words[p]|1<<w:this.words[p]=this.words[p]&~(1<<w),this._strip()},i.prototype.iadd=function(a){var f;if(this.negative!==0&&a.negative===0)return this.negative=0,f=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,f=this.isub(a),a.negative=1,f._normSign();var p,w;this.length>a.length?(p=this,w=a):(p=a,w=this);for(var E=0,A=0;A<w.length;A++)f=(p.words[A]|0)+(w.words[A]|0)+E,this.words[A]=f&67108863,E=f>>>26;for(;E!==0&&A<p.length;A++)f=(p.words[A]|0)+E,this.words[A]=f&67108863,E=f>>>26;if(this.length=p.length,E!==0)this.words[this.length]=E,this.length++;else if(p!==this)for(;A<p.length;A++)this.words[A]=p.words[A];return this},i.prototype.add=function(a){var f;return a.negative!==0&&this.negative===0?(a.negative=0,f=this.sub(a),a.negative^=1,f):a.negative===0&&this.negative!==0?(this.negative=0,f=a.sub(this),this.negative=1,f):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var f=this.iadd(a);return a.negative=1,f._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var p=this.cmp(a);if(p===0)return this.negative=0,this.length=1,this.words[0]=0,this;var w,E;p>0?(w=this,E=a):(w=a,E=this);for(var A=0,M=0;M<E.length;M++)f=(w.words[M]|0)-(E.words[M]|0)+A,A=f>>26,this.words[M]=f&67108863;for(;A!==0&&M<w.length;M++)f=(w.words[M]|0)+A,A=f>>26,this.words[M]=f&67108863;if(A===0&&M<w.length&&w!==this)for(;M<w.length;M++)this.words[M]=w.words[M];return this.length=Math.max(this.length,M),w!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function C(m,a,f){f.negative=a.negative^m.negative;var p=m.length+a.length|0;f.length=p,p=p-1|0;var w=m.words[0]|0,E=a.words[0]|0,A=w*E,M=A&67108863,y=A/67108864|0;f.words[0]=M;for(var l=1;l<p;l++){for(var B=y>>>26,G=y&67108863,V=Math.min(l,a.length-1),J=Math.max(0,l-m.length+1);J<=V;J++){var mt=l-J|0;w=m.words[mt]|0,E=a.words[J]|0,A=w*E+G,B+=A/67108864|0,G=A&67108863}f.words[l]=G|0,y=B|0}return y!==0?f.words[l]=y|0:f.length--,f._strip()}var D=function(a,f,p){var w=a.words,E=f.words,A=p.words,M=0,y,l,B,G=w[0]|0,V=G&8191,J=G>>>13,mt=w[1]|0,ft=mt&8191,ut=mt>>>13,Ot=w[2]|0,Et=Ot&8191,St=Ot>>>13,Ce=w[3]|0,Bt=Ce&8191,Ft=Ce>>>13,Sr=w[4]|0,Tt=Sr&8191,Pt=Sr>>>13,Br=w[5]|0,Ct=Br&8191,At=Br>>>13,Ae=w[6]|0,Lt=Ae&8191,Dt=Ae>>>13,ze=w[7]|0,qt=ze&8191,g=ze>>>13,u=w[8]|0,h=u&8191,x=u>>>13,L=w[9]|0,U=L&8191,P=L>>>13,pt=E[0]|0,dt=pt&8191,ht=pt>>>13,It=E[1]|0,lt=It&8191,Wt=It>>>13,Xs=E[2]|0,Ht=Xs&8191,Vt=Xs>>>13,Js=E[3]|0,jt=Js&8191,Gt=Js>>>13,Qs=E[4]|0,Zt=Qs&8191,Yt=Qs>>>13,to=E[5]|0,Xt=to&8191,Jt=to>>>13,eo=E[6]|0,Qt=eo&8191,te=eo>>>13,no=E[7]|0,ee=no&8191,ne=no>>>13,ro=E[8]|0,re=ro&8191,ie=ro>>>13,io=E[9]|0,se=io&8191,oe=io>>>13;p.negative=a.negative^f.negative,p.length=19,y=Math.imul(V,dt),l=Math.imul(V,ht),l=l+Math.imul(J,dt)|0,B=Math.imul(J,ht);var gi=(M+y|0)+((l&8191)<<13)|0;M=(B+(l>>>13)|0)+(gi>>>26)|0,gi&=67108863,y=Math.imul(ft,dt),l=Math.imul(ft,ht),l=l+Math.imul(ut,dt)|0,B=Math.imul(ut,ht),y=y+Math.imul(V,lt)|0,l=l+Math.imul(V,Wt)|0,l=l+Math.imul(J,lt)|0,B=B+Math.imul(J,Wt)|0;var mi=(M+y|0)+((l&8191)<<13)|0;M=(B+(l>>>13)|0)+(mi>>>26)|0,mi&=67108863,y=Math.imul(Et,dt),l=Math.imul(Et,ht),l=l+Math.imul(St,dt)|0,B=Math.imul(St,ht),y=y+Math.imul(ft,lt)|0,l=l+Math.imul(ft,Wt)|0,l=l+Math.imul(ut,lt)|0,B=B+Math.imul(ut,Wt)|0,y=y+Math.imul(V,Ht)|0,l=l+Math.imul(V,Vt)|0,l=l+Math.imul(J,Ht)|0,B=B+Math.imul(J,Vt)|0;var yi=(M+y|0)+((l&8191)<<13)|0;M=(B+(l>>>13)|0)+(yi>>>26)|0,yi&=67108863,y=Math.imul(Bt,dt),l=Math.imul(Bt,ht),l=l+Math.imul(Ft,dt)|0,B=Math.imul(Ft,ht),y=y+Math.imul(Et,lt)|0,l=l+Math.imul(Et,Wt)|0,l=l+Math.imul(St,lt)|0,B=B+Math.imul(St,Wt)|0,y=y+Math.imul(ft,Ht)|0,l=l+Math.imul(ft,Vt)|0,l=l+Math.imul(ut,Ht)|0,B=B+Math.imul(ut,Vt)|0,y=y+Math.imul(V,jt)|0,l=l+Math.imul(V,Gt)|0,l=l+Math.imul(J,jt)|0,B=B+Math.imul(J,Gt)|0;var wi=(M+y|0)+((l&8191)<<13)|0;M=(B+(l>>>13)|0)+(wi>>>26)|0,wi&=67108863,y=Math.imul(Tt,dt),l=Math.imul(Tt,ht),l=l+Math.imul(Pt,dt)|0,B=Math.imul(Pt,ht),y=y+Math.imul(Bt,lt)|0,l=l+Math.imul(Bt,Wt)|0,l=l+Math.imul(Ft,lt)|0,B=B+Math.imul(Ft,Wt)|0,y=y+Math.imul(Et,Ht)|0,l=l+Math.imul(Et,Vt)|0,l=l+Math.imul(St,Ht)|0,B=B+Math.imul(St,Vt)|0,y=y+Math.imul(ft,jt)|0,l=l+Math.imul(ft,Gt)|0,l=l+Math.imul(ut,jt)|0,B=B+Math.imul(ut,Gt)|0,y=y+Math.imul(V,Zt)|0,l=l+Math.imul(V,Yt)|0,l=l+Math.imul(J,Zt)|0,B=B+Math.imul(J,Yt)|0;var bi=(M+y|0)+((l&8191)<<13)|0;M=(B+(l>>>13)|0)+(bi>>>26)|0,bi&=67108863,y=Math.imul(Ct,dt),l=Math.imul(Ct,ht),l=l+Math.imul(At,dt)|0,B=Math.imul(At,ht),y=y+Math.imul(Tt,lt)|0,l=l+Math.imul(Tt,Wt)|0,l=l+Math.imul(Pt,lt)|0,B=B+Math.imul(Pt,Wt)|0,y=y+Math.imul(Bt,Ht)|0,l=l+Math.imul(Bt,Vt)|0,l=l+Math.imul(Ft,Ht)|0,B=B+Math.imul(Ft,Vt)|0,y=y+Math.imul(Et,jt)|0,l=l+Math.imul(Et,Gt)|0,l=l+Math.imul(St,jt)|0,B=B+Math.imul(St,Gt)|0,y=y+Math.imul(ft,Zt)|0,l=l+Math.imul(ft,Yt)|0,l=l+Math.imul(ut,Zt)|0,B=B+Math.imul(ut,Yt)|0,y=y+Math.imul(V,Xt)|0,l=l+Math.imul(V,Jt)|0,l=l+Math.imul(J,Xt)|0,B=B+Math.imul(J,Jt)|0;var xi=(M+y|0)+((l&8191)<<13)|0;M=(B+(l>>>13)|0)+(xi>>>26)|0,xi&=67108863,y=Math.imul(Lt,dt),l=Math.imul(Lt,ht),l=l+Math.imul(Dt,dt)|0,B=Math.imul(Dt,ht),y=y+Math.imul(Ct,lt)|0,l=l+Math.imul(Ct,Wt)|0,l=l+Math.imul(At,lt)|0,B=B+Math.imul(At,Wt)|0,y=y+Math.imul(Tt,Ht)|0,l=l+Math.imul(Tt,Vt)|0,l=l+Math.imul(Pt,Ht)|0,B=B+Math.imul(Pt,Vt)|0,y=y+Math.imul(Bt,jt)|0,l=l+Math.imul(Bt,Gt)|0,l=l+Math.imul(Ft,jt)|0,B=B+Math.imul(Ft,Gt)|0,y=y+Math.imul(Et,Zt)|0,l=l+Math.imul(Et,Yt)|0,l=l+Math.imul(St,Zt)|0,B=B+Math.imul(St,Yt)|0,y=y+Math.imul(ft,Xt)|0,l=l+Math.imul(ft,Jt)|0,l=l+Math.imul(ut,Xt)|0,B=B+Math.imul(ut,Jt)|0,y=y+Math.imul(V,Qt)|0,l=l+Math.imul(V,te)|0,l=l+Math.imul(J,Qt)|0,B=B+Math.imul(J,te)|0;var vi=(M+y|0)+((l&8191)<<13)|0;M=(B+(l>>>13)|0)+(vi>>>26)|0,vi&=67108863,y=Math.imul(qt,dt),l=Math.imul(qt,ht),l=l+Math.imul(g,dt)|0,B=Math.imul(g,ht),y=y+Math.imul(Lt,lt)|0,l=l+Math.imul(Lt,Wt)|0,l=l+Math.imul(Dt,lt)|0,B=B+Math.imul(Dt,Wt)|0,y=y+Math.imul(Ct,Ht)|0,l=l+Math.imul(Ct,Vt)|0,l=l+Math.imul(At,Ht)|0,B=B+Math.imul(At,Vt)|0,y=y+Math.imul(Tt,jt)|0,l=l+Math.imul(Tt,Gt)|0,l=l+Math.imul(Pt,jt)|0,B=B+Math.imul(Pt,Gt)|0,y=y+Math.imul(Bt,Zt)|0,l=l+Math.imul(Bt,Yt)|0,l=l+Math.imul(Ft,Zt)|0,B=B+Math.imul(Ft,Yt)|0,y=y+Math.imul(Et,Xt)|0,l=l+Math.imul(Et,Jt)|0,l=l+Math.imul(St,Xt)|0,B=B+Math.imul(St,Jt)|0,y=y+Math.imul(ft,Qt)|0,l=l+Math.imul(ft,te)|0,l=l+Math.imul(ut,Qt)|0,B=B+Math.imul(ut,te)|0,y=y+Math.imul(V,ee)|0,l=l+Math.imul(V,ne)|0,l=l+Math.imul(J,ee)|0,B=B+Math.imul(J,ne)|0;var Ei=(M+y|0)+((l&8191)<<13)|0;M=(B+(l>>>13)|0)+(Ei>>>26)|0,Ei&=67108863,y=Math.imul(h,dt),l=Math.imul(h,ht),l=l+Math.imul(x,dt)|0,B=Math.imul(x,ht),y=y+Math.imul(qt,lt)|0,l=l+Math.imul(qt,Wt)|0,l=l+Math.imul(g,lt)|0,B=B+Math.imul(g,Wt)|0,y=y+Math.imul(Lt,Ht)|0,l=l+Math.imul(Lt,Vt)|0,l=l+Math.imul(Dt,Ht)|0,B=B+Math.imul(Dt,Vt)|0,y=y+Math.imul(Ct,jt)|0,l=l+Math.imul(Ct,Gt)|0,l=l+Math.imul(At,jt)|0,B=B+Math.imul(At,Gt)|0,y=y+Math.imul(Tt,Zt)|0,l=l+Math.imul(Tt,Yt)|0,l=l+Math.imul(Pt,Zt)|0,B=B+Math.imul(Pt,Yt)|0,y=y+Math.imul(Bt,Xt)|0,l=l+Math.imul(Bt,Jt)|0,l=l+Math.imul(Ft,Xt)|0,B=B+Math.imul(Ft,Jt)|0,y=y+Math.imul(Et,Qt)|0,l=l+Math.imul(Et,te)|0,l=l+Math.imul(St,Qt)|0,B=B+Math.imul(St,te)|0,y=y+Math.imul(ft,ee)|0,l=l+Math.imul(ft,ne)|0,l=l+Math.imul(ut,ee)|0,B=B+Math.imul(ut,ne)|0,y=y+Math.imul(V,re)|0,l=l+Math.imul(V,ie)|0,l=l+Math.imul(J,re)|0,B=B+Math.imul(J,ie)|0;var Si=(M+y|0)+((l&8191)<<13)|0;M=(B+(l>>>13)|0)+(Si>>>26)|0,Si&=67108863,y=Math.imul(U,dt),l=Math.imul(U,ht),l=l+Math.imul(P,dt)|0,B=Math.imul(P,ht),y=y+Math.imul(h,lt)|0,l=l+Math.imul(h,Wt)|0,l=l+Math.imul(x,lt)|0,B=B+Math.imul(x,Wt)|0,y=y+Math.imul(qt,Ht)|0,l=l+Math.imul(qt,Vt)|0,l=l+Math.imul(g,Ht)|0,B=B+Math.imul(g,Vt)|0,y=y+Math.imul(Lt,jt)|0,l=l+Math.imul(Lt,Gt)|0,l=l+Math.imul(Dt,jt)|0,B=B+Math.imul(Dt,Gt)|0,y=y+Math.imul(Ct,Zt)|0,l=l+Math.imul(Ct,Yt)|0,l=l+Math.imul(At,Zt)|0,B=B+Math.imul(At,Yt)|0,y=y+Math.imul(Tt,Xt)|0,l=l+Math.imul(Tt,Jt)|0,l=l+Math.imul(Pt,Xt)|0,B=B+Math.imul(Pt,Jt)|0,y=y+Math.imul(Bt,Qt)|0,l=l+Math.imul(Bt,te)|0,l=l+Math.imul(Ft,Qt)|0,B=B+Math.imul(Ft,te)|0,y=y+Math.imul(Et,ee)|0,l=l+Math.imul(Et,ne)|0,l=l+Math.imul(St,ee)|0,B=B+Math.imul(St,ne)|0,y=y+Math.imul(ft,re)|0,l=l+Math.imul(ft,ie)|0,l=l+Math.imul(ut,re)|0,B=B+Math.imul(ut,ie)|0,y=y+Math.imul(V,se)|0,l=l+Math.imul(V,oe)|0,l=l+Math.imul(J,se)|0,B=B+Math.imul(J,oe)|0;var Bi=(M+y|0)+((l&8191)<<13)|0;M=(B+(l>>>13)|0)+(Bi>>>26)|0,Bi&=67108863,y=Math.imul(U,lt),l=Math.imul(U,Wt),l=l+Math.imul(P,lt)|0,B=Math.imul(P,Wt),y=y+Math.imul(h,Ht)|0,l=l+Math.imul(h,Vt)|0,l=l+Math.imul(x,Ht)|0,B=B+Math.imul(x,Vt)|0,y=y+Math.imul(qt,jt)|0,l=l+Math.imul(qt,Gt)|0,l=l+Math.imul(g,jt)|0,B=B+Math.imul(g,Gt)|0,y=y+Math.imul(Lt,Zt)|0,l=l+Math.imul(Lt,Yt)|0,l=l+Math.imul(Dt,Zt)|0,B=B+Math.imul(Dt,Yt)|0,y=y+Math.imul(Ct,Xt)|0,l=l+Math.imul(Ct,Jt)|0,l=l+Math.imul(At,Xt)|0,B=B+Math.imul(At,Jt)|0,y=y+Math.imul(Tt,Qt)|0,l=l+Math.imul(Tt,te)|0,l=l+Math.imul(Pt,Qt)|0,B=B+Math.imul(Pt,te)|0,y=y+Math.imul(Bt,ee)|0,l=l+Math.imul(Bt,ne)|0,l=l+Math.imul(Ft,ee)|0,B=B+Math.imul(Ft,ne)|0,y=y+Math.imul(Et,re)|0,l=l+Math.imul(Et,ie)|0,l=l+Math.imul(St,re)|0,B=B+Math.imul(St,ie)|0,y=y+Math.imul(ft,se)|0,l=l+Math.imul(ft,oe)|0,l=l+Math.imul(ut,se)|0,B=B+Math.imul(ut,oe)|0;var _i=(M+y|0)+((l&8191)<<13)|0;M=(B+(l>>>13)|0)+(_i>>>26)|0,_i&=67108863,y=Math.imul(U,Ht),l=Math.imul(U,Vt),l=l+Math.imul(P,Ht)|0,B=Math.imul(P,Vt),y=y+Math.imul(h,jt)|0,l=l+Math.imul(h,Gt)|0,l=l+Math.imul(x,jt)|0,B=B+Math.imul(x,Gt)|0,y=y+Math.imul(qt,Zt)|0,l=l+Math.imul(qt,Yt)|0,l=l+Math.imul(g,Zt)|0,B=B+Math.imul(g,Yt)|0,y=y+Math.imul(Lt,Xt)|0,l=l+Math.imul(Lt,Jt)|0,l=l+Math.imul(Dt,Xt)|0,B=B+Math.imul(Dt,Jt)|0,y=y+Math.imul(Ct,Qt)|0,l=l+Math.imul(Ct,te)|0,l=l+Math.imul(At,Qt)|0,B=B+Math.imul(At,te)|0,y=y+Math.imul(Tt,ee)|0,l=l+Math.imul(Tt,ne)|0,l=l+Math.imul(Pt,ee)|0,B=B+Math.imul(Pt,ne)|0,y=y+Math.imul(Bt,re)|0,l=l+Math.imul(Bt,ie)|0,l=l+Math.imul(Ft,re)|0,B=B+Math.imul(Ft,ie)|0,y=y+Math.imul(Et,se)|0,l=l+Math.imul(Et,oe)|0,l=l+Math.imul(St,se)|0,B=B+Math.imul(St,oe)|0;var ki=(M+y|0)+((l&8191)<<13)|0;M=(B+(l>>>13)|0)+(ki>>>26)|0,ki&=67108863,y=Math.imul(U,jt),l=Math.imul(U,Gt),l=l+Math.imul(P,jt)|0,B=Math.imul(P,Gt),y=y+Math.imul(h,Zt)|0,l=l+Math.imul(h,Yt)|0,l=l+Math.imul(x,Zt)|0,B=B+Math.imul(x,Yt)|0,y=y+Math.imul(qt,Xt)|0,l=l+Math.imul(qt,Jt)|0,l=l+Math.imul(g,Xt)|0,B=B+Math.imul(g,Jt)|0,y=y+Math.imul(Lt,Qt)|0,l=l+Math.imul(Lt,te)|0,l=l+Math.imul(Dt,Qt)|0,B=B+Math.imul(Dt,te)|0,y=y+Math.imul(Ct,ee)|0,l=l+Math.imul(Ct,ne)|0,l=l+Math.imul(At,ee)|0,B=B+Math.imul(At,ne)|0,y=y+Math.imul(Tt,re)|0,l=l+Math.imul(Tt,ie)|0,l=l+Math.imul(Pt,re)|0,B=B+Math.imul(Pt,ie)|0,y=y+Math.imul(Bt,se)|0,l=l+Math.imul(Bt,oe)|0,l=l+Math.imul(Ft,se)|0,B=B+Math.imul(Ft,oe)|0;var Ai=(M+y|0)+((l&8191)<<13)|0;M=(B+(l>>>13)|0)+(Ai>>>26)|0,Ai&=67108863,y=Math.imul(U,Zt),l=Math.imul(U,Yt),l=l+Math.imul(P,Zt)|0,B=Math.imul(P,Yt),y=y+Math.imul(h,Xt)|0,l=l+Math.imul(h,Jt)|0,l=l+Math.imul(x,Xt)|0,B=B+Math.imul(x,Jt)|0,y=y+Math.imul(qt,Qt)|0,l=l+Math.imul(qt,te)|0,l=l+Math.imul(g,Qt)|0,B=B+Math.imul(g,te)|0,y=y+Math.imul(Lt,ee)|0,l=l+Math.imul(Lt,ne)|0,l=l+Math.imul(Dt,ee)|0,B=B+Math.imul(Dt,ne)|0,y=y+Math.imul(Ct,re)|0,l=l+Math.imul(Ct,ie)|0,l=l+Math.imul(At,re)|0,B=B+Math.imul(At,ie)|0,y=y+Math.imul(Tt,se)|0,l=l+Math.imul(Tt,oe)|0,l=l+Math.imul(Pt,se)|0,B=B+Math.imul(Pt,oe)|0;var Ii=(M+y|0)+((l&8191)<<13)|0;M=(B+(l>>>13)|0)+(Ii>>>26)|0,Ii&=67108863,y=Math.imul(U,Xt),l=Math.imul(U,Jt),l=l+Math.imul(P,Xt)|0,B=Math.imul(P,Jt),y=y+Math.imul(h,Qt)|0,l=l+Math.imul(h,te)|0,l=l+Math.imul(x,Qt)|0,B=B+Math.imul(x,te)|0,y=y+Math.imul(qt,ee)|0,l=l+Math.imul(qt,ne)|0,l=l+Math.imul(g,ee)|0,B=B+Math.imul(g,ne)|0,y=y+Math.imul(Lt,re)|0,l=l+Math.imul(Lt,ie)|0,l=l+Math.imul(Dt,re)|0,B=B+Math.imul(Dt,ie)|0,y=y+Math.imul(Ct,se)|0,l=l+Math.imul(Ct,oe)|0,l=l+Math.imul(At,se)|0,B=B+Math.imul(At,oe)|0;var Mi=(M+y|0)+((l&8191)<<13)|0;M=(B+(l>>>13)|0)+(Mi>>>26)|0,Mi&=67108863,y=Math.imul(U,Qt),l=Math.imul(U,te),l=l+Math.imul(P,Qt)|0,B=Math.imul(P,te),y=y+Math.imul(h,ee)|0,l=l+Math.imul(h,ne)|0,l=l+Math.imul(x,ee)|0,B=B+Math.imul(x,ne)|0,y=y+Math.imul(qt,re)|0,l=l+Math.imul(qt,ie)|0,l=l+Math.imul(g,re)|0,B=B+Math.imul(g,ie)|0,y=y+Math.imul(Lt,se)|0,l=l+Math.imul(Lt,oe)|0,l=l+Math.imul(Dt,se)|0,B=B+Math.imul(Dt,oe)|0;var Ri=(M+y|0)+((l&8191)<<13)|0;M=(B+(l>>>13)|0)+(Ri>>>26)|0,Ri&=67108863,y=Math.imul(U,ee),l=Math.imul(U,ne),l=l+Math.imul(P,ee)|0,B=Math.imul(P,ne),y=y+Math.imul(h,re)|0,l=l+Math.imul(h,ie)|0,l=l+Math.imul(x,re)|0,B=B+Math.imul(x,ie)|0,y=y+Math.imul(qt,se)|0,l=l+Math.imul(qt,oe)|0,l=l+Math.imul(g,se)|0,B=B+Math.imul(g,oe)|0;var Ti=(M+y|0)+((l&8191)<<13)|0;M=(B+(l>>>13)|0)+(Ti>>>26)|0,Ti&=67108863,y=Math.imul(U,re),l=Math.imul(U,ie),l=l+Math.imul(P,re)|0,B=Math.imul(P,ie),y=y+Math.imul(h,se)|0,l=l+Math.imul(h,oe)|0,l=l+Math.imul(x,se)|0,B=B+Math.imul(x,oe)|0;var Li=(M+y|0)+((l&8191)<<13)|0;M=(B+(l>>>13)|0)+(Li>>>26)|0,Li&=67108863,y=Math.imul(U,se),l=Math.imul(U,oe),l=l+Math.imul(P,se)|0,B=Math.imul(P,oe);var Ci=(M+y|0)+((l&8191)<<13)|0;return M=(B+(l>>>13)|0)+(Ci>>>26)|0,Ci&=67108863,A[0]=gi,A[1]=mi,A[2]=yi,A[3]=wi,A[4]=bi,A[5]=xi,A[6]=vi,A[7]=Ei,A[8]=Si,A[9]=Bi,A[10]=_i,A[11]=ki,A[12]=Ai,A[13]=Ii,A[14]=Mi,A[15]=Ri,A[16]=Ti,A[17]=Li,A[18]=Ci,M!==0&&(A[19]=M,p.length++),p};Math.imul||(D=C);function F(m,a,f){f.negative=a.negative^m.negative,f.length=m.length+a.length;for(var p=0,w=0,E=0;E<f.length-1;E++){var A=w;w=0;for(var M=p&67108863,y=Math.min(E,a.length-1),l=Math.max(0,E-m.length+1);l<=y;l++){var B=E-l,G=m.words[B]|0,V=a.words[l]|0,J=G*V,mt=J&67108863;A=A+(J/67108864|0)|0,mt=mt+M|0,M=mt&67108863,A=A+(mt>>>26)|0,w+=A>>>26,A&=67108863}f.words[E]=M,p=A,A=w}return p!==0?f.words[E]=p:f.length--,f._strip()}function W(m,a,f){return F(m,a,f)}i.prototype.mulTo=function(a,f){var p,w=this.length+a.length;return this.length===10&&a.length===10?p=D(this,a,f):w<63?p=C(this,a,f):w<1024?p=F(this,a,f):p=W(this,a,f),p},i.prototype.mul=function(a){var f=new i(null);return f.words=new Array(this.length+a.length),this.mulTo(a,f)},i.prototype.mulf=function(a){var f=new i(null);return f.words=new Array(this.length+a.length),W(this,a,f)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){var f=a<0;f&&(a=-a),n(typeof a=="number"),n(a<67108864);for(var p=0,w=0;w<this.length;w++){var E=(this.words[w]|0)*a,A=(E&67108863)+(p&67108863);p>>=26,p+=E/67108864|0,p+=A>>>26,this.words[w]=A&67108863}return p!==0&&(this.words[w]=p,this.length++),this.length=a===0?1:this.length,f?this.ineg():this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var f=R(a);if(f.length===0)return new i(1);for(var p=this,w=0;w<f.length&&f[w]===0;w++,p=p.sqr());if(++w<f.length)for(var E=p.sqr();w<f.length;w++,E=E.sqr())f[w]!==0&&(p=p.mul(E));return p},i.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var f=a%26,p=(a-f)/26,w=67108863>>>26-f<<26-f,E;if(f!==0){var A=0;for(E=0;E<this.length;E++){var M=this.words[E]&w,y=(this.words[E]|0)-M<<f;this.words[E]=y|A,A=M>>>26-f}A&&(this.words[E]=A,this.length++)}if(p!==0){for(E=this.length-1;E>=0;E--)this.words[E+p]=this.words[E];for(E=0;E<p;E++)this.words[E]=0;this.length+=p}return this._strip()},i.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,f,p){n(typeof a=="number"&&a>=0);var w;f?w=(f-f%26)/26:w=0;var E=a%26,A=Math.min((a-E)/26,this.length),M=67108863^67108863>>>E<<E,y=p;if(w-=A,w=Math.max(0,w),y){for(var l=0;l<A;l++)y.words[l]=this.words[l];y.length=A}if(A!==0)if(this.length>A)for(this.length-=A,l=0;l<this.length;l++)this.words[l]=this.words[l+A];else this.words[0]=0,this.length=1;var B=0;for(l=this.length-1;l>=0&&(B!==0||l>=w);l--){var G=this.words[l]|0;this.words[l]=B<<26-E|G>>>E,B=G&M}return y&&B!==0&&(y.words[y.length++]=B),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(a,f,p){return n(this.negative===0),this.iushrn(a,f,p)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var f=a%26,p=(a-f)/26,w=1<<f;if(this.length<=p)return!1;var E=this.words[p];return!!(E&w)},i.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var f=a%26,p=(a-f)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=p)return this;if(f!==0&&p++,this.length=Math.min(p,this.length),f!==0){var w=67108863^67108863>>>f<<f;this.words[this.length-1]&=w}return this._strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},i.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this._strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,f,p){var w=a.length+p,E;this._expand(w);var A,M=0;for(E=0;E<a.length;E++){A=(this.words[E+p]|0)+M;var y=(a.words[E]|0)*f;A-=y&67108863,M=(A>>26)-(y/67108864|0),this.words[E+p]=A&67108863}for(;E<this.length-p;E++)A=(this.words[E+p]|0)+M,M=A>>26,this.words[E+p]=A&67108863;if(M===0)return this._strip();for(n(M===-1),M=0,E=0;E<this.length;E++)A=-(this.words[E]|0)+M,M=A>>26,this.words[E]=A&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(a,f){var p=this.length-a.length,w=this.clone(),E=a,A=E.words[E.length-1]|0,M=this._countBits(A);p=26-M,p!==0&&(E=E.ushln(p),w.iushln(p),A=E.words[E.length-1]|0);var y=w.length-E.length,l;if(f!=="mod"){l=new i(null),l.length=y+1,l.words=new Array(l.length);for(var B=0;B<l.length;B++)l.words[B]=0}var G=w.clone()._ishlnsubmul(E,1,y);G.negative===0&&(w=G,l&&(l.words[y]=1));for(var V=y-1;V>=0;V--){var J=(w.words[E.length+V]|0)*67108864+(w.words[E.length+V-1]|0);for(J=Math.min(J/A|0,67108863),w._ishlnsubmul(E,J,V);w.negative!==0;)J--,w.negative=0,w._ishlnsubmul(E,1,V),w.isZero()||(w.negative^=1);l&&(l.words[V]=J)}return l&&l._strip(),w._strip(),f!=="div"&&p!==0&&w.iushrn(p),{div:l||null,mod:w}},i.prototype.divmod=function(a,f,p){if(n(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var w,E,A;return this.negative!==0&&a.negative===0?(A=this.neg().divmod(a,f),f!=="mod"&&(w=A.div.neg()),f!=="div"&&(E=A.mod.neg(),p&&E.negative!==0&&E.iadd(a)),{div:w,mod:E}):this.negative===0&&a.negative!==0?(A=this.divmod(a.neg(),f),f!=="mod"&&(w=A.div.neg()),{div:w,mod:A.mod}):this.negative&a.negative?(A=this.neg().divmod(a.neg(),f),f!=="div"&&(E=A.mod.neg(),p&&E.negative!==0&&E.isub(a)),{div:A.div,mod:E}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?f==="div"?{div:this.divn(a.words[0]),mod:null}:f==="mod"?{div:null,mod:new i(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modrn(a.words[0]))}:this._wordDiv(a,f)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var f=this.divmod(a);if(f.mod.isZero())return f.div;var p=f.div.negative!==0?f.mod.isub(a):f.mod,w=a.ushrn(1),E=a.andln(1),A=p.cmp(w);return A<0||E===1&&A===0?f.div:f.div.negative!==0?f.div.isubn(1):f.div.iaddn(1)},i.prototype.modrn=function(a){var f=a<0;f&&(a=-a),n(a<=67108863);for(var p=(1<<26)%a,w=0,E=this.length-1;E>=0;E--)w=(p*w+(this.words[E]|0))%a;return f?-w:w},i.prototype.modn=function(a){return this.modrn(a)},i.prototype.idivn=function(a){var f=a<0;f&&(a=-a),n(a<=67108863);for(var p=0,w=this.length-1;w>=0;w--){var E=(this.words[w]|0)+p*67108864;this.words[w]=E/a|0,p=E%a}return this._strip(),f?this.ineg():this},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var f=this,p=a.clone();f.negative!==0?f=f.umod(a):f=f.clone();for(var w=new i(1),E=new i(0),A=new i(0),M=new i(1),y=0;f.isEven()&&p.isEven();)f.iushrn(1),p.iushrn(1),++y;for(var l=p.clone(),B=f.clone();!f.isZero();){for(var G=0,V=1;!(f.words[0]&V)&&G<26;++G,V<<=1);if(G>0)for(f.iushrn(G);G-- >0;)(w.isOdd()||E.isOdd())&&(w.iadd(l),E.isub(B)),w.iushrn(1),E.iushrn(1);for(var J=0,mt=1;!(p.words[0]&mt)&&J<26;++J,mt<<=1);if(J>0)for(p.iushrn(J);J-- >0;)(A.isOdd()||M.isOdd())&&(A.iadd(l),M.isub(B)),A.iushrn(1),M.iushrn(1);f.cmp(p)>=0?(f.isub(p),w.isub(A),E.isub(M)):(p.isub(f),A.isub(w),M.isub(E))}return{a:A,b:M,gcd:p.iushln(y)}},i.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var f=this,p=a.clone();f.negative!==0?f=f.umod(a):f=f.clone();for(var w=new i(1),E=new i(0),A=p.clone();f.cmpn(1)>0&&p.cmpn(1)>0;){for(var M=0,y=1;!(f.words[0]&y)&&M<26;++M,y<<=1);if(M>0)for(f.iushrn(M);M-- >0;)w.isOdd()&&w.iadd(A),w.iushrn(1);for(var l=0,B=1;!(p.words[0]&B)&&l<26;++l,B<<=1);if(l>0)for(p.iushrn(l);l-- >0;)E.isOdd()&&E.iadd(A),E.iushrn(1);f.cmp(p)>=0?(f.isub(p),w.isub(E)):(p.isub(f),E.isub(w))}var G;return f.cmpn(1)===0?G=w:G=E,G.cmpn(0)<0&&G.iadd(a),G},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var f=this.clone(),p=a.clone();f.negative=0,p.negative=0;for(var w=0;f.isEven()&&p.isEven();w++)f.iushrn(1),p.iushrn(1);do{for(;f.isEven();)f.iushrn(1);for(;p.isEven();)p.iushrn(1);var E=f.cmp(p);if(E<0){var A=f;f=p,p=A}else if(E===0||p.cmpn(1)===0)break;f.isub(p)}while(!0);return p.iushln(w)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){n(typeof a=="number");var f=a%26,p=(a-f)/26,w=1<<f;if(this.length<=p)return this._expand(p+1),this.words[p]|=w,this;for(var E=w,A=p;E!==0&&A<this.length;A++){var M=this.words[A]|0;M+=E,E=M>>>26,M&=67108863,this.words[A]=M}return E!==0&&(this.words[A]=E,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var f=a<0;if(this.negative!==0&&!f)return-1;if(this.negative===0&&f)return 1;this._strip();var p;if(this.length>1)p=1;else{f&&(a=-a),n(a<=67108863,"Number is too big");var w=this.words[0]|0;p=w===a?0:w<a?-1:1}return this.negative!==0?-p|0:p},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var f=this.ucmp(a);return this.negative!==0?-f|0:f},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var f=0,p=this.length-1;p>=0;p--){var w=this.words[p]|0,E=a.words[p]|0;if(w!==E){w<E?f=-1:w>E&&(f=1);break}}return f},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new z(a)},i.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var Y={k256:null,p224:null,p192:null,p25519:null};function tt(m,a){this.name=m,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}tt.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},tt.prototype.ireduce=function(a){var f=a,p;do this.split(f,this.tmp),f=this.imulK(f),f=f.iadd(this.tmp),p=f.bitLength();while(p>this.n);var w=p<this.n?-1:f.ucmp(this.p);return w===0?(f.words[0]=0,f.length=1):w>0?f.isub(this.p):f.strip!==void 0?f.strip():f._strip(),f},tt.prototype.split=function(a,f){a.iushrn(this.n,0,f)},tt.prototype.imulK=function(a){return a.imul(this.k)};function ot(){tt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(ot,tt),ot.prototype.split=function(a,f){for(var p=4194303,w=Math.min(a.length,9),E=0;E<w;E++)f.words[E]=a.words[E];if(f.length=w,a.length<=9){a.words[0]=0,a.length=1;return}var A=a.words[9];for(f.words[f.length++]=A&p,E=10;E<a.length;E++){var M=a.words[E]|0;a.words[E-10]=(M&p)<<4|A>>>22,A=M}A>>>=22,a.words[E-10]=A,A===0&&a.length>10?a.length-=10:a.length-=9},ot.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var f=0,p=0;p<a.length;p++){var w=a.words[p]|0;f+=w*977,a.words[p]=f&67108863,f=w*64+(f/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function at(){tt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(at,tt);function q(){tt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(q,tt);function Q(){tt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(Q,tt),Q.prototype.imulK=function(a){for(var f=0,p=0;p<a.length;p++){var w=(a.words[p]|0)*19+f,E=w&67108863;w>>>=26,a.words[p]=E,f=w}return f!==0&&(a.words[a.length++]=f),a},i._prime=function(a){if(Y[a])return Y[a];var f;if(a==="k256")f=new ot;else if(a==="p224")f=new at;else if(a==="p192")f=new q;else if(a==="p25519")f=new Q;else throw new Error("Unknown prime "+a);return Y[a]=f,f};function z(m){if(typeof m=="string"){var a=i._prime(m);this.m=a.p,this.prime=a}else n(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}z.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},z.prototype._verify2=function(a,f){n((a.negative|f.negative)===0,"red works only with positives"),n(a.red&&a.red===f.red,"red works only with red numbers")},z.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(v(a,a.umod(this.m)._forceRed(this)),a)},z.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},z.prototype.add=function(a,f){this._verify2(a,f);var p=a.add(f);return p.cmp(this.m)>=0&&p.isub(this.m),p._forceRed(this)},z.prototype.iadd=function(a,f){this._verify2(a,f);var p=a.iadd(f);return p.cmp(this.m)>=0&&p.isub(this.m),p},z.prototype.sub=function(a,f){this._verify2(a,f);var p=a.sub(f);return p.cmpn(0)<0&&p.iadd(this.m),p._forceRed(this)},z.prototype.isub=function(a,f){this._verify2(a,f);var p=a.isub(f);return p.cmpn(0)<0&&p.iadd(this.m),p},z.prototype.shl=function(a,f){return this._verify1(a),this.imod(a.ushln(f))},z.prototype.imul=function(a,f){return this._verify2(a,f),this.imod(a.imul(f))},z.prototype.mul=function(a,f){return this._verify2(a,f),this.imod(a.mul(f))},z.prototype.isqr=function(a){return this.imul(a,a.clone())},z.prototype.sqr=function(a){return this.mul(a,a)},z.prototype.sqrt=function(a){if(a.isZero())return a.clone();var f=this.m.andln(3);if(n(f%2===1),f===3){var p=this.m.add(new i(1)).iushrn(2);return this.pow(a,p)}for(var w=this.m.subn(1),E=0;!w.isZero()&&w.andln(1)===0;)E++,w.iushrn(1);n(!w.isZero());var A=new i(1).toRed(this),M=A.redNeg(),y=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new i(2*l*l).toRed(this);this.pow(l,y).cmp(M)!==0;)l.redIAdd(M);for(var B=this.pow(l,w),G=this.pow(a,w.addn(1).iushrn(1)),V=this.pow(a,w),J=E;V.cmp(A)!==0;){for(var mt=V,ft=0;mt.cmp(A)!==0;ft++)mt=mt.redSqr();n(ft<J);var ut=this.pow(B,new i(1).iushln(J-ft-1));G=G.redMul(ut),B=ut.redSqr(),V=V.redMul(B),J=ft}return G},z.prototype.invm=function(a){var f=a._invmp(this.m);return f.negative!==0?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},z.prototype.pow=function(a,f){if(f.isZero())return new i(1).toRed(this);if(f.cmpn(1)===0)return a.clone();var p=4,w=new Array(1<<p);w[0]=new i(1).toRed(this),w[1]=a;for(var E=2;E<w.length;E++)w[E]=this.mul(w[E-1],a);var A=w[0],M=0,y=0,l=f.bitLength()%26;for(l===0&&(l=26),E=f.length-1;E>=0;E--){for(var B=f.words[E],G=l-1;G>=0;G--){var V=B>>G&1;if(A!==w[0]&&(A=this.sqr(A)),V===0&&M===0){y=0;continue}M<<=1,M|=V,y++,!(y!==p&&(E!==0||G!==0))&&(A=this.mul(A,w[M]),y=0,M=0)}l=26}return A},z.prototype.convertTo=function(a){var f=a.umod(this.m);return f===a?f.clone():f},z.prototype.convertFrom=function(a){var f=a.clone();return f.red=null,f},i.mont=function(a){return new K(a)};function K(m){z.call(this,m),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(K,z),K.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},K.prototype.convertFrom=function(a){var f=this.imod(a.mul(this.rinv));return f.red=null,f},K.prototype.imul=function(a,f){if(a.isZero()||f.isZero())return a.words[0]=0,a.length=1,a;var p=a.imul(f),w=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=p.isub(w).iushrn(this.shift),A=E;return E.cmp(this.m)>=0?A=E.isub(this.m):E.cmpn(0)<0&&(A=E.iadd(this.m)),A._forceRed(this)},K.prototype.mul=function(a,f){if(a.isZero()||f.isZero())return new i(0)._forceRed(this);var p=a.mul(f),w=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=p.isub(w).iushrn(this.shift),A=E;return E.cmp(this.m)>=0?A=E.isub(this.m):E.cmpn(0)<0&&(A=E.iadd(this.m)),A._forceRed(this)},K.prototype.invm=function(a){var f=this.imod(a._invmp(this.m).mul(this.r2));return f._forceRed(this)}})(r,kc)})(Is);var ha=Is.exports;const bo=ri(ha);var ls={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(r,t){var e=nt,n=e.Buffer;function s(o,c){for(var d in o)c[d]=o[d]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=e:(s(e,t),t.Buffer=i);function i(o,c,d){return n(o,c,d)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(o,c,d){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,c,d)},i.alloc=function(o,c,d){if(typeof o!="number")throw new TypeError("Argument must be a number");var b=n(o);return c!==void 0?typeof d=="string"?b.fill(c,d):b.fill(c):b.fill(0),b},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}})(ls,ls.exports);var Uu=ls.exports,Mr=Uu.Buffer;function Nu(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<r.length;n++){var s=r.charAt(n),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=n}var o=r.length,c=r.charAt(0),d=Math.log(o)/Math.log(256),b=Math.log(256)/Math.log(o);function v(S){if((Array.isArray(S)||S instanceof Uint8Array)&&(S=Mr.from(S)),!Mr.isBuffer(S))throw new TypeError("Expected Buffer");if(S.length===0)return"";for(var I=0,T=0,R=0,C=S.length;R!==C&&S[R]===0;)R++,I++;for(var D=(C-R)*b+1>>>0,F=new Uint8Array(D);R!==C;){for(var W=S[R],Y=0,tt=D-1;(W!==0||Y<T)&&tt!==-1;tt--,Y++)W+=256*F[tt]>>>0,F[tt]=W%o>>>0,W=W/o>>>0;if(W!==0)throw new Error("Non-zero carry");T=Y,R++}for(var ot=D-T;ot!==D&&F[ot]===0;)ot++;for(var at=c.repeat(I);ot<D;++ot)at+=r.charAt(F[ot]);return at}function _(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return Mr.alloc(0);for(var I=0,T=0,R=0;S[I]===c;)T++,I++;for(var C=(S.length-I)*d+1>>>0,D=new Uint8Array(C);I<S.length;){var F=S.charCodeAt(I);if(F>255)return;var W=t[F];if(W===255)return;for(var Y=0,tt=C-1;(W!==0||Y<R)&&tt!==-1;tt--,Y++)W+=o*D[tt]>>>0,D[tt]=W%256>>>0,W=W/256>>>0;if(W!==0)throw new Error("Non-zero carry");R=Y,I++}for(var ot=C-R;ot!==C&&D[ot]===0;)ot++;var at=Mr.allocUnsafe(T+(C-ot));at.fill(0,0,T);for(var q=T;ot!==C;)at[q++]=D[ot++];return at}function k(S){var I=_(S);if(I)return I;throw new Error("Non-base"+o+" character")}return{encode:v,decodeUnsafe:_,decode:k}}var Ou=Nu,Fu=Ou,Pu="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",da=Fu(Pu);const ge=ri(da),xo=Ho;function on(r,t,e){return t<=r&&r<=e}function oi(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function Du(r){for(var t=String(r),e=t.length,n=0,s=[];n<e;){var i=t.charCodeAt(n);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(n===e-1)s.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var c=i&1023,d=o&1023;s.push(65536+(c<<10)+d),n+=1}else s.push(65533)}n+=1}return s}function qu(r){for(var t="",e=0;e<r.length;++e){var n=r[e];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return t}var $r=-1;function Ms(r){this.tokens=[].slice.call(r)}Ms.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():$r},prepend:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.push(t.shift());else this.tokens.push(r)}};var Jn=-1;function $i(r,t){if(r)throw TypeError("Decoder error");return t||65533}var Kr="utf-8";function Wr(r,t){if(!(this instanceof Wr))return new Wr(r,t);if(r=r!==void 0?String(r).toLowerCase():Kr,r!==Kr)throw new Error("Encoding not supported. Only utf-8 is supported");t=oi(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Wr.prototype={decode:function(t,e){var n;typeof t=="object"&&t instanceof ArrayBuffer?n=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):n=new Uint8Array(0),e=oi(e),this._streaming||(this._decoder=new zu({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new Ms(n),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==Jn);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===Jn)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),qu(i)}};function Hr(r,t){if(!(this instanceof Hr))return new Hr(r,t);if(r=r!==void 0?String(r).toLowerCase():Kr,r!==Kr)throw new Error("Encoding not supported. Only utf-8 is supported");t=oi(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Hr.prototype={encode:function(t,e){t=t?String(t):"",e=oi(e),this._streaming||(this._encoder=new $u(this._options)),this._streaming=!!e.stream;for(var n=[],s=new Ms(Du(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Jn);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Jn;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function zu(r){var t=r.fatal,e=0,n=0,s=0,i=128,o=191;this.handler=function(c,d){if(d===$r&&s!==0)return s=0,$i(t);if(d===$r)return Jn;if(s===0){if(on(d,0,127))return d;if(on(d,194,223))s=1,e=d-192;else if(on(d,224,239))d===224&&(i=160),d===237&&(o=159),s=2,e=d-224;else if(on(d,240,244))d===240&&(i=144),d===244&&(o=143),s=3,e=d-240;else return $i(t);return e=e<<6*s,null}if(!on(d,i,o))return e=s=n=0,i=128,o=191,c.prepend(d),$i(t);if(i=128,o=191,n+=1,e+=d-128<<6*(s-n),n!==s)return null;var b=e;return e=s=n=0,b}}function $u(r){r.fatal,this.handler=function(t,e){if(e===$r)return Jn;if(on(e,0,127))return e;var n,s;on(e,128,2047)?(n=1,s=192):on(e,2048,65535)?(n=2,s=224):on(e,65536,1114111)&&(n=3,s=240);for(var i=[(e>>6*n)+s];n>0;){var o=e>>6*(n-1);i.push(128|o&63),n-=1}return i}}const Ku=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Wr,TextEncoder:Hr},Symbol.toStringTag,{value:"Module"})),Wu=xs(Ku);var Hu=Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]},Vu=Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t},Je=function(r,t,e,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,n);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(i=(s<3?o(i):s>3?o(t,e,i):o(t,e))||i);return s>3&&i&&Object.defineProperty(t,e,i),i},ju=function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.hasOwnProperty.call(r,e)&&Hu(t,r,e);return Vu(t,r),t},pa=function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fe,"__esModule",{value:!0});fe.deserializeUnchecked=fe.deserialize=fe.serialize=fe.BinaryReader=fe.BinaryWriter=fe.BorshError=fe.baseDecode=fe.baseEncode=void 0;const mn=pa(ha),ga=pa(da),Gu=ju(Wu),Zu=typeof TextDecoder!="function"?Gu.TextDecoder:TextDecoder,Yu=new Zu("utf-8",{fatal:!0});function Xu(r){return typeof r=="string"&&(r=nt.Buffer.from(r,"utf8")),ga.default.encode(nt.Buffer.from(r))}fe.baseEncode=Xu;function Ju(r){return nt.Buffer.from(ga.default.decode(r))}fe.baseDecode=Ju;const Ki=1024;class Se extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}fe.BorshError=Se;class ma{constructor(){this.buf=nt.Buffer.alloc(Ki),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=nt.Buffer.concat([this.buf,nt.Buffer.alloc(Ki)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(nt.Buffer.from(new mn.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(nt.Buffer.from(new mn.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(nt.Buffer.from(new mn.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(nt.Buffer.from(new mn.default(t).toArray("le",64)))}writeBuffer(t){this.buf=nt.Buffer.concat([nt.Buffer.from(this.buf.subarray(0,this.length)),t,nt.Buffer.alloc(Ki)]),this.length+=t.length}writeString(t){this.maybeResize();const e=nt.Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(nt.Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const n of t)this.maybeResize(),e(n)}toArray(){return this.buf.subarray(0,this.length)}}fe.BinaryWriter=ma;function Qe(r,t,e){const n=e.value;e.value=function(...s){try{return n.apply(this,s)}catch(i){if(i instanceof RangeError){const o=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new Se("Reached the end of buffer when deserializing")}throw i}}}class Le{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new mn.default(t,"le")}readU128(){const t=this.readBuffer(16);return new mn.default(t,"le")}readU256(){const t=this.readBuffer(32);return new mn.default(t,"le")}readU512(){const t=this.readBuffer(64);return new mn.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new Se(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return Yu.decode(e)}catch(n){throw new Se(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),n=Array();for(let s=0;s<e;++s)n.push(t());return n}}Je([Qe],Le.prototype,"readU8",null);Je([Qe],Le.prototype,"readU16",null);Je([Qe],Le.prototype,"readU32",null);Je([Qe],Le.prototype,"readU64",null);Je([Qe],Le.prototype,"readU128",null);Je([Qe],Le.prototype,"readU256",null);Je([Qe],Le.prototype,"readU512",null);Je([Qe],Le.prototype,"readString",null);Je([Qe],Le.prototype,"readFixedArray",null);Je([Qe],Le.prototype,"readArray",null);fe.BinaryReader=Le;function ya(r){return r.charAt(0).toUpperCase()+r.slice(1)}function bn(r,t,e,n,s){try{if(typeof n=="string")s[`write${ya(n)}`](e);else if(n instanceof Array)if(typeof n[0]=="number"){if(e.length!==n[0])throw new Se(`Expecting byte array of length ${n[0]}, but got ${e.length} bytes`);s.writeFixedArray(e)}else if(n.length===2&&typeof n[1]=="number"){if(e.length!==n[1])throw new Se(`Expecting byte array of length ${n[1]}, but got ${e.length} bytes`);for(let i=0;i<n[1];i++)bn(r,null,e[i],n[0],s)}else s.writeArray(e,i=>{bn(r,t,i,n[0],s)});else if(n.kind!==void 0)switch(n.kind){case"option":{e==null?s.writeU8(0):(s.writeU8(1),bn(r,t,e,n.type,s));break}case"map":{s.writeU32(e.size),e.forEach((i,o)=>{bn(r,t,o,n.key,s),bn(r,t,i,n.value,s)});break}default:throw new Se(`FieldType ${n} unrecognized`)}else wa(r,e,s)}catch(i){throw i instanceof Se&&i.addToFieldPath(t),i}}function wa(r,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const n=r.get(t.constructor);if(!n)throw new Se(`Class ${t.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([s,i])=>{bn(r,s,t[s],i,e)});else if(n.kind==="enum"){const s=t[n.field];for(let i=0;i<n.values.length;++i){const[o,c]=n.values[i];if(o===s){e.writeU8(i),bn(r,o,t[o],c,e);break}}}else throw new Se(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function Qu(r,t,e=ma){const n=new e;return wa(r,t,n),n.toArray()}fe.serialize=Qu;function xn(r,t,e,n){try{if(typeof e=="string")return n[`read${ya(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return n.readFixedArray(e[0]);if(typeof e[1]=="number"){const s=[];for(let i=0;i<e[1];i++)s.push(xn(r,null,e[0],n));return s}else return n.readArray(()=>xn(r,t,e[0],n))}if(e.kind==="option")return n.readU8()?xn(r,t,e.type,n):void 0;if(e.kind==="map"){let s=new Map;const i=n.readU32();for(let o=0;o<i;o++){const c=xn(r,t,e.key,n),d=xn(r,t,e.value,n);s.set(c,d)}return s}return Rs(r,e,n)}catch(s){throw s instanceof Se&&s.addToFieldPath(t),s}}function Rs(r,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const n=r.get(t);if(!n)throw new Se(`Class ${t.name} is missing in schema`);if(n.kind==="struct"){const s={};for(const[i,o]of r.get(t).fields)s[i]=xn(r,i,o,e);return new t(s)}if(n.kind==="enum"){const s=e.readU8();if(s>=n.values.length)throw new Se(`Enum index: ${s} is out of range`);const[i,o]=n.values[s],c=xn(r,i,o,e);return new t({[i]:c})}throw new Se(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function tl(r,t,e,n=Le){const s=new n(e),i=Rs(r,t,s);if(s.offset<e.length)throw new Se(`Unexpected ${e.length-s.offset} bytes after deserialized data`);return i}fe.deserialize=tl;function el(r,t,e,n=Le){const s=new n(e);return Rs(r,t,s)}fe.deserializeUnchecked=el;const nl=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),{serialize:rl,deserialize:il,deserializeUnchecked:sl}=nl;var O={};Object.defineProperty(O,"__esModule",{value:!0});O.s16=O.s8=O.nu64be=O.u48be=O.u40be=O.u32be=O.u24be=O.u16be=pe=O.nu64=O.u48=O.u40=st=O.u32=O.u24=Pe=O.u16=bt=O.u8=_n=O.offset=O.greedy=O.Constant=O.UTF8=O.CString=O.Blob=O.Boolean=O.BitField=O.BitStructure=O.VariantLayout=O.Union=O.UnionLayoutDiscriminator=O.UnionDiscriminator=O.Structure=O.Sequence=O.DoubleBE=O.Double=O.FloatBE=O.Float=O.NearInt64BE=O.NearInt64=O.NearUInt64BE=O.NearUInt64=O.IntBE=O.Int=O.UIntBE=O.UInt=O.OffsetLayout=O.GreedyCount=O.ExternalLayout=O.bindConstructorLayout=O.nameWithProperty=O.Layout=O.uint8ArrayToBuffer=O.checkUint8Array=void 0;O.constant=O.utf8=O.cstr=Rt=O.blob=O.unionLayoutDiscriminator=O.union=Ee=O.seq=O.bits=et=O.struct=O.f64be=O.f64=O.f32be=O.f32=O.ns64be=O.s48be=O.s40be=O.s32be=O.s24be=O.s16be=Ie=O.ns64=O.s48=O.s40=O.s32=O.s24=void 0;const Ts=nt;function er(r){if(!(r instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}O.checkUint8Array=er;function wt(r){return er(r),Ts.Buffer.from(r.buffer,r.byteOffset,r.length)}O.uint8ArrayToBuffer=wt;class xt{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}O.Layout=xt;function Ls(r,t){return t.property?r+"["+t.property+"]":r}O.nameWithProperty=Ls;function ol(r,t){if(typeof r!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(r,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof xt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");r.layout_=t,t.boundConstructor_=r,t.makeDestinationObject=()=>new r,Object.defineProperty(r.prototype,"encode",{value(e,n){return t.encode(this,e,n)},writable:!0}),Object.defineProperty(r,"decode",{value(e,n){return t.decode(e,n)},writable:!0})}O.bindConstructorLayout=ol;class _e extends xt{isCount(){throw new Error("ExternalLayout is abstract")}}O.ExternalLayout=_e;class ba extends _e{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){er(t);const n=t.length-e;return Math.floor(n/this.elementSpan)}encode(t,e,n){return 0}}O.GreedyCount=ba;class Cs extends _e{constructor(t,e=0,n){if(!(t instanceof xt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,n||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof qe||this.layout instanceof We}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,n=0){return this.layout.encode(t,e,n+this.offset)}}O.OffsetLayout=Cs;class qe extends xt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return wt(t).readUIntLE(e,this.span)}encode(t,e,n=0){return wt(e).writeUIntLE(t,n,this.span),this.span}}O.UInt=qe;class We extends xt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return wt(t).readUIntBE(e,this.span)}encode(t,e,n=0){return wt(e).writeUIntBE(t,n,this.span),this.span}}O.UIntBE=We;class Tn extends xt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return wt(t).readIntLE(e,this.span)}encode(t,e,n=0){return wt(e).writeIntLE(t,n,this.span),this.span}}O.Int=Tn;class nr extends xt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return wt(t).readIntBE(e,this.span)}encode(t,e,n=0){return wt(e).writeIntBE(t,n,this.span),this.span}}O.IntBE=nr;const fs=Math.pow(2,32);function ai(r){const t=Math.floor(r/fs),e=r-t*fs;return{hi32:t,lo32:e}}function ci(r,t){return r*fs+t}class xa extends xt{constructor(t){super(8,t)}decode(t,e=0){const n=wt(t),s=n.readUInt32LE(e),i=n.readUInt32LE(e+4);return ci(i,s)}encode(t,e,n=0){const s=ai(t),i=wt(e);return i.writeUInt32LE(s.lo32,n),i.writeUInt32LE(s.hi32,n+4),8}}O.NearUInt64=xa;class va extends xt{constructor(t){super(8,t)}decode(t,e=0){const n=wt(t),s=n.readUInt32BE(e),i=n.readUInt32BE(e+4);return ci(s,i)}encode(t,e,n=0){const s=ai(t),i=wt(e);return i.writeUInt32BE(s.hi32,n),i.writeUInt32BE(s.lo32,n+4),8}}O.NearUInt64BE=va;class Ea extends xt{constructor(t){super(8,t)}decode(t,e=0){const n=wt(t),s=n.readUInt32LE(e),i=n.readInt32LE(e+4);return ci(i,s)}encode(t,e,n=0){const s=ai(t),i=wt(e);return i.writeUInt32LE(s.lo32,n),i.writeInt32LE(s.hi32,n+4),8}}O.NearInt64=Ea;class Sa extends xt{constructor(t){super(8,t)}decode(t,e=0){const n=wt(t),s=n.readInt32BE(e),i=n.readUInt32BE(e+4);return ci(s,i)}encode(t,e,n=0){const s=ai(t),i=wt(e);return i.writeInt32BE(s.hi32,n),i.writeUInt32BE(s.lo32,n+4),8}}O.NearInt64BE=Sa;class Ba extends xt{constructor(t){super(4,t)}decode(t,e=0){return wt(t).readFloatLE(e)}encode(t,e,n=0){return wt(e).writeFloatLE(t,n),4}}O.Float=Ba;class _a extends xt{constructor(t){super(4,t)}decode(t,e=0){return wt(t).readFloatBE(e)}encode(t,e,n=0){return wt(e).writeFloatBE(t,n),4}}O.FloatBE=_a;class ka extends xt{constructor(t){super(8,t)}decode(t,e=0){return wt(t).readDoubleLE(e)}encode(t,e,n=0){return wt(e).writeDoubleLE(t,n),8}}O.Double=ka;class Aa extends xt{constructor(t){super(8,t)}decode(t,e=0){return wt(t).readDoubleBE(e)}encode(t,e,n=0){return wt(e).writeDoubleBE(t,n),8}}O.DoubleBE=Aa;class Ia extends xt{constructor(t,e,n){if(!(t instanceof xt))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof _e&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(e instanceof _e)&&0<t.span&&(s=e*t.span),super(s,n),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0,s=this.count;if(s instanceof _e&&(s=s.decode(t,e)),0<this.elementLayout.span)n=s*this.elementLayout.span;else{let i=0;for(;i<s;)n+=this.elementLayout.getSpan(t,e+n),++i}return n}decode(t,e=0){const n=[];let s=0,i=this.count;for(i instanceof _e&&(i=i.decode(t,e));s<i;)n.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),s+=1;return n}encode(t,e,n=0){const s=this.elementLayout,i=t.reduce((o,c)=>o+s.encode(c,e,n+o),0);return this.count instanceof _e&&this.count.encode(t.length,e,n),i}}O.Sequence=Ia;class Ma extends xt{constructor(t,e,n){if(!(Array.isArray(t)&&t.reduce((i,o)=>i&&o instanceof xt,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&n===void 0&&(n=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=t.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,e),this.fields=t,this.decodePrefixes=!!n}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((s,i)=>{const o=i.getSpan(t,e);return e+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return n}decode(t,e=0){er(t);const n=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(n[s.property]=s.decode(t,e)),e+=s.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return n}encode(t,e,n=0){const s=n;let i=0,o=0;for(const c of this.fields){let d=c.span;if(o=0<d?d:0,c.property!==void 0){const b=t[c.property];b!==void 0&&(o=c.encode(b,e,n),0>d&&(d=c.getSpan(e,n)))}i=n,n+=d}return i+o-s}fromArray(t){const e=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<t.length&&(e[n.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const n of this.fields){if(n.property===t)return e;0>n.span?e=-1:0<=e&&(e+=n.span)}}}O.Structure=Ma;class Us{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,n){throw new Error("UnionDiscriminator is abstract")}}O.UnionDiscriminator=Us;class Vr extends Us{constructor(t,e){if(!(t instanceof _e&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,n){return this.layout.encode(t,e,n)}}O.UnionLayoutDiscriminator=Vr;class Ns extends xt{constructor(t,e,n){let s;if(t instanceof qe||t instanceof We)s=new Vr(new Cs(t));else if(t instanceof _e&&t.isCount())s=new Vr(t);else if(t instanceof Us)s=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof xt))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof qe||t instanceof We)&&(i+=s.layout.span)),super(i,n),this.discriminator=s,this.usesPrefixDiscriminator=t instanceof qe||t instanceof We,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(c){return o(c)},this.configGetSourceVariant=function(c){o=c.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const n=this.getVariant(t,e);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const n=this.registry[e];if(n.property&&Object.prototype.hasOwnProperty.call(t,n.property))return n}throw new Error("unable to infer src variant")}decode(t,e=0){let n;const s=this.discriminator,i=s.decode(t,e),o=this.registry[i];if(o===void 0){const c=this.defaultLayout;let d=0;this.usesPrefixDiscriminator&&(d=s.layout.span),n=this.makeDestinationObject(),n[s.property]=i,n[c.property]=c.decode(t,e+d)}else n=o.decode(t,e);return n}encode(t,e,n=0){const s=this.getSourceVariant(t);if(s===void 0){const i=this.discriminator,o=this.defaultLayout;let c=0;return this.usesPrefixDiscriminator&&(c=i.layout.span),i.encode(t[i.property],e,n),c+o.encode(t[o.property],e,n+c)}return s.encode(t,e,n)}addVariant(t,e,n){const s=new Ra(this,t,e,n);return this.registry[t]=s,s}getVariant(t,e=0){let n;return t instanceof Uint8Array?n=this.discriminator.decode(t,e):n=t,this.registry[n]}}O.Union=Ns;class Ra extends xt{constructor(t,e,n,s){if(!(t instanceof Ns))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&s===void 0&&(s=n,n=null),n){if(!(n instanceof xt))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=n.span&&n.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=n?n.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,s),this.union=t,this.variant=e,this.layout=n||null}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(t,e+n)),n+s}decode(t,e=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(t,e+s):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(t,e,n=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,n);let i=s;if(this.layout&&(this.layout.encode(t[this.property],e,n+s),i+=this.layout.getSpan(e,n+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}O.VariantLayout=Ra;function $n(r){return 0>r&&(r+=4294967296),r}class Os extends xt{constructor(t,e,n){if(!(t instanceof qe||t instanceof We))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&n===void 0&&(n=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,n),this.word=t,this.msb=!!e,this.fields=[];let s=0;this._packedSetValue=function(i){return s=$n(i),this},this._packedGetValue=function(){return s}}decode(t,e=0){const n=this.makeDestinationObject(),s=this.word.decode(t,e);this._packedSetValue(s);for(const i of this.fields)i.property!==void 0&&(n[i.property]=i.decode(t));return n}encode(t,e,n=0){const s=this.word.decode(e,n);this._packedSetValue(s);for(const i of this.fields)if(i.property!==void 0){const o=t[i.property];o!==void 0&&i.encode(o)}return this.word.encode(this._packedGetValue(),e,n)}addField(t,e){const n=new Fs(this,t,e);return this.fields.push(n),n}addBoolean(t){const e=new Ta(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}O.BitStructure=Os;class Fs{constructor(t,e,n){if(!(t instanceof Os))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const s=8*t.span,i=t.fields.reduce((o,c)=>o+c.bits,0);if(e+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-e),this.wordMask=$n(this.valueMask<<this.start),this.property=n}decode(t,e){const n=this.container._packedGetValue();return $n(n&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==$n(t&this.valueMask))throw new TypeError(Ls("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),n=$n(t<<this.start);this.container._packedSetValue($n(e&~this.wordMask)|n)}}O.BitField=Fs;let Ta=class extends Fs{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};O.Boolean=Ta;class La extends xt{constructor(t,e){if(!(t instanceof _e&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;t instanceof _e||(n=t),super(n,e),this.length=t}getSpan(t,e){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),n}decode(t,e=0){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),wt(t).slice(e,e+n)}encode(t,e,n){let s=this.length;if(this.length instanceof _e&&(s=t.length),!(t instanceof Uint8Array&&s===t.length))throw new TypeError(Ls("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(n+s>e.length)throw new RangeError("encoding overruns Uint8Array");const i=wt(t);return wt(e).write(i.toString("hex"),n,s,"hex"),this.length instanceof _e&&this.length.encode(s,e,n),s}}O.Blob=La;class Ca extends xt{constructor(t){super(-1,t)}getSpan(t,e=0){er(t);let n=e;for(;n<t.length&&t[n]!==0;)n+=1;return 1+n-e}decode(t,e=0){const n=this.getSpan(t,e);return wt(t).slice(e,e+n-1).toString("utf-8")}encode(t,e,n=0){typeof t!="string"&&(t=String(t));const s=Ts.Buffer.from(t,"utf8"),i=s.length;if(n+i>e.length)throw new RangeError("encoding overruns Buffer");const o=wt(e);return s.copy(o,n),o[n+i]=0,i+1}}O.CString=Ca;class Ua extends xt{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return er(t),t.length-e}decode(t,e=0){const n=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return wt(t).slice(e,e+n).toString("utf-8")}encode(t,e,n=0){typeof t!="string"&&(t=String(t));const s=Ts.Buffer.from(t,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(n+i>e.length)throw new RangeError("encoding overruns Buffer");return s.copy(wt(e),n),i}}O.UTF8=Ua;class Na extends xt{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,n){return 0}}O.Constant=Na;O.greedy=(r,t)=>new ba(r,t);var _n=O.offset=(r,t,e)=>new Cs(r,t,e),bt=O.u8=r=>new qe(1,r),Pe=O.u16=r=>new qe(2,r);O.u24=r=>new qe(3,r);var st=O.u32=r=>new qe(4,r);O.u40=r=>new qe(5,r);O.u48=r=>new qe(6,r);var pe=O.nu64=r=>new xa(r);O.u16be=r=>new We(2,r);O.u24be=r=>new We(3,r);O.u32be=r=>new We(4,r);O.u40be=r=>new We(5,r);O.u48be=r=>new We(6,r);O.nu64be=r=>new va(r);O.s8=r=>new Tn(1,r);O.s16=r=>new Tn(2,r);O.s24=r=>new Tn(3,r);O.s32=r=>new Tn(4,r);O.s40=r=>new Tn(5,r);O.s48=r=>new Tn(6,r);var Ie=O.ns64=r=>new Ea(r);O.s16be=r=>new nr(2,r);O.s24be=r=>new nr(3,r);O.s32be=r=>new nr(4,r);O.s40be=r=>new nr(5,r);O.s48be=r=>new nr(6,r);O.ns64be=r=>new Sa(r);O.f32=r=>new Ba(r);O.f32be=r=>new _a(r);O.f64=r=>new ka(r);O.f64be=r=>new Aa(r);var et=O.struct=(r,t,e)=>new Ma(r,t,e);O.bits=(r,t,e)=>new Os(r,t,e);var Ee=O.seq=(r,t,e)=>new Ia(r,t,e);O.union=(r,t,e)=>new Ns(r,t,e);O.unionLayoutDiscriminator=(r,t)=>new Vr(r,t);var Rt=O.blob=(r,t)=>new La(r,t);O.cstr=r=>new Ca(r);O.utf8=(r,t)=>new Ua(r,t);O.constant=(r,t)=>new Na(r,t);var al=8078e3,cl=8078001,ul=8078004,ll=8078005,fl=8078006,hl=8078011;function Oa(r){return Array.isArray(r)?"%5B"+r.map(Oa).join("%2C%20")+"%5D":typeof r=="bigint"?`${r}n`:encodeURIComponent(String(r!=null&&Object.getPrototypeOf(r)===null?{...r}:r))}function dl([r,t]){return`${r}=${Oa(t)}`}function pl(r){const t=Object.entries(r).map(dl).join("&");return btoa(t)}function gl(r,t={}){{let e=`Solana error #${r}; Decode this error by running \`npx @solana/errors decode -- ${r}`;return Object.keys(t).length&&(e+=` '${pl(t)}'`),`${e}\``}}var Vn=class extends Error{constructor(...[t,e]){let n,s;if(e){const{cause:o,...c}=e;o&&(s={cause:o}),Object.keys(c).length>0&&(n=c)}const i=gl(t,n);super(i,s);ae(this,"cause",this.cause);ae(this,"context");this.context={__code:t,...n},this.name="SolanaError"}};function ml(r,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(r)}function yl(r){return Object.freeze({...r,encode:t=>{const e=new Uint8Array(ml(t,r));return r.write(t,e,0),e}})}function wl(r){return Object.freeze({...r,decode:(t,e=0)=>r.read(t,e)[0]})}function qn(r){return"fixedSize"in r&&typeof r.fixedSize=="number"}function bl(r,t){if(qn(r)!==qn(t))throw new Vn(ul);if(qn(r)&&qn(t)&&r.fixedSize!==t.fixedSize)throw new Vn(ll,{decoderFixedSize:t.fixedSize,encoderFixedSize:r.fixedSize});if(!qn(r)&&!qn(t)&&r.maxSize!==t.maxSize)throw new Vn(fl,{decoderMaxSize:t.maxSize,encoderMaxSize:r.maxSize});return{...t,...r,decode:t.decode,encode:r.encode,read:t.read,write:r.write}}function xl(r,t,e=0){if(t.length-e<=0)throw new Vn(al,{codecDescription:r})}function vl(r,t,e,n=0){const s=e.length-n;if(s<t)throw new Vn(cl,{bytesLength:s,codecDescription:r,expected:t})}function El(r,t,e,n){if(n<t||n>e)throw new Vn(hl,{codecDescription:r,max:e,min:t,value:n})}function Fa(r){return(r==null?void 0:r.endian)!==1}function Sl(r){return yl({fixedSize:r.size,write(t,e,n){r.range&&El(r.name,r.range[0],r.range[1],t);const s=new ArrayBuffer(r.size);return r.set(new DataView(s),t,Fa(r.config)),e.set(new Uint8Array(s),n),n+r.size}})}function Bl(r){return wl({fixedSize:r.size,read(t,e=0){xl(r.name,t,e),vl(r.name,r.size,t,e);const n=new DataView(_l(t,e,r.size));return[r.get(n,Fa(r.config)),e+r.size]}})}function _l(r,t,e){const n=r.byteOffset+(t??0),s=e??r.byteLength;return r.buffer.slice(n,n+s)}var kl=(r={})=>Sl({config:r,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,n)=>t.setBigUint64(0,BigInt(e),n),size:8}),Al=(r={})=>Bl({config:r,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}),Il=(r={})=>bl(kl(r),Al(r));class Ml extends TypeError{constructor(t,e){let n;const{message:s,explanation:i,...o}=t,{path:c}=t,d=c.length===0?s:`At path: ${c.join(".")} -- ${s}`;super(i??d),i!=null&&(this.cause=d),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...e()])}}function Rl(r){return xr(r)&&typeof r[Symbol.iterator]=="function"}function xr(r){return typeof r=="object"&&r!=null}function jr(r){return xr(r)&&!Array.isArray(r)}function He(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function Tl(r){const{done:t,value:e}=r.next();return t?void 0:e}function Ll(r,t,e,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:s,branch:i}=t,{type:o}=e,{refinement:c,message:d=`Expected a value of type \`${o}\`${c?` with refinement \`${c}\``:""}, but received: \`${He(n)}\``}=r;return{value:n,type:o,refinement:c,key:s[s.length-1],path:s,branch:i,...r,message:d}}function*vo(r,t,e,n){Rl(r)||(r=[r]);for(const s of r){const i=Ll(s,t,e,n);i&&(yield i)}}function*Ps(r,t,e={}){const{path:n=[],branch:s=[r],coerce:i=!1,mask:o=!1}=e,c={path:n,branch:s,mask:o};i&&(r=t.coercer(r,c));let d="valid";for(const b of t.validator(r,c))b.explanation=e.message,d="not_valid",yield[b,void 0];for(let[b,v,_]of t.entries(r,c)){const k=Ps(v,_,{path:b===void 0?n:[...n,b],branch:b===void 0?s:[...s,v],coerce:i,mask:o,message:e.message});for(const S of k)S[0]?(d=S[0].refinement!=null?"not_refined":"not_valid",yield[S[0],void 0]):i&&(v=S[1],b===void 0?r=v:r instanceof Map?r.set(b,v):r instanceof Set?r.add(v):xr(r)&&(v!==void 0||b in r)&&(r[b]=v))}if(d!=="not_valid")for(const b of t.refiner(r,c))b.explanation=e.message,d="not_refined",yield[b,void 0];d==="valid"&&(yield[void 0,r])}let tn=class{constructor(t){const{type:e,schema:n,validator:s,refiner:i,coercer:o=d=>d,entries:c=function*(){}}=t;this.type=e,this.schema=n,this.entries=c,this.coercer=o,s?this.validator=(d,b)=>{const v=s(d,b);return vo(v,b,this,d)}:this.validator=()=>[],i?this.refiner=(d,b)=>{const v=i(d,b);return vo(v,b,this,d)}:this.refiner=()=>[]}assert(t,e){return Cl(t,this,e)}create(t,e){return j(t,this,e)}is(t){return Pa(t,this)}mask(t,e){return Ul(t,this,e)}validate(t,e={}){return vr(t,this,e)}};function Cl(r,t,e){const n=vr(r,t,{message:e});if(n[0])throw n[0]}function j(r,t,e){const n=vr(r,t,{coerce:!0,message:e});if(n[0])throw n[0];return n[1]}function Ul(r,t,e){const n=vr(r,t,{coerce:!0,mask:!0,message:e});if(n[0])throw n[0];return n[1]}function Pa(r,t){return!vr(r,t)[0]}function vr(r,t,e={}){const n=Ps(r,t,e),s=Tl(n);return s[0]?[new Ml(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function Ln(r,t){return new tn({type:r,schema:null,validator:t})}function Nl(){return Ln("any",()=>!0)}function Z(r){return new tn({type:"array",schema:r,*entries(t){if(r&&Array.isArray(t))for(const[e,n]of t.entries())yield[e,n,r]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${He(t)}`}})}function Ye(){return Ln("boolean",r=>typeof r=="boolean")}function Ds(r){return Ln("instance",t=>t instanceof r||`Expected a \`${r.name}\` instance, but received: ${He(t)}`)}function Ut(r){const t=He(r),e=typeof r;return new tn({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${t}\`, but received: ${He(n)}`}})}function Ol(){return Ln("never",()=>!1)}function X(r){return new tn({...r,validator:(t,e)=>t===null||r.validator(t,e),refiner:(t,e)=>t===null||r.refiner(t,e)})}function N(){return Ln("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${He(r)}`)}function it(r){return new tn({...r,validator:(t,e)=>t===void 0||r.validator(t,e),refiner:(t,e)=>t===void 0||r.refiner(t,e)})}function Da(r,t){return new tn({type:"record",schema:null,*entries(e){if(xr(e))for(const n in e){const s=e[n];yield[n,n,r],yield[n,s,t]}},validator(e){return jr(e)||`Expected an object, but received: ${He(e)}`},coercer(e){return jr(e)?{...e}:e}})}function H(){return Ln("string",r=>typeof r=="string"||`Expected a string, but received: ${He(r)}`)}function qs(r){const t=Ol();return new tn({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const n=Math.max(r.length,e.length);for(let s=0;s<n;s++)yield[s,e[s],r[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${He(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function $(r){const t=Object.keys(r);return new tn({type:"type",schema:r,*entries(e){if(xr(e))for(const n of t)yield[n,e[n],r[n]]},validator(e){return jr(e)||`Expected an object, but received: ${He(e)}`},coercer(e){return jr(e)?{...e}:e}})}function Be(r){const t=r.map(e=>e.type).join(" | ");return new tn({type:"union",schema:null,coercer(e,n){for(const s of r){const[i,o]=s.validate(e,{coerce:!0,mask:n.mask});if(!i)return o}return e},validator(e,n){const s=[];for(const i of r){const[...o]=Ps(e,i,n),[c]=o;if(c[0])for(const[d]of o)d&&s.push(d);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${He(e)}`,...s]}})}function rr(){return Ln("unknown",()=>!0)}function Er(r,t,e){return new tn({...r,coercer:(n,s)=>Pa(n,t)?r.coercer(e(n,s),s):r.coercer(n,s)})}var Rr,Fl=new Uint8Array(16);function qa(){if(!Rr&&(Rr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Rr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Rr(Fl)}const Pl=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ui(r){return typeof r=="string"&&Pl.test(r)}var de=[];for(var Wi=0;Wi<256;++Wi)de.push((Wi+256).toString(16).substr(1));function li(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(de[r[t+0]]+de[r[t+1]]+de[r[t+2]]+de[r[t+3]]+"-"+de[r[t+4]]+de[r[t+5]]+"-"+de[r[t+6]]+de[r[t+7]]+"-"+de[r[t+8]]+de[r[t+9]]+"-"+de[r[t+10]]+de[r[t+11]]+de[r[t+12]]+de[r[t+13]]+de[r[t+14]]+de[r[t+15]]).toLowerCase();if(!ui(e))throw TypeError("Stringified UUID is invalid");return e}var Eo,Hi,Vi=0,ji=0;function Dl(r,t,e){var n=t&&e||0,s=t||new Array(16);r=r||{};var i=r.node||Eo,o=r.clockseq!==void 0?r.clockseq:Hi;if(i==null||o==null){var c=r.random||(r.rng||qa)();i==null&&(i=Eo=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),o==null&&(o=Hi=(c[6]<<8|c[7])&16383)}var d=r.msecs!==void 0?r.msecs:Date.now(),b=r.nsecs!==void 0?r.nsecs:ji+1,v=d-Vi+(b-ji)/1e4;if(v<0&&r.clockseq===void 0&&(o=o+1&16383),(v<0||d>Vi)&&r.nsecs===void 0&&(b=0),b>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Vi=d,ji=b,Hi=o,d+=122192928e5;var _=((d&268435455)*1e4+b)%4294967296;s[n++]=_>>>24&255,s[n++]=_>>>16&255,s[n++]=_>>>8&255,s[n++]=_&255;var k=d/4294967296*1e4&268435455;s[n++]=k>>>8&255,s[n++]=k&255,s[n++]=k>>>24&15|16,s[n++]=k>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(var S=0;S<6;++S)s[n+S]=i[S];return t||li(s)}function za(r){if(!ui(r))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(r.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(r.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(r.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(r.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function ql(r){r=unescape(encodeURIComponent(r));for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e));return t}var zl="6ba7b810-9dad-11d1-80b4-00c04fd430c8",$l="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function $a(r,t,e){function n(s,i,o,c){if(typeof s=="string"&&(s=ql(s)),typeof i=="string"&&(i=za(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var d=new Uint8Array(16+s.length);if(d.set(i),d.set(s,i.length),d=e(d),d[6]=d[6]&15|t,d[8]=d[8]&63|128,o){c=c||0;for(var b=0;b<16;++b)o[c+b]=d[b];return o}return li(d)}try{n.name=r}catch{}return n.DNS=zl,n.URL=$l,n}function Kl(r){if(typeof r=="string"){var t=unescape(encodeURIComponent(r));r=new Uint8Array(t.length);for(var e=0;e<t.length;++e)r[e]=t.charCodeAt(e)}return Wl(Hl(Vl(r),r.length*8))}function Wl(r){for(var t=[],e=r.length*32,n="0123456789abcdef",s=0;s<e;s+=8){var i=r[s>>5]>>>s%32&255,o=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);t.push(o)}return t}function Ka(r){return(r+64>>>9<<4)+14+1}function Hl(r,t){r[t>>5]|=128<<t%32,r[Ka(t)-1]=t;for(var e=1732584193,n=-271733879,s=-1732584194,i=271733878,o=0;o<r.length;o+=16){var c=e,d=n,b=s,v=i;e=we(e,n,s,i,r[o],7,-680876936),i=we(i,e,n,s,r[o+1],12,-389564586),s=we(s,i,e,n,r[o+2],17,606105819),n=we(n,s,i,e,r[o+3],22,-1044525330),e=we(e,n,s,i,r[o+4],7,-176418897),i=we(i,e,n,s,r[o+5],12,1200080426),s=we(s,i,e,n,r[o+6],17,-1473231341),n=we(n,s,i,e,r[o+7],22,-45705983),e=we(e,n,s,i,r[o+8],7,1770035416),i=we(i,e,n,s,r[o+9],12,-1958414417),s=we(s,i,e,n,r[o+10],17,-42063),n=we(n,s,i,e,r[o+11],22,-1990404162),e=we(e,n,s,i,r[o+12],7,1804603682),i=we(i,e,n,s,r[o+13],12,-40341101),s=we(s,i,e,n,r[o+14],17,-1502002290),n=we(n,s,i,e,r[o+15],22,1236535329),e=be(e,n,s,i,r[o+1],5,-165796510),i=be(i,e,n,s,r[o+6],9,-1069501632),s=be(s,i,e,n,r[o+11],14,643717713),n=be(n,s,i,e,r[o],20,-373897302),e=be(e,n,s,i,r[o+5],5,-701558691),i=be(i,e,n,s,r[o+10],9,38016083),s=be(s,i,e,n,r[o+15],14,-660478335),n=be(n,s,i,e,r[o+4],20,-405537848),e=be(e,n,s,i,r[o+9],5,568446438),i=be(i,e,n,s,r[o+14],9,-1019803690),s=be(s,i,e,n,r[o+3],14,-187363961),n=be(n,s,i,e,r[o+8],20,1163531501),e=be(e,n,s,i,r[o+13],5,-1444681467),i=be(i,e,n,s,r[o+2],9,-51403784),s=be(s,i,e,n,r[o+7],14,1735328473),n=be(n,s,i,e,r[o+12],20,-1926607734),e=xe(e,n,s,i,r[o+5],4,-378558),i=xe(i,e,n,s,r[o+8],11,-2022574463),s=xe(s,i,e,n,r[o+11],16,1839030562),n=xe(n,s,i,e,r[o+14],23,-35309556),e=xe(e,n,s,i,r[o+1],4,-1530992060),i=xe(i,e,n,s,r[o+4],11,1272893353),s=xe(s,i,e,n,r[o+7],16,-155497632),n=xe(n,s,i,e,r[o+10],23,-1094730640),e=xe(e,n,s,i,r[o+13],4,681279174),i=xe(i,e,n,s,r[o],11,-358537222),s=xe(s,i,e,n,r[o+3],16,-722521979),n=xe(n,s,i,e,r[o+6],23,76029189),e=xe(e,n,s,i,r[o+9],4,-640364487),i=xe(i,e,n,s,r[o+12],11,-421815835),s=xe(s,i,e,n,r[o+15],16,530742520),n=xe(n,s,i,e,r[o+2],23,-995338651),e=ve(e,n,s,i,r[o],6,-198630844),i=ve(i,e,n,s,r[o+7],10,1126891415),s=ve(s,i,e,n,r[o+14],15,-1416354905),n=ve(n,s,i,e,r[o+5],21,-57434055),e=ve(e,n,s,i,r[o+12],6,1700485571),i=ve(i,e,n,s,r[o+3],10,-1894986606),s=ve(s,i,e,n,r[o+10],15,-1051523),n=ve(n,s,i,e,r[o+1],21,-2054922799),e=ve(e,n,s,i,r[o+8],6,1873313359),i=ve(i,e,n,s,r[o+15],10,-30611744),s=ve(s,i,e,n,r[o+6],15,-1560198380),n=ve(n,s,i,e,r[o+13],21,1309151649),e=ve(e,n,s,i,r[o+4],6,-145523070),i=ve(i,e,n,s,r[o+11],10,-1120210379),s=ve(s,i,e,n,r[o+2],15,718787259),n=ve(n,s,i,e,r[o+9],21,-343485551),e=yn(e,c),n=yn(n,d),s=yn(s,b),i=yn(i,v)}return[e,n,s,i]}function Vl(r){if(r.length===0)return[];for(var t=r.length*8,e=new Uint32Array(Ka(t)),n=0;n<t;n+=8)e[n>>5]|=(r[n/8]&255)<<n%32;return e}function yn(r,t){var e=(r&65535)+(t&65535),n=(r>>16)+(t>>16)+(e>>16);return n<<16|e&65535}function jl(r,t){return r<<t|r>>>32-t}function fi(r,t,e,n,s,i){return yn(jl(yn(yn(t,r),yn(n,i)),s),e)}function we(r,t,e,n,s,i,o){return fi(t&e|~t&n,r,t,s,i,o)}function be(r,t,e,n,s,i,o){return fi(t&n|e&~n,r,t,s,i,o)}function xe(r,t,e,n,s,i,o){return fi(t^e^n,r,t,s,i,o)}function ve(r,t,e,n,s,i,o){return fi(e^(t|~n),r,t,s,i,o)}var Gl=$a("v3",48,Kl);function Zl(r,t,e){r=r||{};var n=r.random||(r.rng||qa)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=n[s];return t}return li(n)}function Yl(r,t,e,n){switch(r){case 0:return t&e^~t&n;case 1:return t^e^n;case 2:return t&e^t&n^e&n;case 3:return t^e^n}}function Gi(r,t){return r<<t|r>>>32-t}function Xl(r){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var s=0;s<n.length;++s)r.push(n.charCodeAt(s))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var i=r.length/4+2,o=Math.ceil(i/16),c=new Array(o),d=0;d<o;++d){for(var b=new Uint32Array(16),v=0;v<16;++v)b[v]=r[d*64+v*4]<<24|r[d*64+v*4+1]<<16|r[d*64+v*4+2]<<8|r[d*64+v*4+3];c[d]=b}c[o-1][14]=(r.length-1)*8/Math.pow(2,32),c[o-1][14]=Math.floor(c[o-1][14]),c[o-1][15]=(r.length-1)*8&4294967295;for(var _=0;_<o;++_){for(var k=new Uint32Array(80),S=0;S<16;++S)k[S]=c[_][S];for(var I=16;I<80;++I)k[I]=Gi(k[I-3]^k[I-8]^k[I-14]^k[I-16],1);for(var T=e[0],R=e[1],C=e[2],D=e[3],F=e[4],W=0;W<80;++W){var Y=Math.floor(W/20),tt=Gi(T,5)+Yl(Y,R,C,D)+F+t[Y]+k[W]>>>0;F=D,D=C,C=Gi(R,30)>>>0,R=T,T=tt}e[0]=e[0]+T>>>0,e[1]=e[1]+R>>>0,e[2]=e[2]+C>>>0,e[3]=e[3]+D>>>0,e[4]=e[4]+F>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Jl=$a("v5",80,Xl);const Ql="00000000-0000-0000-0000-000000000000";function tf(r){if(!ui(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const ef=Object.freeze(Object.defineProperty({__proto__:null,NIL:Ql,parse:za,stringify:li,v1:Dl,v3:Gl,v4:Zl,v5:Jl,validate:ui,version:tf},Symbol.toStringTag,{value:"Module"})),Wa=xs(ef),nf=Wa.v4,rf=function(r,t,e,n){if(typeof r!="string")throw new TypeError(r+" must be a string");n=n||{};const s=typeof n.version=="number"?n.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const i={method:r};if(s===2&&(i.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");i.params=t}if(typeof e>"u"){const o=typeof n.generator=="function"?n.generator:function(){return nf()};i.id=o(i,n)}else s===2&&e===null?n.notificationIdNull&&(i.id=null):i.id=e;return i};var sf=rf;const of=Wa.v4,af=sf,hr=function(r,t){if(!(this instanceof hr))return new hr(r,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return of()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=r};var cf=hr;hr.prototype.request=function(r,t,e,n){const s=this;let i=null;const o=Array.isArray(r)&&typeof t=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&r&&typeof r=="object"&&typeof t=="function")n=t,i=r;else{typeof e=="function"&&(n=e,e=void 0);const b=typeof n=="function";try{i=af(r,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(v){if(b)return n(v);throw v}if(!b)return i}let d;try{d=JSON.stringify(i,this.options.replacer)}catch(b){return n(b)}return this.callServer(d,function(b,v){s._parseResponse(b,v,n)}),i};hr.prototype._parseResponse=function(r,t,e){if(r){e(r);return}if(!t)return e();let n;try{n=JSON.parse(t,this.options.reviver)}catch(s){return e(s)}if(e.length===3)if(Array.isArray(n)){const s=function(o){return typeof o.error<"u"},i=function(o){return!s(o)};return e(null,n.filter(s),n.filter(i))}else return e(null,n.error,n.result);e(null,n)};const uf=ri(cf);var Ha={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function s(d,b,v){this.fn=d,this.context=b,this.once=v||!1}function i(d,b,v,_,k){if(typeof v!="function")throw new TypeError("The listener must be a function");var S=new s(v,_||d,k),I=e?e+b:b;return d._events[I]?d._events[I].fn?d._events[I]=[d._events[I],S]:d._events[I].push(S):(d._events[I]=S,d._eventsCount++),d}function o(d,b){--d._eventsCount===0?d._events=new n:delete d._events[b]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var b=[],v,_;if(this._eventsCount===0)return b;for(_ in v=this._events)t.call(v,_)&&b.push(e?_.slice(1):_);return Object.getOwnPropertySymbols?b.concat(Object.getOwnPropertySymbols(v)):b},c.prototype.listeners=function(b){var v=e?e+b:b,_=this._events[v];if(!_)return[];if(_.fn)return[_.fn];for(var k=0,S=_.length,I=new Array(S);k<S;k++)I[k]=_[k].fn;return I},c.prototype.listenerCount=function(b){var v=e?e+b:b,_=this._events[v];return _?_.fn?1:_.length:0},c.prototype.emit=function(b,v,_,k,S,I){var T=e?e+b:b;if(!this._events[T])return!1;var R=this._events[T],C=arguments.length,D,F;if(R.fn){switch(R.once&&this.removeListener(b,R.fn,void 0,!0),C){case 1:return R.fn.call(R.context),!0;case 2:return R.fn.call(R.context,v),!0;case 3:return R.fn.call(R.context,v,_),!0;case 4:return R.fn.call(R.context,v,_,k),!0;case 5:return R.fn.call(R.context,v,_,k,S),!0;case 6:return R.fn.call(R.context,v,_,k,S,I),!0}for(F=1,D=new Array(C-1);F<C;F++)D[F-1]=arguments[F];R.fn.apply(R.context,D)}else{var W=R.length,Y;for(F=0;F<W;F++)switch(R[F].once&&this.removeListener(b,R[F].fn,void 0,!0),C){case 1:R[F].fn.call(R[F].context);break;case 2:R[F].fn.call(R[F].context,v);break;case 3:R[F].fn.call(R[F].context,v,_);break;case 4:R[F].fn.call(R[F].context,v,_,k);break;default:if(!D)for(Y=1,D=new Array(C-1);Y<C;Y++)D[Y-1]=arguments[Y];R[F].fn.apply(R[F].context,D)}}return!0},c.prototype.on=function(b,v,_){return i(this,b,v,_,!1)},c.prototype.once=function(b,v,_){return i(this,b,v,_,!0)},c.prototype.removeListener=function(b,v,_,k){var S=e?e+b:b;if(!this._events[S])return this;if(!v)return o(this,S),this;var I=this._events[S];if(I.fn)I.fn===v&&(!k||I.once)&&(!_||I.context===_)&&o(this,S);else{for(var T=0,R=[],C=I.length;T<C;T++)(I[T].fn!==v||k&&!I[T].once||_&&I[T].context!==_)&&R.push(I[T]);R.length?this._events[S]=R.length===1?R[0]:R:o(this,S)}return this},c.prototype.removeAllListeners=function(b){var v;return b?(v=e?e+b:b,this._events[v]&&o(this,v)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=e,c.EventEmitter=c,r.exports=c})(Ha);var lf=Ha.exports;const Va=ri(lf);var ff=class extends Va{constructor(t,e,n){super();ae(this,"socket");this.socket=new window.WebSocket(t,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=s=>this.emit("message",s.data),this.socket.onerror=s=>this.emit("error",s),this.socket.onclose=s=>{this.emit("close",s.code,s.reason)}}send(t,e,n){const s=n||e;try{this.socket.send(t),s()}catch(i){s(i)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,n){this.socket.addEventListener(t,e,n)}};function hf(r,t){return new ff(r,t)}var df=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},pf=class extends Va{constructor(t,e="ws://localhost:8080",{autoconnect:n=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...c}={},d,b){super();ae(this,"address");ae(this,"rpc_id");ae(this,"queue");ae(this,"options");ae(this,"autoconnect");ae(this,"ready");ae(this,"reconnect");ae(this,"reconnect_timer_id");ae(this,"reconnect_interval");ae(this,"max_reconnects");ae(this,"rest_options");ae(this,"current_reconnects");ae(this,"generate_request_id");ae(this,"socket");ae(this,"webSocketFactory");ae(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=n,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=c,this.current_reconnects=0,this.generate_request_id=d||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),b?this.dataPack=b:this.dataPack=new df,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,n,s){return!s&&typeof n=="object"&&(s=n,n=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const c=this.generate_request_id(t,e),d={jsonrpc:"2.0",method:t,params:e||void 0,id:c};this.socket.send(this.dataPack.encode(d),s,b=>{if(b)return o(b);this.queue[c]={promise:[i,o]},n&&(this.queue[c].timeout=setTimeout(()=>{delete this.queue[c],o(new Error("reply timeout"))},n))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((n,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(i),o=>{if(o)return s(o);n()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=nt.Buffer.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);const s=[n.notification];if(n.params.constructor===Object)s.push(n.params);else for(let i=0;i<n.params.length;i++)s.push(n.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n==null?void 0:n.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",n,s),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}};class ja extends zo{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Do(t);const n=Es(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?t.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Yn(i)}update(t){return Pr(this),this.iHash.update(t),this}digestInto(t){Pr(this),Mn(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:c}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=c,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ga=(r,t,e)=>new ja(r,t).update(e).digest();Ga.create=(r,t)=>new ja(r,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const So=(r,t)=>(r+(r>=0?t:-t)/Za)/t;function gf(r,t,e){const[[n,s],[i,o]]=t,c=So(o*r,e),d=So(-s*r,e);let b=r-c*n-d*i,v=-c*s-d*o;const _=b<un,k=v<un;_&&(b=-b),k&&(v=-v);const S=yr(Math.ceil(Go(e)/2))+jn;if(b<un||b>=S||v<un||v>=S)throw new Error("splitScalar (endomorphism): failed, k="+r);return{k1neg:_,k1:b,k2neg:k,k2:v}}function hs(r){if(!["compact","recovered","der"].includes(r))throw new Error('Signature format must be "compact", "recovered", or "der"');return r}function Zi(r,t){const e={};for(let n of Object.keys(t))e[n]=r[n]===void 0?t[n]:r[n];return kn(e.lowS,"lowS"),kn(e.prehash,"prehash"),e.format!==void 0&&hs(e.format),e}class mf extends Error{constructor(t=""){super(t)}}const sn={Err:mf,_tlv:{encode:(r,t)=>{const{Err:e}=sn;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const n=t.length/2,s=Ir(n);if(s.length/2&128)throw new e("tlv.encode: long form length too big");const i=n>127?Ir(s.length/2|128):"";return Ir(r)+i+s+t},decode(r,t){const{Err:e}=sn;let n=0;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[n++]!==r)throw new e("tlv.decode: wrong tlv");const s=t[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const d=s&127;if(!d)throw new e("tlv.decode(long): indefinite length not supported");if(d>4)throw new e("tlv.decode(long): byte length is too big");const b=t.subarray(n,n+d);if(b.length!==d)throw new e("tlv.decode: length bytes not complete");if(b[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const v of b)o=o<<8|v;if(n+=d,o<128)throw new e("tlv.decode(long): not minimal encoding")}const c=t.subarray(n,n+o);if(c.length!==o)throw new e("tlv.decode: wrong value length");return{v:c,l:t.subarray(n+o)}}},_int:{encode(r){const{Err:t}=sn;if(r<un)throw new t("integer: negative integers are not allowed");let e=Ir(r);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(r){const{Err:t}=sn;if(r[0]&128)throw new t("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return si(r)}},toSig(r){const{Err:t,_int:e,_tlv:n}=sn,s=$t("signature",r),{v:i,l:o}=n.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:c,l:d}=n.decode(2,i),{v:b,l:v}=n.decode(2,d);if(v.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(c),s:e.decode(b)}},hexFromSig(r){const{_tlv:t,_int:e}=sn,n=t.encode(2,e.encode(r.r)),s=t.encode(2,e.encode(r.s)),i=n+s;return t.encode(48,i)}},un=BigInt(0),jn=BigInt(1),Za=BigInt(2),Tr=BigInt(3),yf=BigInt(4);function Wn(r,t){const{BYTES:e}=r;let n;if(typeof t=="bigint")n=t;else{let s=$t("private key",t);try{n=r.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${e}, got ${typeof t}`)}}if(!r.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function wf(r,t={}){const e=la("weierstrass",r,t),{Fp:n,Fn:s}=e;let i=e.CURVE;const{h:o,n:c}=i;wr(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:d}=t;if(d&&(!n.is0(i.a)||typeof d.beta!="bigint"||!Array.isArray(d.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const b=Xa(n,s);function v(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function _(K,m,a){const{x:f,y:p}=m.toAffine(),w=n.toBytes(f);if(kn(a,"isCompressed"),a){v();const E=!n.isOdd(p);return Ge(Ya(E),w)}else return Ge(Uint8Array.of(4),w,n.toBytes(p))}function k(K){Ke(K,void 0,"Point");const{publicKey:m,publicKeyUncompressed:a}=b,f=K.length,p=K[0],w=K.subarray(1);if(f===m&&(p===2||p===3)){const E=n.fromBytes(w);if(!n.isValid(E))throw new Error("bad point: is not on curve, wrong x");const A=T(E);let M;try{M=n.sqrt(A)}catch(B){const G=B instanceof Error?": "+B.message:"";throw new Error("bad point: is not on curve, sqrt error"+G)}v();const y=n.isOdd(M);return(p&1)===1!==y&&(M=n.neg(M)),{x:E,y:M}}else if(f===a&&p===4){const E=n.BYTES,A=n.fromBytes(w.subarray(0,E)),M=n.fromBytes(w.subarray(E,E*2));if(!R(A,M))throw new Error("bad point: is not on curve");return{x:A,y:M}}else throw new Error(`bad point: got length ${f}, expected compressed=${m} or uncompressed=${a}`)}const S=t.toBytes||_,I=t.fromBytes||k;function T(K){const m=n.sqr(K),a=n.mul(m,K);return n.add(n.add(a,n.mul(K,i.a)),i.b)}function R(K,m){const a=n.sqr(m),f=T(K);return n.eql(a,f)}if(!R(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const C=n.mul(n.pow(i.a,Tr),yf),D=n.mul(n.sqr(i.b),BigInt(27));if(n.is0(n.add(C,D)))throw new Error("bad curve params: a or b");function F(K,m,a=!1){if(!n.isValid(m)||a&&n.is0(m))throw new Error(`bad point coordinate ${K}`);return m}function W(K){if(!(K instanceof q))throw new Error("ProjectivePoint expected")}function Y(K){if(!d||!d.basises)throw new Error("no endo");return gf(K,d.basises,s.ORDER)}const tt=qr((K,m)=>{const{X:a,Y:f,Z:p}=K;if(n.eql(p,n.ONE))return{x:a,y:f};const w=K.is0();m==null&&(m=w?n.ONE:n.inv(p));const E=n.mul(a,m),A=n.mul(f,m),M=n.mul(p,m);if(w)return{x:n.ZERO,y:n.ZERO};if(!n.eql(M,n.ONE))throw new Error("invZ was invalid");return{x:E,y:A}}),ot=qr(K=>{if(K.is0()){if(t.allowInfinityPoint&&!n.is0(K.Y))return;throw new Error("bad point: ZERO")}const{x:m,y:a}=K.toAffine();if(!n.isValid(m)||!n.isValid(a))throw new Error("bad point: x or y not field elements");if(!R(m,a))throw new Error("bad point: equation left != right");if(!K.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function at(K,m,a,f,p){return a=new q(n.mul(a.X,K),a.Y,a.Z),m=zr(f,m),a=zr(p,a),m.add(a)}class q{constructor(m,a,f){this.X=F("x",m),this.Y=F("y",a,!0),this.Z=F("z",f),Object.freeze(this)}static CURVE(){return i}static fromAffine(m){const{x:a,y:f}=m||{};if(!m||!n.isValid(a)||!n.isValid(f))throw new Error("invalid affine point");if(m instanceof q)throw new Error("projective point not allowed");return n.is0(a)&&n.is0(f)?q.ZERO:new q(a,f,n.ONE)}static fromBytes(m){const a=q.fromAffine(I(Ke(m,void 0,"point")));return a.assertValidity(),a}static fromHex(m){return q.fromBytes($t("pointHex",m))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(m=8,a=!0){return z.createCache(this,m),a||this.multiply(Tr),this}assertValidity(){ot(this)}hasEvenY(){const{y:m}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(m)}equals(m){W(m);const{X:a,Y:f,Z:p}=this,{X:w,Y:E,Z:A}=m,M=n.eql(n.mul(a,A),n.mul(w,p)),y=n.eql(n.mul(f,A),n.mul(E,p));return M&&y}negate(){return new q(this.X,n.neg(this.Y),this.Z)}double(){const{a:m,b:a}=i,f=n.mul(a,Tr),{X:p,Y:w,Z:E}=this;let A=n.ZERO,M=n.ZERO,y=n.ZERO,l=n.mul(p,p),B=n.mul(w,w),G=n.mul(E,E),V=n.mul(p,w);return V=n.add(V,V),y=n.mul(p,E),y=n.add(y,y),A=n.mul(m,y),M=n.mul(f,G),M=n.add(A,M),A=n.sub(B,M),M=n.add(B,M),M=n.mul(A,M),A=n.mul(V,A),y=n.mul(f,y),G=n.mul(m,G),V=n.sub(l,G),V=n.mul(m,V),V=n.add(V,y),y=n.add(l,l),l=n.add(y,l),l=n.add(l,G),l=n.mul(l,V),M=n.add(M,l),G=n.mul(w,E),G=n.add(G,G),l=n.mul(G,V),A=n.sub(A,l),y=n.mul(G,B),y=n.add(y,y),y=n.add(y,y),new q(A,M,y)}add(m){W(m);const{X:a,Y:f,Z:p}=this,{X:w,Y:E,Z:A}=m;let M=n.ZERO,y=n.ZERO,l=n.ZERO;const B=i.a,G=n.mul(i.b,Tr);let V=n.mul(a,w),J=n.mul(f,E),mt=n.mul(p,A),ft=n.add(a,f),ut=n.add(w,E);ft=n.mul(ft,ut),ut=n.add(V,J),ft=n.sub(ft,ut),ut=n.add(a,p);let Ot=n.add(w,A);return ut=n.mul(ut,Ot),Ot=n.add(V,mt),ut=n.sub(ut,Ot),Ot=n.add(f,p),M=n.add(E,A),Ot=n.mul(Ot,M),M=n.add(J,mt),Ot=n.sub(Ot,M),l=n.mul(B,ut),M=n.mul(G,mt),l=n.add(M,l),M=n.sub(J,l),l=n.add(J,l),y=n.mul(M,l),J=n.add(V,V),J=n.add(J,V),mt=n.mul(B,mt),ut=n.mul(G,ut),J=n.add(J,mt),mt=n.sub(V,mt),mt=n.mul(B,mt),ut=n.add(ut,mt),V=n.mul(J,ut),y=n.add(y,V),V=n.mul(Ot,ut),M=n.mul(ft,M),M=n.sub(M,V),V=n.mul(ft,J),l=n.mul(Ot,l),l=n.add(l,V),new q(M,y,l)}subtract(m){return this.add(m.negate())}is0(){return this.equals(q.ZERO)}multiply(m){const{endo:a}=t;if(!s.isValidNot0(m))throw new Error("invalid scalar: out of range");let f,p;const w=E=>z.cached(this,E,A=>Sn(q,A));if(a){const{k1neg:E,k1:A,k2neg:M,k2:y}=Y(m),{p:l,f:B}=w(A),{p:G,f:V}=w(y);p=B.add(V),f=at(a.beta,l,G,E,M)}else{const{p:E,f:A}=w(m);f=E,p=A}return Sn(q,[f,p])[0]}multiplyUnsafe(m){const{endo:a}=t,f=this;if(!s.isValid(m))throw new Error("invalid scalar: out of range");if(m===un||f.is0())return q.ZERO;if(m===jn)return f;if(z.hasCache(this))return this.multiply(m);if(a){const{k1neg:p,k1:w,k2neg:E,k2:A}=Y(m),{p1:M,p2:y}=gu(q,f,w,A);return at(a.beta,M,y,p,E)}else return z.unsafe(f,m)}multiplyAndAddUnsafe(m,a,f){const p=this.multiplyUnsafe(a).add(m.multiplyUnsafe(f));return p.is0()?void 0:p}toAffine(m){return tt(this,m)}isTorsionFree(){const{isTorsionFree:m}=t;return o===jn?!0:m?m(q,this):z.unsafe(this,c).is0()}clearCofactor(){const{clearCofactor:m}=t;return o===jn?this:m?m(q,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(m=!0){return kn(m,"isCompressed"),this.assertValidity(),S(q,this,m)}toHex(m=!0){return Bn(this.toBytes(m))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(m=!0){return this.toBytes(m)}_setWindowSize(m){this.precompute(m)}static normalizeZ(m){return Sn(q,m)}static msm(m,a){return ua(q,s,m,a)}static fromPrivateKey(m){return q.BASE.multiply(Wn(s,m))}}q.BASE=new q(i.Gx,i.Gy,n.ONE),q.ZERO=new q(n.ZERO,n.ONE,n.ZERO),q.Fp=n,q.Fn=s;const Q=s.BITS,z=new ca(q,t.endo?Math.ceil(Q/2):Q);return q.BASE.precompute(8),q}function Ya(r){return Uint8Array.of(r?2:3)}function Xa(r,t){return{secretKey:t.BYTES,publicKey:1+r.BYTES,publicKeyUncompressed:1+2*r.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function bf(r,t={}){const{Fn:e}=r,n=t.randomBytes||Ss,s=Object.assign(Xa(r.Fp,e),{seed:sa(e.ORDER)});function i(S){try{return!!Wn(e,S)}catch{return!1}}function o(S,I){const{publicKey:T,publicKeyUncompressed:R}=s;try{const C=S.length;return I===!0&&C!==T||I===!1&&C!==R?!1:!!r.fromBytes(S)}catch{return!1}}function c(S=n(s.seed)){return hu(Ke(S,s.seed,"seed"),e.ORDER)}function d(S,I=!0){return r.BASE.multiply(Wn(e,S)).toBytes(I)}function b(S){const I=c(S);return{secretKey:I,publicKey:d(I)}}function v(S){if(typeof S=="bigint")return!1;if(S instanceof r)return!0;const{secretKey:I,publicKey:T,publicKeyUncompressed:R}=s;if(e.allowedLengths||I===T)return;const C=$t("key",S).length;return C===T||C===R}function _(S,I,T=!0){if(v(S)===!0)throw new Error("first arg must be private key");if(v(I)===!1)throw new Error("second arg must be public key");const R=Wn(e,S);return r.fromHex(I).multiply(R).toBytes(T)}return Object.freeze({getPublicKey:d,getSharedSecret:_,keygen:b,Point:r,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:c,isValidPrivateKey:i,randomPrivateKey:c,normPrivateKeyToScalar:S=>Wn(e,S),precompute(S=8,I=r.BASE){return I.precompute(S,!1)}},lengths:s})}function xf(r,t,e={}){Do(t),wr(e,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=e.randomBytes||Ss,s=e.hmac||((a,...f)=>Ga(t,a,Ge(...f))),{Fp:i,Fn:o}=r,{ORDER:c,BITS:d}=o,{keygen:b,getPublicKey:v,getSharedSecret:_,utils:k,lengths:S}=bf(r,e),I={prehash:!1,lowS:typeof e.lowS=="boolean"?e.lowS:!1,format:void 0,extraEntropy:!1},T="compact";function R(a){const f=c>>jn;return a>f}function C(a,f){if(!o.isValidNot0(f))throw new Error(`invalid signature ${a}: out of range 1..Point.Fn.ORDER`);return f}function D(a,f){hs(f);const p=S.signature,w=f==="compact"?p:f==="recovered"?p+1:void 0;return Ke(a,w,`${f} signature`)}class F{constructor(f,p,w){this.r=C("r",f),this.s=C("s",p),w!=null&&(this.recovery=w),Object.freeze(this)}static fromBytes(f,p=T){D(f,p);let w;if(p==="der"){const{r:y,s:l}=sn.toSig(Ke(f));return new F(y,l)}p==="recovered"&&(w=f[0],p="compact",f=f.subarray(1));const E=o.BYTES,A=f.subarray(0,E),M=f.subarray(E,E*2);return new F(o.fromBytes(A),o.fromBytes(M),w)}static fromHex(f,p){return this.fromBytes(Dr(f),p)}addRecoveryBit(f){return new F(this.r,this.s,f)}recoverPublicKey(f){const p=i.ORDER,{r:w,s:E,recovery:A}=this;if(A==null||![0,1,2,3].includes(A))throw new Error("recovery id invalid");if(c*Za<p&&A>1)throw new Error("recovery id is ambiguous for h>1 curve");const y=A===2||A===3?w+c:w;if(!i.isValid(y))throw new Error("recovery id 2 or 3 invalid");const l=i.toBytes(y),B=r.fromBytes(Ge(Ya((A&1)===0),l)),G=o.inv(y),V=Y($t("msgHash",f)),J=o.create(-V*G),mt=o.create(E*G),ft=r.BASE.multiplyUnsafe(J).add(B.multiplyUnsafe(mt));if(ft.is0())throw new Error("point at infinify");return ft.assertValidity(),ft}hasHighS(){return R(this.s)}toBytes(f=T){if(hs(f),f==="der")return Dr(sn.hexFromSig(this));const p=o.toBytes(this.r),w=o.toBytes(this.s);if(f==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Ge(Uint8Array.of(this.recovery),p,w)}return Ge(p,w)}toHex(f){return Bn(this.toBytes(f))}assertValidity(){}static fromCompact(f){return F.fromBytes($t("sig",f),"compact")}static fromDER(f){return F.fromBytes($t("sig",f),"der")}normalizeS(){return this.hasHighS()?new F(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Bn(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Bn(this.toBytes("compact"))}}const W=e.bits2int||function(f){if(f.length>8192)throw new Error("input is too large");const p=si(f),w=f.length*8-d;return w>0?p>>BigInt(w):p},Y=e.bits2int_modN||function(f){return o.create(W(f))},tt=yr(d);function ot(a){return us("num < 2^"+d,a,un,tt),o.toBytes(a)}function at(a,f){return Ke(a,void 0,"message"),f?Ke(t(a),void 0,"prehashed message"):a}function q(a,f,p){if(["recovered","canonical"].some(J=>J in p))throw new Error("sign() legacy options not supported");const{lowS:w,prehash:E,extraEntropy:A}=Zi(p,I);a=at(a,E);const M=Y(a),y=Wn(o,f),l=[ot(y),ot(M)];if(A!=null&&A!==!1){const J=A===!0?n(S.secretKey):A;l.push($t("extraEntropy",J))}const B=Ge(...l),G=M;function V(J){const mt=W(J);if(!o.isValidNot0(mt))return;const ft=o.inv(mt),ut=r.BASE.multiply(mt).toAffine(),Ot=o.create(ut.x);if(Ot===un)return;const Et=o.create(ft*o.create(G+Ot*y));if(Et===un)return;let St=(ut.x===Ot?0:2)|Number(ut.y&jn),Ce=Et;return w&&R(Et)&&(Ce=o.neg(Et),St^=1),new F(Ot,Ce,St)}return{seed:B,k2sig:V}}function Q(a,f,p={}){a=$t("message",a);const{seed:w,k2sig:E}=q(a,f,p);return nu(t.outputLen,o.BYTES,s)(w,E)}function z(a){let f;const p=typeof a=="string"||mr(a),w=!p&&a!==null&&typeof a=="object"&&typeof a.r=="bigint"&&typeof a.s=="bigint";if(!p&&!w)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(w)f=new F(a.r,a.s);else if(p){try{f=F.fromBytes($t("sig",a),"der")}catch(E){if(!(E instanceof sn.Err))throw E}if(!f)try{f=F.fromBytes($t("sig",a),"compact")}catch{return!1}}return f||!1}function K(a,f,p,w={}){const{lowS:E,prehash:A,format:M}=Zi(w,I);if(p=$t("publicKey",p),f=at($t("message",f),A),"strict"in w)throw new Error("options.strict was renamed to lowS");const y=M===void 0?z(a):F.fromBytes($t("sig",a),M);if(y===!1)return!1;try{const l=r.fromBytes(p);if(E&&y.hasHighS())return!1;const{r:B,s:G}=y,V=Y(f),J=o.inv(G),mt=o.create(V*J),ft=o.create(B*J),ut=r.BASE.multiplyUnsafe(mt).add(l.multiplyUnsafe(ft));return ut.is0()?!1:o.create(ut.x)===B}catch{return!1}}function m(a,f,p={}){const{prehash:w}=Zi(p,I);return f=at(f,w),F.fromBytes(a,"recovered").recoverPublicKey(f).toBytes()}return Object.freeze({keygen:b,getPublicKey:v,getSharedSecret:_,utils:k,lengths:S,Point:r,sign:Q,verify:K,recoverPublicKey:m,Signature:F,hash:t})}function vf(r){const t={a:r.a,b:r.b,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},e=r.Fp;let n=r.allowedPrivateKeyLengths?Array.from(new Set(r.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=Rn(t.n,{BITS:r.nBitLength,allowedLengths:n,modFromBytes:r.wrapPrivateKey}),i={Fp:e,Fn:s,allowInfinityPoint:r.allowInfinityPoint,endo:r.endo,isTorsionFree:r.isTorsionFree,clearCofactor:r.clearCofactor,fromBytes:r.fromBytes,toBytes:r.toBytes};return{CURVE:t,curveOpts:i}}function Ef(r){const{CURVE:t,curveOpts:e}=vf(r),n={hmac:r.hmac,randomBytes:r.randomBytes,lowS:r.lowS,bits2int:r.bits2int,bits2int_modN:r.bits2int_modN};return{CURVE:t,curveOpts:e,hash:r.hash,ecdsaOpts:n}}function Sf(r,t){const e=t.Point;return Object.assign({},t,{ProjectivePoint:e,CURVE:Object.assign({},r,ra(e.Fn.ORDER,e.Fn.BITS))})}function Bf(r){const{CURVE:t,curveOpts:e,hash:n,ecdsaOpts:s}=Ef(r),i=wf(t,e),o=xf(i,n,s);return Sf(r,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function _f(r,t){const e=n=>Bf({...r,hash:n});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zs={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},kf={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},Bo=BigInt(2);function Af(r){const t=zs.p,e=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),c=BigInt(44),d=BigInt(88),b=r*r*r%t,v=b*b*r%t,_=zt(v,e,t)*v%t,k=zt(_,e,t)*v%t,S=zt(k,Bo,t)*b%t,I=zt(S,s,t)*S%t,T=zt(I,i,t)*I%t,R=zt(T,c,t)*T%t,C=zt(R,d,t)*R%t,D=zt(C,c,t)*T%t,F=zt(D,e,t)*v%t,W=zt(F,o,t)*I%t,Y=zt(W,n,t)*b%t,tt=zt(Y,Bo,t);if(!ds.eql(ds.sqr(tt),r))throw new Error("Cannot find square root");return tt}const ds=Rn(zs.p,{sqrt:Af}),If=_f({...zs,Fp:ds,lowS:!0,endo:kf},Ho);br.utils.randomPrivateKey;br.getPublicKey;function _o(r){try{return br.ExtendedPoint.fromHex(r),!0}catch{return!1}}const Ja=(r,t)=>br.sign(r,t.slice(0,32)),Mf=br.verify,le=r=>nt.Buffer.isBuffer(r)?r:r instanceof Uint8Array?nt.Buffer.from(r.buffer,r.byteOffset,r.byteLength):nt.Buffer.from(r);class Rf{constructor(t){Object.assign(this,t)}encode(){return nt.Buffer.from(rl(Ur,this))}static decode(t){return il(Ur,this,t)}static decodeUnchecked(t){return sl(Ur,this,t)}}const Ur=new Map;var Qa;const Tf=32,wn=32;function Lf(r){return r._bn!==void 0}let ko=1;class ct extends Rf{constructor(t){if(super({}),this._bn=void 0,Lf(t))this._bn=t._bn;else{if(typeof t=="string"){const e=ge.decode(t);if(e.length!=wn)throw new Error("Invalid public key input");this._bn=new bo(e)}else this._bn=new bo(t);if(this._bn.byteLength()>wn)throw new Error("Invalid public key input")}}static unique(){const t=new ct(ko);return ko+=1,new ct(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return ge.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(nt.Buffer);if(t.length===wn)return t;const e=nt.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,n){const s=nt.Buffer.concat([t.toBuffer(),nt.Buffer.from(e),n.toBuffer()]),i=xo(s);return new ct(i)}static createProgramAddressSync(t,e){let n=nt.Buffer.alloc(0);t.forEach(function(i){if(i.length>Tf)throw new TypeError("Max seed length exceeded");n=nt.Buffer.concat([n,le(i)])}),n=nt.Buffer.concat([n,e.toBuffer(),nt.Buffer.from("ProgramDerivedAddress")]);const s=xo(n);if(_o(s))throw new Error("Invalid seeds, address must fall off the curve");return new ct(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let n=255,s;for(;n!=0;){try{const i=t.concat(nt.Buffer.from([n]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new ct(t);return _o(e.toBytes())}}Qa=ct;ct.default=new Qa("11111111111111111111111111111111");Ur.set(ct,{kind:"struct",fields:[["_bn","u256"]]});new ct("BPFLoader1111111111111111111111111111111111");const Gn=1232,$s=127,Gr=64;class tc extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(tc.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class ec extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(ec.prototype,"name",{value:"TransactionExpiredTimeoutError"});class cr extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(cr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Zr{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((i,o)=>{n.set(i.toBase58(),o)});const s=i=>{const o=n.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const yt=(r="publicKey")=>Rt(32,r),Cf=(r="signature")=>Rt(64,r),Hn=(r="string")=>{const t=et([st("length"),st("lengthPadding"),Rt(_n(st(),-8),"chars")],r),e=t.decode.bind(t),n=t.encode.bind(t),s=t;return s.decode=(i,o)=>e(i,o).chars.toString(),s.encode=(i,o,c)=>{const d={chars:nt.Buffer.from(i,"utf8")};return n(d,o,c)},s.alloc=i=>st().span+st().span+nt.Buffer.from(i,"utf8").length,s},Uf=(r="authorized")=>et([yt("staker"),yt("withdrawer")],r),Nf=(r="lockup")=>et([Ie("unixTimestamp"),Ie("epoch"),yt("custodian")],r),Of=(r="voteInit")=>et([yt("nodePubkey"),yt("authorizedVoter"),yt("authorizedWithdrawer"),bt("commission")],r),Ff=(r="voteAuthorizeWithSeedArgs")=>et([st("voteAuthorizationType"),yt("currentAuthorityDerivedKeyOwnerPubkey"),Hn("currentAuthorityDerivedKeySeed"),yt("newAuthorized")],r);function nc(r,t){const e=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(t[s.property]);if("count"in s&&"elementLayout"in s){const i=t[s.property];if(Array.isArray(i))return i.length*e(s.elementLayout)}else if("fields"in s)return nc({layout:s},t[s.property]);return 0};let n=0;return r.layout.fields.forEach(s=>{n+=e(s)}),n}function Me(r){let t=0,e=0;for(;;){let n=r.shift();if(t|=(n&127)<<e*7,e+=1,!(n&128))break}return t}function Re(r,t){let e=t;for(;;){let n=e&127;if(e>>=7,e==0){r.push(n);break}else n|=128,r.push(n)}}function kt(r,t){if(!r)throw new Error(t||"Assertion failed")}class hi{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const n=new Map,s=o=>{const c=o.toBase58();let d=n.get(c);return d===void 0&&(d={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(c,d)),d},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const o of t){s(o.programId).isInvoked=!0;for(const c of o.keys){const d=s(c.pubkey);d.isSigner||(d.isSigner=c.isSigner),d.isWritable||(d.isWritable=c.isWritable)}}return new hi(e,n)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];kt(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,d])=>d.isSigner&&d.isWritable),n=t.filter(([,d])=>d.isSigner&&!d.isWritable),s=t.filter(([,d])=>!d.isSigner&&d.isWritable),i=t.filter(([,d])=>!d.isSigner&&!d.isWritable),o={numRequiredSignatures:e.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{kt(e.length>0,"Expected at least one writable signer key");const[d]=e[0];kt(d===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const c=[...e.map(([d])=>new ct(d)),...n.map(([d])=>new ct(d)),...s.map(([d])=>new ct(d)),...i.map(([d])=>new ct(d))];return[o,c]}extractTableLookup(t){const[e,n]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(t,e){const n=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(e(o)){const c=new ct(i),d=t.findIndex(b=>b.equals(c));d>=0&&(kt(d<256,"Max lookup table index exceeded"),n.push(d),s.push(c),this.keyMetaMap.delete(i))}return[n,s]}}const rc="Reached end of buffer unexpectedly";function an(r){if(r.length===0)throw new Error(rc);return r.shift()}function Te(r,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>r.length:e>=r.length)throw new Error(rc);return r.splice(...t)}class Xe{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new ct(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:ge.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Zr(this.staticAccountKeys)}static compile(t){const e=hi.compile(t.instructions,t.payerKey),[n,s]=e.getMessageComponents(),o=new Zr(s).compileInstructions(t.instructions).map(c=>({programIdIndex:c.programIdIndex,accounts:c.accountKeyIndexes,data:ge.encode(c.data)}));return new Xe({header:n,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const n=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return n<i}else{const n=e-this.header.numReadonlySignedAccounts;return t<n}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Re(e,t);const n=this.instructions.map(_=>{const{accounts:k,programIdIndex:S}=_,I=Array.from(ge.decode(_.data));let T=[];Re(T,k.length);let R=[];return Re(R,I.length),{programIdIndex:S,keyIndicesCount:nt.Buffer.from(T),keyIndices:k,dataLength:nt.Buffer.from(R),data:I}});let s=[];Re(s,n.length);let i=nt.Buffer.alloc(Gn);nt.Buffer.from(s).copy(i);let o=s.length;n.forEach(_=>{const S=et([bt("programIdIndex"),Rt(_.keyIndicesCount.length,"keyIndicesCount"),Ee(bt("keyIndex"),_.keyIndices.length,"keyIndices"),Rt(_.dataLength.length,"dataLength"),Ee(bt("userdatum"),_.data.length,"data")]).encode(_,i,o);o+=S}),i=i.slice(0,o);const c=et([Rt(1,"numRequiredSignatures"),Rt(1,"numReadonlySignedAccounts"),Rt(1,"numReadonlyUnsignedAccounts"),Rt(e.length,"keyCount"),Ee(yt("key"),t,"keys"),yt("recentBlockhash")]),d={numRequiredSignatures:nt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:nt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:nt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:nt.Buffer.from(e),keys:this.accountKeys.map(_=>le(_.toBytes())),recentBlockhash:ge.decode(this.recentBlockhash)};let b=nt.Buffer.alloc(2048);const v=c.encode(d,b);return i.copy(b,v),b.slice(0,v+i.length)}static from(t){let e=[...t];const n=an(e);if(n!==(n&$s))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=an(e),i=an(e),o=Me(e);let c=[];for(let k=0;k<o;k++){const S=Te(e,0,wn);c.push(new ct(nt.Buffer.from(S)))}const d=Te(e,0,wn),b=Me(e);let v=[];for(let k=0;k<b;k++){const S=an(e),I=Me(e),T=Te(e,0,I),R=Me(e),C=Te(e,0,R),D=ge.encode(nt.Buffer.from(C));v.push({programIdIndex:S,accounts:T,data:D})}const _={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:ge.encode(nt.Buffer.from(d)),accountKeys:c,instructions:v};return new Xe(_)}}class Qn{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Zr(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(t>=n){const s=t-n,i=this.addressTableLookups.reduce((o,c)=>o+c.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,o=n-e-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const n of this.addressTableLookups){const s=t.find(i=>i.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const i of n.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(const i of n.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return e}static compile(t){const e=hi.compile(t.instructions,t.payerKey),n=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const v of i){const _=e.extractTableLookup(v);if(_!==void 0){const[k,{writable:S,readonly:I}]=_;n.push(k),s.writable.push(...S),s.readonly.push(...I)}}const[o,c]=e.getMessageComponents(),b=new Zr(c,s).compileInstructions(t.instructions);return new Qn({header:o,staticAccountKeys:c,recentBlockhash:t.recentBlockhash,compiledInstructions:b,addressTableLookups:n})}serialize(){const t=Array();Re(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),n=Array();Re(n,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Re(i,this.addressTableLookups.length);const o=et([bt("prefix"),et([bt("numRequiredSignatures"),bt("numReadonlySignedAccounts"),bt("numReadonlyUnsignedAccounts")],"header"),Rt(t.length,"staticAccountKeysLength"),Ee(yt(),this.staticAccountKeys.length,"staticAccountKeys"),yt("recentBlockhash"),Rt(n.length,"instructionsLength"),Rt(e.length,"serializedInstructions"),Rt(i.length,"addressTableLookupsLength"),Rt(s.length,"serializedAddressTableLookups")]),c=new Uint8Array(Gn),b=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(v=>v.toBytes()),recentBlockhash:ge.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},c);return c.slice(0,b)}serializeInstructions(){let t=0;const e=new Uint8Array(Gn);for(const n of this.compiledInstructions){const s=Array();Re(s,n.accountKeyIndexes.length);const i=Array();Re(i,n.data.length);const o=et([bt("programIdIndex"),Rt(s.length,"encodedAccountKeyIndexesLength"),Ee(bt(),n.accountKeyIndexes.length,"accountKeyIndexes"),Rt(i.length,"encodedDataLength"),Rt(n.data.length,"data")]);t+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(Gn);for(const n of this.addressTableLookups){const s=Array();Re(s,n.writableIndexes.length);const i=Array();Re(i,n.readonlyIndexes.length);const o=et([yt("accountKey"),Rt(s.length,"encodedWritableIndexesLength"),Ee(bt(),n.writableIndexes.length,"writableIndexes"),Rt(i.length,"encodedReadonlyIndexesLength"),Ee(bt(),n.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const n=an(e),s=n&$s;kt(n!==s,"Expected versioned message but received legacy message");const i=s;kt(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:an(e),numReadonlySignedAccounts:an(e),numReadonlyUnsignedAccounts:an(e)},c=[],d=Me(e);for(let I=0;I<d;I++)c.push(new ct(Te(e,0,wn)));const b=ge.encode(Te(e,0,wn)),v=Me(e),_=[];for(let I=0;I<v;I++){const T=an(e),R=Me(e),C=Te(e,0,R),D=Me(e),F=new Uint8Array(Te(e,0,D));_.push({programIdIndex:T,accountKeyIndexes:C,data:F})}const k=Me(e),S=[];for(let I=0;I<k;I++){const T=new ct(Te(e,0,wn)),R=Me(e),C=Te(e,0,R),D=Me(e),F=Te(e,0,D);S.push({accountKey:T,writableIndexes:C,readonlyIndexes:F})}return new Qn({header:o,staticAccountKeys:c,recentBlockhash:b,compiledInstructions:_,addressTableLookups:S})}}const ic={deserializeMessageVersion(r){const t=r[0],e=t&$s;return e===t?"legacy":e},deserialize:r=>{const t=ic.deserializeMessageVersion(r);if(t==="legacy")return Xe.from(r);if(t===0)return Qn.deserialize(r);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let gn=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const Pf=nt.Buffer.alloc(Gr).fill(0);class Fe{constructor(t){this.keys=void 0,this.programId=void 0,this.data=nt.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:n})=>({pubkey:t.toJSON(),isSigner:e,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class cn{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:n}=t;this.minNonceContextSlot=e,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:n}=t;this.recentBlockhash=e,this.lastValidBlockHeight=n}else{const{recentBlockhash:e,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Fe(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let T=0;T<e.length;T++)if(e[T].programId===void 0)throw new Error(`Transaction instruction index ${T} has undefined program id`);const s=[],i=[];e.forEach(T=>{T.keys.forEach(C=>{i.push({...C})});const R=T.programId.toString();s.includes(R)||s.push(R)}),s.forEach(T=>{i.push({pubkey:new ct(T),isSigner:!1,isWritable:!1})});const o=[];i.forEach(T=>{const R=T.pubkey.toString(),C=o.findIndex(D=>D.pubkey.toString()===R);C>-1?(o[C].isWritable=o[C].isWritable||T.isWritable,o[C].isSigner=o[C].isSigner||T.isSigner):o.push(T)}),o.sort(function(T,R){if(T.isSigner!==R.isSigner)return T.isSigner?-1:1;if(T.isWritable!==R.isWritable)return T.isWritable?-1:1;const C={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return T.pubkey.toBase58().localeCompare(R.pubkey.toBase58(),"en",C)});const c=o.findIndex(T=>T.pubkey.equals(n));if(c>-1){const[T]=o.splice(c,1);T.isSigner=!0,T.isWritable=!0,o.unshift(T)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const T of this.signatures){const R=o.findIndex(C=>C.pubkey.equals(T.publicKey));if(R>-1)o[R].isSigner||(o[R].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${T.publicKey.toString()}`)}let d=0,b=0,v=0;const _=[],k=[];o.forEach(({pubkey:T,isSigner:R,isWritable:C})=>{R?(_.push(T.toString()),d+=1,C||(b+=1)):(k.push(T.toString()),C||(v+=1))});const S=_.concat(k),I=e.map(T=>{const{data:R,programId:C}=T;return{programIdIndex:S.indexOf(C.toString()),accounts:T.keys.map(D=>S.indexOf(D.pubkey.toString())),data:ge.encode(R)}});return I.forEach(T=>{kt(T.programIdIndex>=0),T.accounts.forEach(R=>kt(R>=0))}),new Xe({header:{numRequiredSignatures:d,numReadonlySignedAccounts:b,numReadonlyUnsignedAccounts:v},accountKeys:S,recentBlockhash:t,instructions:I})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(n=>({signature:null,publicKey:n}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(n=>{const s=n.toString();return e.has(s)?!1:(e.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...n)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),n.push(i))}const s=this._compile();this._partialSign(s,...n)}_partialSign(t,...e){const n=t.serialize();e.forEach(s=>{const i=Ja(n,s.secretKey);this._addSignature(s.publicKey,le(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){kt(e.length===64);const n=this.signatures.findIndex(s=>t.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=nt.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const n={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(n.missing||(n.missing=[])).push(i):Mf(s,t,i.toBytes())||(n.invalid||(n.invalid=[])).push(i);return n.invalid||n.missing?n:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(n){const i=this._getMessageSignednessErrors(s,e);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(c=>c.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(c=>c.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,n=[];Re(n,e.length);const s=n.length+e.length*64+t.length,i=nt.Buffer.alloc(s);return kt(e.length<256),nt.Buffer.from(n).copy(i,0),e.forEach(({signature:o},c)=>{o!==null&&(kt(o.length===64,"signature has invalid length"),nt.Buffer.from(o).copy(i,n.length+c*64))}),t.copy(i,n.length+e.length*64),kt(i.length<=Gn,`Transaction too large: ${i.length} > ${Gn}`),i}get keys(){return kt(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return kt(this.instructions.length===1),this.instructions[0].programId}get data(){return kt(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const n=Me(e);let s=[];for(let i=0;i<n;i++){const o=Te(e,0,Gr);s.push(ge.encode(nt.Buffer.from(o)))}return cn.populate(Xe.from(e),s)}static populate(t,e=[]){const n=new cn;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const o={signature:s==ge.encode(Pf)?null:ge.decode(s),publicKey:t.accountKeys[i]};n.signatures.push(o)}),t.instructions.forEach(s=>{const i=s.accounts.map(o=>{const c=t.accountKeys[o];return{pubkey:c,isSigner:n.signatures.some(d=>d.publicKey.toString()===c.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});n.instructions.push(new Fe({keys:i,programId:t.accountKeys[s.programIdIndex],data:ge.decode(s.data)}))}),n._message=t,n._json=n.toJSON(),n}}class Ks{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:n,compiledInstructions:s,recentBlockhash:i}=t,{numRequiredSignatures:o,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:d}=n,b=o-c;kt(b>0,"Message header is invalid");const v=t.staticAccountKeys.length-o-d;kt(v>=0,"Message header is invalid");const _=t.getAccountKeys(e),k=_.get(0);if(k===void 0)throw new Error("Failed to decompile message because no account keys were found");const S=[];for(const I of s){const T=[];for(const C of I.accountKeyIndexes){const D=_.get(C);if(D===void 0)throw new Error(`Failed to find key for account key index ${C}`);const F=C<o;let W;F?W=C<b:C<_.staticAccountKeys.length?W=C-o<v:W=C-_.staticAccountKeys.length<_.accountKeysFromLookups.writable.length,T.push({pubkey:D,isSigner:C<n.numRequiredSignatures,isWritable:W})}const R=_.get(I.programIdIndex);if(R===void 0)throw new Error(`Failed to find program id for program id index ${I.programIdIndex}`);S.push(new Fe({programId:R,data:le(I.data),keys:T}))}return new Ks({payerKey:k,instructions:S,recentBlockhash:i})}compileToLegacyMessage(){return Xe.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return Qn.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class Ws{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)kt(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const n=[];for(let s=0;s<t.header.numRequiredSignatures;s++)n.push(new Uint8Array(Gr));this.signatures=n}this.message=t}serialize(){const t=this.message.serialize(),e=Array();Re(e,this.signatures.length);const n=et([Rt(e.length,"encodedSignaturesLength"),Ee(Cf(),this.signatures.length,"signatures"),Rt(t.length,"serializedMessage")]),s=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},s);return s.slice(0,i)}static deserialize(t){let e=[...t];const n=[],s=Me(e);for(let o=0;o<s;o++)n.push(new Uint8Array(Te(e,0,Gr)));const i=ic.deserialize(new Uint8Array(e));return new Ws(i,n)}sign(t){const e=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of t){const i=n.findIndex(o=>o.equals(s.publicKey));kt(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=Ja(e,s.secretKey)}}addSignature(t,e){kt(e.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));kt(s>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=e}}const Df=160,qf=64,zf=Df/qf,$f=1e3/zf;new ct("SysvarC1ock11111111111111111111111111111111");new ct("SysvarEpochSchedu1e111111111111111111111111");new ct("Sysvar1nstructions1111111111111111111111111");const Yi=new ct("SysvarRecentB1ockHashes11111111111111111111"),Ao=new ct("SysvarRent111111111111111111111111111111111");new ct("SysvarRewards111111111111111111111111111111");new ct("SysvarS1otHashes111111111111111111111111111");new ct("SysvarS1otHistory11111111111111111111111111");new ct("SysvarStakeHistory1111111111111111111111111");class Io extends Error{constructor({action:t,signature:e,transactionMessage:n,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let c;switch(t){case"send":c=`Transaction ${e} resulted in an error. 
${n}. `+i+o;break;case"simulate":c=`Simulation failed. 
Message: ${n}. 
`+i+o;break;default:c=`Unknown action '${(d=>d)(t)}'`}super(c),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=n,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,n)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,e(i)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}class rt extends Error{constructor({code:t,message:e,data:n},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=n,this.name="SolanaJSONRPCError"}}function Kn(r){return new Promise(t=>setTimeout(t,r))}function Ue(r,t){const e=r.layout.span>=0?r.layout.span:nc(r,t),n=nt.Buffer.alloc(e),s=Object.assign({instruction:r.index},t);return r.layout.encode(s,n),n}const Kf=pe("lamportsPerSignature"),sc=et([st("version"),st("state"),yt("authorizedPubkey"),yt("nonce"),et([Kf],"feeCalculator")]),Mo=sc.span;class Hs{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=sc.decode(le(t),0);return new Hs({authorizedPubkey:new ct(e.authorizedPubkey),nonce:new ct(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function tr(r){const t=Rt(8,r),e=t.decode.bind(t),n=t.encode.bind(t),s=t,i=Il();return s.decode=(o,c)=>{const d=e(o,c);return i.decode(d)},s.encode=(o,c,d)=>{const b=i.encode(o);return n(b,c,d)},s}const Ne=Object.freeze({Create:{index:0,layout:et([st("instruction"),Ie("lamports"),Ie("space"),yt("programId")])},Assign:{index:1,layout:et([st("instruction"),yt("programId")])},Transfer:{index:2,layout:et([st("instruction"),tr("lamports")])},CreateWithSeed:{index:3,layout:et([st("instruction"),yt("base"),Hn("seed"),Ie("lamports"),Ie("space"),yt("programId")])},AdvanceNonceAccount:{index:4,layout:et([st("instruction")])},WithdrawNonceAccount:{index:5,layout:et([st("instruction"),Ie("lamports")])},InitializeNonceAccount:{index:6,layout:et([st("instruction"),yt("authorized")])},AuthorizeNonceAccount:{index:7,layout:et([st("instruction"),yt("authorized")])},Allocate:{index:8,layout:et([st("instruction"),Ie("space")])},AllocateWithSeed:{index:9,layout:et([st("instruction"),yt("base"),Hn("seed"),Ie("space"),yt("programId")])},AssignWithSeed:{index:10,layout:et([st("instruction"),yt("base"),Hn("seed"),yt("programId")])},TransferWithSeed:{index:11,layout:et([st("instruction"),tr("lamports"),Hn("seed"),yt("programId")])},UpgradeNonceAccount:{index:12,layout:et([st("instruction")])}});class dr{constructor(){}static createAccount(t){const e=Ne.Create,n=Ue(e,{lamports:t.lamports,space:t.space,programId:le(t.programId.toBuffer())});return new Fe({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(t){let e,n;if("basePubkey"in t){const s=Ne.TransferWithSeed;e=Ue(s,{lamports:BigInt(t.lamports),seed:t.seed,programId:le(t.programId.toBuffer())}),n=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=Ne.Transfer;e=Ue(s,{lamports:BigInt(t.lamports)}),n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new Fe({keys:n,programId:this.programId,data:e})}static assign(t){let e,n;if("basePubkey"in t){const s=Ne.AssignWithSeed;e=Ue(s,{base:le(t.basePubkey.toBuffer()),seed:t.seed,programId:le(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Ne.Assign;e=Ue(s,{programId:le(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Fe({keys:n,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Ne.CreateWithSeed,n=Ue(e,{base:le(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:le(t.programId.toBuffer())});let s=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||s.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new Fe({keys:s,programId:this.programId,data:n})}static createNonceAccount(t){const e=new cn;"basePubkey"in t&&"seed"in t?e.add(dr.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Mo,programId:this.programId})):e.add(dr.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Mo,programId:this.programId}));const n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(n)),e}static nonceInitialize(t){const e=Ne.InitializeNonceAccount,n=Ue(e,{authorized:le(t.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Yi,isSigner:!1,isWritable:!1},{pubkey:Ao,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new Fe(s)}static nonceAdvance(t){const e=Ne.AdvanceNonceAccount,n=Ue(e),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Yi,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new Fe(s)}static nonceWithdraw(t){const e=Ne.WithdrawNonceAccount,n=Ue(e,{lamports:t.lamports});return new Fe({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Yi,isSigner:!1,isWritable:!1},{pubkey:Ao,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(t){const e=Ne.AuthorizeNonceAccount,n=Ue(e,{authorized:le(t.newAuthorizedPubkey.toBuffer())});return new Fe({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(t){let e,n;if("basePubkey"in t){const s=Ne.AllocateWithSeed;e=Ue(s,{base:le(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:le(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Ne.Allocate;e=Ue(s,{space:t.space}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Fe({keys:n,programId:this.programId,data:e})}}dr.programId=new ct("11111111111111111111111111111111");new ct("BPFLoader2111111111111111111111111111111111");function Wf(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Xi,Ro;function Hf(){if(Ro)return Xi;Ro=1;var r=Object.prototype.toString,t=Object.keys||function(n){var s=[];for(var i in n)s.push(i);return s};function e(n,s){var i,o,c,d,b,v,_;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return e(n.toJSON(),s);if(_=r.call(n),_==="[object Array]"){for(c="[",o=n.length-1,i=0;i<o;i++)c+=e(n[i],!0)+",";return o>-1&&(c+=e(n[i],!0)),c+"]"}else if(_==="[object Object]"){for(d=t(n).sort(),o=d.length,c="",i=0;i<o;)b=d[i],v=e(n[b],!1),v!==void 0&&(c&&(c+=","),c+=JSON.stringify(b)+":"+v),i++;return"{"+c+"}"}else return JSON.stringify(n);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return Xi=function(n){var s=e(n,!1);if(s!==void 0)return""+s},Xi}var Vf=Hf(),To=Wf(Vf);const sr=32;function Ji(r){let t=0;for(;r>1;)r/=2,t++;return t}function jf(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class Gf{constructor(t,e,n,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=n,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Ji(jf(t+sr+1))-Ji(sr)-1,n=this.getSlotsInEpoch(e),s=t-(n-sr);return[e,s]}else{const e=t-this.firstNormalSlot,n=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+n,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*sr:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Ji(sr)):this.slotsPerEpoch}}var Zf=globalThis.fetch;class Yf extends pf{constructor(t,e,n){const s=i=>{const o=hf(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,t,e,n),this.underlyingSocket=void 0}call(...t){var n;const e=(n=this.underlyingSocket)==null?void 0:n.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var n;const e=(n=this.underlyingSocket)==null?void 0:n.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function Xf(r,t){let e;try{e=r.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(e.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${r.index}`);return e}const Lo=56;class Co{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=Xf(Jf,t),n=t.length-Lo;kt(n>=0,"lookup table is invalid"),kt(n%32===0,"lookup table is invalid");const s=n/32,{addresses:i}=et([Ee(yt(),s,"addresses")]).decode(t.slice(Lo));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new ct(e.authority[0]):void 0,addresses:i.map(o=>new ct(o))}}}const Jf={index:1,layout:et([st("typeIndex"),tr("deactivationSlot"),pe("lastExtendedSlot"),bt("lastExtendedStartIndex"),bt(),Ee(yt(),_n(bt(),-1),"authority")])},Qf=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function th(r){const t=r.match(Qf);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[e,n,s,i]=t,o=r.startsWith("https:")?"wss:":"ws:",c=s==null?null:parseInt(s.slice(1),10),d=c==null?"":`:${c+1}`;return`${o}//${n}${d}${i}`}const Nt=Er(Ds(ct),H(),r=>new ct(r)),oc=qs([H(),Ut("base64")]),Vs=Er(Ds(nt.Buffer),oc,r=>nt.Buffer.from(r[0],"base64")),eh=30*1e3;function nh(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function _t(r){let t,e;if(typeof r=="string")t=r;else if(r){const{commitment:n,...s}=r;t=n,e=s}return{commitment:t,config:e}}function Uo(r){return r.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function ac(r){return Be([$({jsonrpc:Ut("2.0"),id:H(),result:r}),$({jsonrpc:Ut("2.0"),id:H(),error:$({code:rr(),message:H(),data:it(Nl())})})])}const rh=ac(rr());function gt(r){return Er(ac(r),rh,t=>"error"in t?t:{...t,result:j(t.result,r)})}function Kt(r){return gt($({context:$({slot:N()}),value:r}))}function di(r){return $({context:$({slot:N()}),value:r})}function Qi(r,t){return r===0?new Qn({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new ct(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:ge.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new Xe(t)}const ih=$({foundation:N(),foundationTerm:N(),initial:N(),taper:N(),terminal:N()}),sh=gt(Z(X($({epoch:N(),effectiveSlot:N(),amount:N(),postBalance:N(),commission:it(X(N()))})))),oh=Z($({slot:N(),prioritizationFee:N()})),ah=$({total:N(),validator:N(),foundation:N(),epoch:N()}),ch=$({epoch:N(),slotIndex:N(),slotsInEpoch:N(),absoluteSlot:N(),blockHeight:it(N()),transactionCount:it(N())}),uh=$({slotsPerEpoch:N(),leaderScheduleSlotOffset:N(),warmup:Ye(),firstNormalEpoch:N(),firstNormalSlot:N()}),lh=Da(H(),Z(N())),Cn=X(Be([$({}),H()])),fh=$({err:Cn}),hh=Ut("receivedSignature"),dh=$({"solana-core":H(),"feature-set":it(N())}),ph=$({program:H(),programId:Nt,parsed:rr()}),gh=$({programId:Nt,accounts:Z(Nt),data:H()}),No=Kt($({err:X(Be([$({}),H()])),logs:X(Z(H())),accounts:it(X(Z(X($({executable:Ye(),owner:H(),lamports:N(),data:Z(H()),rentEpoch:it(N())}))))),unitsConsumed:it(N()),returnData:it(X($({programId:H(),data:qs([H(),Ut("base64")])}))),innerInstructions:it(X(Z($({index:N(),instructions:Z(Be([ph,gh]))}))))})),mh=Kt($({byIdentity:Da(H(),Z(N())),range:$({firstSlot:N(),lastSlot:N()})}));function yh(r,t,e,n,s,i){const o=e||Zf;let c;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let d;return n&&(d=async(v,_)=>{const k=await new Promise((S,I)=>{try{n(v,_,(T,R)=>S([T,R]))}catch(T){I(T)}});return await o(...k)}),new uf(async(v,_)=>{const k={method:"POST",body:v,agent:c,headers:Object.assign({"Content-Type":"application/json"},t||{},yd)};try{let S=5,I,T=500;for(;d?I=await d(r,k):I=await o(r,k),!(I.status!==429||s===!0||(S-=1,S===0));)console.error(`Server responded with ${I.status} ${I.statusText}.  Retrying after ${T}ms delay...`),await Kn(T),T*=2;const R=await I.text();I.ok?_(null,R):_(new Error(`${I.status} ${I.statusText}: ${R}`))}catch(S){S instanceof Error&&_(S)}},{})}function wh(r){return(t,e)=>new Promise((n,s)=>{r.request(t,e,(i,o)=>{if(i){s(i);return}n(o)})})}function bh(r){return t=>new Promise((e,n)=>{t.length===0&&e([]);const s=t.map(i=>r.request(i.methodName,i.args));r.request(s,(i,o)=>{if(i){n(i);return}e(o)})})}const xh=gt(ih),vh=gt(ah),Eh=gt(oh),Sh=gt(ch),Bh=gt(uh),_h=gt(lh),kh=gt(N()),Ah=Kt($({total:N(),circulating:N(),nonCirculating:N(),nonCirculatingAccounts:Z(Nt)})),ps=$({amount:H(),uiAmount:X(N()),decimals:N(),uiAmountString:it(H())}),Ih=Kt(Z($({address:Nt,amount:H(),uiAmount:X(N()),decimals:N(),uiAmountString:it(H())}))),Mh=Kt(Z($({pubkey:Nt,account:$({executable:Ye(),owner:Nt,lamports:N(),data:Vs,rentEpoch:N()})}))),gs=$({program:H(),parsed:rr(),space:N()}),Rh=Kt(Z($({pubkey:Nt,account:$({executable:Ye(),owner:Nt,lamports:N(),data:gs,rentEpoch:N()})}))),Th=Kt(Z($({lamports:N(),address:Nt}))),pr=$({executable:Ye(),owner:Nt,lamports:N(),data:Vs,rentEpoch:N()}),Lh=$({pubkey:Nt,account:pr}),Ch=Er(Be([Ds(nt.Buffer),gs]),Be([oc,gs]),r=>Array.isArray(r)?j(r,Vs):r),ms=$({executable:Ye(),owner:Nt,lamports:N(),data:Ch,rentEpoch:N()}),Uh=$({pubkey:Nt,account:ms}),Nh=$({state:Be([Ut("active"),Ut("inactive"),Ut("activating"),Ut("deactivating")]),active:N(),inactive:N()}),Oh=gt(Z($({signature:H(),slot:N(),err:Cn,memo:X(H()),blockTime:it(X(N()))}))),Fh=gt(Z($({signature:H(),slot:N(),err:Cn,memo:X(H()),blockTime:it(X(N()))}))),Ph=$({subscription:N(),result:di(pr)}),Dh=$({pubkey:Nt,account:pr}),qh=$({subscription:N(),result:di(Dh)}),zh=$({parent:N(),slot:N(),root:N()}),$h=$({subscription:N(),result:zh}),Kh=Be([$({type:Be([Ut("firstShredReceived"),Ut("completed"),Ut("optimisticConfirmation"),Ut("root")]),slot:N(),timestamp:N()}),$({type:Ut("createdBank"),parent:N(),slot:N(),timestamp:N()}),$({type:Ut("frozen"),slot:N(),timestamp:N(),stats:$({numTransactionEntries:N(),numSuccessfulTransactions:N(),numFailedTransactions:N(),maxTransactionsPerEntry:N()})}),$({type:Ut("dead"),slot:N(),timestamp:N(),err:H()})]),Wh=$({subscription:N(),result:Kh}),Hh=$({subscription:N(),result:di(Be([fh,hh]))}),Vh=$({subscription:N(),result:N()}),jh=$({pubkey:H(),gossip:X(H()),tpu:X(H()),rpc:X(H()),version:X(H())}),Oo=$({votePubkey:H(),nodePubkey:H(),activatedStake:N(),epochVoteAccount:Ye(),epochCredits:Z(qs([N(),N(),N()])),commission:N(),lastVote:N(),rootSlot:X(N())}),Gh=gt($({current:Z(Oo),delinquent:Z(Oo)})),Zh=Be([Ut("processed"),Ut("confirmed"),Ut("finalized")]),Yh=$({slot:N(),confirmations:X(N()),err:Cn,confirmationStatus:it(Zh)}),Xh=Kt(Z(X(Yh))),Jh=gt(N()),cc=$({accountKey:Nt,writableIndexes:Z(N()),readonlyIndexes:Z(N())}),js=$({signatures:Z(H()),message:$({accountKeys:Z(H()),header:$({numRequiredSignatures:N(),numReadonlySignedAccounts:N(),numReadonlyUnsignedAccounts:N()}),instructions:Z($({accounts:Z(N()),data:H(),programIdIndex:N()})),recentBlockhash:H(),addressTableLookups:it(Z(cc))})}),uc=$({pubkey:Nt,signer:Ye(),writable:Ye(),source:it(Be([Ut("transaction"),Ut("lookupTable")]))}),lc=$({accountKeys:Z(uc),signatures:Z(H())}),fc=$({parsed:rr(),program:H(),programId:Nt}),hc=$({accounts:Z(Nt),data:H(),programId:Nt}),Qh=Be([hc,fc]),td=Be([$({parsed:rr(),program:H(),programId:H()}),$({accounts:Z(H()),data:H(),programId:H()})]),dc=Er(Qh,td,r=>"accounts"in r?j(r,hc):j(r,fc)),pc=$({signatures:Z(H()),message:$({accountKeys:Z(uc),instructions:Z(dc),recentBlockhash:H(),addressTableLookups:it(X(Z(cc)))})}),Yr=$({accountIndex:N(),mint:H(),owner:it(H()),programId:it(H()),uiTokenAmount:ps}),gc=$({writable:Z(Nt),readonly:Z(Nt)}),pi=$({err:Cn,fee:N(),innerInstructions:it(X(Z($({index:N(),instructions:Z($({accounts:Z(N()),data:H(),programIdIndex:N()}))})))),preBalances:Z(N()),postBalances:Z(N()),logMessages:it(X(Z(H()))),preTokenBalances:it(X(Z(Yr))),postTokenBalances:it(X(Z(Yr))),loadedAddresses:it(gc),computeUnitsConsumed:it(N()),costUnits:it(N())}),Gs=$({err:Cn,fee:N(),innerInstructions:it(X(Z($({index:N(),instructions:Z(dc)})))),preBalances:Z(N()),postBalances:Z(N()),logMessages:it(X(Z(H()))),preTokenBalances:it(X(Z(Yr))),postTokenBalances:it(X(Z(Yr))),loadedAddresses:it(gc),computeUnitsConsumed:it(N()),costUnits:it(N())}),ir=Be([Ut(0),Ut("legacy")]),Un=$({pubkey:H(),lamports:N(),postBalance:X(N()),rewardType:X(H()),commission:it(X(N()))}),ed=gt(X($({blockhash:H(),previousBlockhash:H(),parentSlot:N(),transactions:Z($({transaction:js,meta:X(pi),version:it(ir)})),rewards:it(Z(Un)),blockTime:X(N()),blockHeight:X(N())}))),nd=gt(X($({blockhash:H(),previousBlockhash:H(),parentSlot:N(),rewards:it(Z(Un)),blockTime:X(N()),blockHeight:X(N())}))),rd=gt(X($({blockhash:H(),previousBlockhash:H(),parentSlot:N(),transactions:Z($({transaction:lc,meta:X(pi),version:it(ir)})),rewards:it(Z(Un)),blockTime:X(N()),blockHeight:X(N())}))),id=gt(X($({blockhash:H(),previousBlockhash:H(),parentSlot:N(),transactions:Z($({transaction:pc,meta:X(Gs),version:it(ir)})),rewards:it(Z(Un)),blockTime:X(N()),blockHeight:X(N())}))),sd=gt(X($({blockhash:H(),previousBlockhash:H(),parentSlot:N(),transactions:Z($({transaction:lc,meta:X(Gs),version:it(ir)})),rewards:it(Z(Un)),blockTime:X(N()),blockHeight:X(N())}))),od=gt(X($({blockhash:H(),previousBlockhash:H(),parentSlot:N(),rewards:it(Z(Un)),blockTime:X(N()),blockHeight:X(N())}))),ad=gt(X($({blockhash:H(),previousBlockhash:H(),parentSlot:N(),transactions:Z($({transaction:js,meta:X(pi)})),rewards:it(Z(Un)),blockTime:X(N())}))),Fo=gt(X($({blockhash:H(),previousBlockhash:H(),parentSlot:N(),signatures:Z(H()),blockTime:X(N())}))),ts=gt(X($({slot:N(),meta:X(pi),blockTime:it(X(N())),transaction:js,version:it(ir)}))),Lr=gt(X($({slot:N(),transaction:pc,meta:X(Gs),blockTime:it(X(N())),version:it(ir)}))),cd=Kt($({blockhash:H(),lastValidBlockHeight:N()})),ud=Kt(Ye()),ld=$({slot:N(),numTransactions:N(),numSlots:N(),samplePeriodSecs:N()}),fd=gt(Z(ld)),hd=Kt(X($({feeCalculator:$({lamportsPerSignature:N()})}))),dd=gt(H()),pd=gt(H()),gd=$({err:Cn,logs:Z(H()),signature:H()}),md=$({result:di(gd),subscription:N()}),yd={"solana-client":"js/1.0.0-maintenance"};class mc{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const b={};return async v=>{const{commitment:_,config:k}=_t(v),S=this._buildArgs([],_,void 0,k),I=To(S);return b[I]=b[I]??(async()=>{try{const T=await this._rpcRequest("getBlockHeight",S),R=j(T,gt(N()));if("error"in R)throw new rt(R.error,"failed to get block height information");return R.result}finally{delete b[I]}})(),await b[I]}})();let n,s,i,o,c,d;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,n=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,c=e.disableRetryOnRateLimit,d=e.httpAgent),this._rpcEndpoint=nh(t),this._rpcWsEndpoint=n||th(t),this._rpcClient=yh(t,s,i,o,c,d),this._rpcRequest=wh(this._rpcClient),this._rpcBatchRequest=bh(this._rpcClient),this._rpcWebSocket=new Yf(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:n,config:s}=_t(e),i=this._buildArgs([t.toBase58()],n,void 0,s),o=await this._rpcRequest("getBalance",i),c=j(o,Kt(N()));if("error"in c)throw new rt(c.error,`failed to get balance for ${t.toBase58()}`);return c.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+n)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),n=j(e,gt(X(N())));if("error"in n)throw new rt(n.error,`failed to get block time for slot ${t}`);return n.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=j(t,gt(N()));if("error"in e)throw new rt(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=j(t,kh);if("error"in e)throw new rt(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[e]),s=j(n,Ah);if("error"in s)throw new rt(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",n),i=j(s,Kt(ps));if("error"in i)throw new rt(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",n),i=j(s,Kt(ps));if("error"in i)throw new rt(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,n){const{commitment:s,config:i}=_t(n);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const c=this._buildArgs(o,s,"base64",i),d=await this._rpcRequest("getTokenAccountsByOwner",c),b=j(d,Mh);if("error"in b)throw new rt(b.error,`failed to get token accounts owned by account ${t.toBase58()}`);return b.result}async getParsedTokenAccountsByOwner(t,e,n){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),c=j(o,Rh);if("error"in c)throw new rt(c.error,`failed to get token accounts owned by account ${t.toBase58()}`);return c.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},n=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",n),i=j(s,Th);if("error"in i)throw new rt(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",n),i=j(s,Ih);if("error"in i)throw new rt(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:n,config:s}=_t(e),i=this._buildArgs([t.toBase58()],n,"base64",s),o=await this._rpcRequest("getAccountInfo",i),c=j(o,Kt(X(pr)));if("error"in c)throw new rt(c.error,`failed to get info about account ${t.toBase58()}`);return c.result}async getParsedAccountInfo(t,e){const{commitment:n,config:s}=_t(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),c=j(o,Kt(X(ms)));if("error"in c)throw new rt(c.error,`failed to get info about account ${t.toBase58()}`);return c.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(n){throw new Error("failed to get info about account "+t.toBase58()+": "+n)}}async getMultipleParsedAccounts(t,e){const{commitment:n,config:s}=_t(e),i=t.map(b=>b.toBase58()),o=this._buildArgs([i],n,"jsonParsed",s),c=await this._rpcRequest("getMultipleAccounts",o),d=j(c,Kt(Z(X(ms))));if("error"in d)throw new rt(d.error,`failed to get info for accounts ${i}`);return d.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:n,config:s}=_t(e),i=t.map(b=>b.toBase58()),o=this._buildArgs([i],n,"base64",s),c=await this._rpcRequest("getMultipleAccounts",o),d=j(c,Kt(Z(X(pr))));if("error"in d)throw new rt(d.error,`failed to get info for accounts ${i}`);return d.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,n){const{commitment:s,config:i}=_t(e),o=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:n??(i==null?void 0:i.epoch)}),c=await this._rpcRequest("getStakeActivation",o),d=j(c,gt(Nh));if("error"in d)throw new rt(d.error,`failed to get Stake Activation ${t.toBase58()}`);return d.result}async getProgramAccounts(t,e){const{commitment:n,config:s}=_t(e),{encoding:i,...o}=s||{},c=this._buildArgs([t.toBase58()],n,i||"base64",{...o,...o.filters?{filters:Uo(o.filters)}:null}),d=await this._rpcRequest("getProgramAccounts",c),b=Z(Lh),v=o.withContext===!0?j(d,Kt(b)):j(d,gt(b));if("error"in v)throw new rt(v.error,`failed to get accounts owned by program ${t.toBase58()}`);return v.result}async getParsedProgramAccounts(t,e){const{commitment:n,config:s}=_t(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),c=j(o,gt(Z(Uh)));if("error"in c)throw new rt(c.error,`failed to get accounts owned by program ${t.toBase58()}`);return c.result}async confirmTransaction(t,e){var i;let n;if(typeof t=="string")n=t;else{const o=t;if((i=o.abortSignal)!=null&&i.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let s;try{s=ge.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return kt(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:n}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,n)=>{t!=null&&(t.aborted?n(t.reason):t.addEventListener("abort",()=>{n(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let n,s,i=!1;const o=new Promise((d,b)=>{try{n=this.onSignature(e,(_,k)=>{n=void 0;const S={context:k,value:_};d({__type:gn.PROCESSED,response:S})},t);const v=new Promise(_=>{n==null?_():s=this._onSubscriptionStateChange(n,k=>{k==="subscribed"&&_()})});(async()=>{if(await v,i)return;const _=await this.getSignatureStatus(e);if(i||_==null)return;const{context:k,value:S}=_;if(S!=null)if(S!=null&&S.err)b(S.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(S.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(S.confirmationStatus==="processed"||S.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,d({__type:gn.PROCESSED,response:{context:k,value:S}})}})()}catch(v){b(v)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:n,signature:s}}){let i=!1;const o=new Promise(_=>{const k=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let S=await k();if(!i){for(;S<=n;)if(await Kn(1e3),i||(S=await k(),i))return;_({__type:gn.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:c,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),b=this.getCancellationPromise(e);let v;try{const _=await Promise.race([b,d,o]);if(_.__type===gn.PROCESSED)v=_.response;else throw new tc(s)}finally{i=!0,c()}return v}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:n,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let c=!1;const d=new Promise(S=>{let I=i,T=null;const R=async()=>{try{const{context:C,value:D}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:n});return T=C.slot,D==null?void 0:D.nonce}catch{return I}};(async()=>{if(I=await R(),!c)for(;;){if(i!==I){S({__type:gn.NONCE_INVALID,slotInWhichNonceDidAdvance:T});return}if(await Kn(2e3),c||(I=await R(),c))return}})()}),{abortConfirmation:b,confirmationPromise:v}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),_=this.getCancellationPromise(e);let k;try{const S=await Promise.race([_,v,d]);if(S.__type===gn.PROCESSED)k=S.response;else{let I;for(;;){const T=await this.getSignatureStatus(o);if(T==null)break;if(T.context.slot<(S.slotInWhichNonceDidAdvance??n)){await Kn(400);continue}I=T;break}if(I!=null&&I.value){const T=t||"finalized",{confirmationStatus:R}=I.value;switch(T){case"processed":case"recent":if(R!=="processed"&&R!=="confirmed"&&R!=="finalized")throw new cr(o);break;case"confirmed":case"single":case"singleGossip":if(R!=="confirmed"&&R!=="finalized")throw new cr(o);break;case"finalized":case"max":case"root":if(R!=="finalized")throw new cr(o);break;default:}k={context:I.context,value:{err:I.value.err}}}else throw new cr(o)}}finally{c=!0,b()}return k}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let n;const s=new Promise(d=>{let b=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{b=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>d({__type:gn.TIMED_OUT,timeoutMs:b}),b)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let c;try{const d=await Promise.race([o,s]);if(d.__type===gn.PROCESSED)c=d.response;else throw new ec(e,d.timeoutMs/1e3)}finally{clearTimeout(n),i()}return c}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=j(t,gt(Z(jh)));if("error"in e)throw new rt(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getVoteAccounts",e),s=j(n,Gh);if("error"in s)throw new rt(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:n}=_t(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getSlot",s),o=j(i,gt(N()));if("error"in o)throw new rt(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:n}=_t(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getSlotLeader",s),o=j(i,gt(H()));if("error"in o)throw new rt(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const n=[t,e],s=await this._rpcRequest("getSlotLeaders",n),i=j(s,gt(Z(Nt)));if("error"in i)throw new rt(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:n,value:s}=await this.getSignatureStatuses([t],e);kt(s.length===1);const i=s[0];return{context:n,value:i}}async getSignatureStatuses(t,e){const n=[t];e&&n.push(e);const s=await this._rpcRequest("getSignatureStatuses",n),i=j(s,Xh);if("error"in i)throw new rt(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:n}=_t(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getTransactionCount",s),o=j(i,gt(N()));if("error"in o)throw new rt(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getInflationGovernor",e),s=j(n,xh);if("error"in s)throw new rt(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,n){const{commitment:s,config:i}=_t(n),o=this._buildArgs([t.map(b=>b.toBase58())],s,void 0,{...i,epoch:e??(i==null?void 0:i.epoch)}),c=await this._rpcRequest("getInflationReward",o),d=j(c,sh);if("error"in d)throw new rt(d.error,"failed to get inflation reward");return d.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=j(t,vh);if("error"in e)throw new rt(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:n}=_t(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getEpochInfo",s),o=j(i,Sh);if("error"in o)throw new rt(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=j(t,Bh);if("error"in e)throw new rt(e.error,"failed to get epoch schedule");const n=e.result;return new Gf(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=j(t,_h);if("error"in e)throw new rt(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const n=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",n),i=j(s,Jh);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),n=j(e,fd);if("error"in n)throw new rt(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(t,e){const n=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",n),i=j(s,hd);if("error"in i)throw new rt(i.error,"failed to get fee calculator");const{context:o,value:c}=i.result;return{context:o,value:c!==null?c.feeCalculator:null}}async getFeeForMessage(t,e){const n=le(t.serialize()).toString("base64"),s=this._buildArgs([n],e),i=await this._rpcRequest("getFeeForMessage",s),o=j(i,Kt(X(N())));if("error"in o)throw new rt(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){var o;const e=(o=t==null?void 0:t.lockedWritableAccounts)==null?void 0:o.map(c=>c.toBase58()),n=e!=null&&e.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",n),i=j(s,Eh);if("error"in i)throw new rt(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:n}=_t(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getLatestBlockhash",s),o=j(i,cd);if("error"in o)throw new rt(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:n,config:s}=_t(e),i=this._buildArgs([t],n,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),c=j(o,ud);if("error"in c)throw new rt(c.error,"failed to determine if the blockhash `"+t+"`is valid");return c.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=j(t,gt(dh));if("error"in e)throw new rt(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=j(t,gt(H()));if("error"in e)throw new rt(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:n,config:s}=_t(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const c=j(o,rd);if("error"in c)throw c.error;return c.result}case"none":{const c=j(o,nd);if("error"in c)throw c.error;return c.result}default:{const c=j(o,ed);if("error"in c)throw c.error;const{result:d}=c;return d?{...d,transactions:d.transactions.map(({transaction:b,meta:v,version:_})=>({meta:v,transaction:{...b,message:Qi(_,b.message)},version:_}))}:null}}}catch(c){throw new rt(c,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:n,config:s}=_t(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const c=j(o,sd);if("error"in c)throw c.error;return c.result}case"none":{const c=j(o,od);if("error"in c)throw c.error;return c.result}default:{const c=j(o,id);if("error"in c)throw c.error;return c.result}}}catch(c){throw new rt(c,"failed to get block")}}async getBlockProduction(t){let e,n;if(typeof t=="string")n=t;else if(t){const{commitment:c,...d}=t;n=c,e=d}const s=this._buildArgs([],n,"base64",e),i=await this._rpcRequest("getBlockProduction",s),o=j(i,mh);if("error"in o)throw new rt(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:n,config:s}=_t(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,s),o=await this._rpcRequest("getTransaction",i),c=j(o,ts);if("error"in c)throw new rt(c.error,"failed to get transaction");const d=c.result;return d&&{...d,transaction:{...d.transaction,message:Qi(d.version,d.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:n,config:s}=_t(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),c=j(o,Lr);if("error"in c)throw new rt(c.error,"failed to get transaction");return c.result}async getParsedTransactions(t,e){const{commitment:n,config:s}=_t(e),i=t.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],n,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(d=>{const b=j(d,Lr);if("error"in b)throw new rt(b.error,"failed to get transactions");return b.result})}async getTransactions(t,e){const{commitment:n,config:s}=_t(e),i=t.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],n,void 0,s)}));return(await this._rpcBatchRequest(i)).map(d=>{const b=j(d,ts);if("error"in b)throw new rt(b.error,"failed to get transactions");const v=b.result;return v&&{...v,transaction:{...v.transaction,message:Qi(v.version,v.transaction.message)}}})}async getConfirmedBlock(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getBlock",n),i=j(s,ad);if("error"in i)throw new rt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");const c={...o,transactions:o.transactions.map(({transaction:d,meta:b})=>{const v=new Xe(d.message);return{meta:b,transaction:{...d,message:v}}})};return{...c,transactions:c.transactions.map(({transaction:d,meta:b})=>({meta:b,transaction:cn.populate(d.message,d.signatures)}))}}async getBlocks(t,e,n){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],n),i=await this._rpcRequest("getBlocks",s),o=j(i,gt(Z(N())));if("error"in o)throw new rt(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=j(s,Fo);if("error"in i)throw new rt(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=j(s,Fo);if("error"in i)throw new rt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getTransaction",n),i=j(s,ts);if("error"in i)throw new rt(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const c=new Xe(o.transaction.message),d=o.transaction.signatures;return{...o,transaction:cn.populate(c,d)}}async getParsedConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getTransaction",n),i=j(s,Lr);if("error"in i)throw new rt(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const n=t.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const c=j(o,Lr);if("error"in c)throw new rt(c.error,"failed to get confirmed transactions");return c.result})}async getConfirmedSignaturesForAddress(t,e,n){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const d=await this.getConfirmedBlockSignatures(e,"finalized");d.signatures.length>0&&(s.until=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}let o=await this.getSlot("finalized");for(;!("before"in s)&&(n++,!(n>o));)try{const d=await this.getConfirmedBlockSignatures(n);d.signatures.length>0&&(s.before=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(d=>d.signature)}async getConfirmedSignaturesForAddress2(t,e,n){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=j(i,Oh);if("error"in o)throw new rt(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,n){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),o=j(i,Fh);if("error"in o)throw new rt(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:n,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new Co({key:t,state:Co.deserialize(s.data)})),{context:n,value:i}}async getNonceAndContext(t,e){const{context:n,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=Hs.fromAccountData(s.data)),{context:n,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+n)})}async requestAirdrop(t,e){const n=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=j(n,dd);if("error"in s)throw new rt(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await Kn(100);const n=Date.now()-this._blockhashInfo.lastFetch>=eh;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,n=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(n!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Kn($f/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:n}=_t(t),s=this._buildArgs([],e,"base64",n),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=j(i,Kt(N()));if("error"in o)throw new rt(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,n){if("message"in t){const T=t.serialize(),R=nt.Buffer.from(T).toString("base64");if(Array.isArray(e)||n!==void 0)throw new Error("Invalid arguments");const C=e||{};C.encoding="base64","commitment"in C||(C.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(C.innerInstructions=e.innerInstructions);const D=[R,C],F=await this._rpcRequest("simulateTransaction",D),W=j(F,No);if("error"in W)throw new Error("failed to simulate transaction: "+W.error.message);return W.result}let s;if(t instanceof cn){let I=t;s=new cn,s.feePayer=I.feePayer,s.instructions=t.instructions,s.nonceInfo=I.nonceInfo,s.signatures=I.signatures}else s=cn.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let I=this._disableBlockhashCaching;for(;;){const T=await this._blockhashWithExpiryBlockHeight(I);if(s.lastValidBlockHeight=T.lastValidBlockHeight,s.recentBlockhash=T.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const R=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(R)&&!this._blockhashInfo.transactionSignatures.includes(R)){this._blockhashInfo.simulatedSignatures.push(R);break}else I=!0}}const o=s._compile(),c=o.serialize(),b=s._serialize(c).toString("base64"),v={encoding:"base64",commitment:this.commitment};if(n){const I=(Array.isArray(n)?n:o.nonProgramIds()).map(T=>T.toBase58());v.accounts={encoding:"base64",addresses:I}}i&&(v.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(v.innerInstructions=e.innerInstructions);const _=[b,v],k=await this._rpcRequest("simulateTransaction",_),S=j(k,No);if("error"in S){let I;if("data"in S.error&&(I=S.error.data.logs,I&&Array.isArray(I))){const T=`
    `,R=T+I.join(T);console.error(S.error.message,R)}throw new Io({action:"simulate",signature:"",transactionMessage:S.error.message,logs:I})}return S.result}async sendTransaction(t,e,n){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const c=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=c.lastValidBlockHeight,t.recentBlockhash=c.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const d=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(d))o=!0;else{this._blockhashInfo.transactionSignatures.push(d);break}}}const i=t.serialize();return await this.sendRawTransaction(i,n)}async sendRawTransaction(t,e){const n=le(t).toString("base64");return await this.sendEncodedTransaction(n,e)}async sendEncodedTransaction(t,e){const n={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(n.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(n.minContextSlot=e.minContextSlot),s&&(n.skipPreflight=s),i&&(n.preflightCommitment=i);const o=[t,n],c=await this._rpcRequest("sendTransaction",o),d=j(c,pd);if("error"in d){let b;throw"data"in d.error&&(b=d.error.data.logs),new Io({action:s?"send":"simulate",signature:"",transactionMessage:d.error.message,logs:b})}return d.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,n])=>{this._setSubscription(e,{...n,state:"pending"})})}_setSubscription(t,e){var s;const n=(s=this._subscriptionsByHash[t])==null?void 0:s.state;if(this._subscriptionsByHash[t]=e,n!==e.state){const i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(o=>{try{o(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var i;const n=this._subscriptionHashByClientSubscriptionId[t];if(n==null)return()=>{};const s=(i=this._subscriptionStateChangeCallbacksByHash)[n]||(i[n]=new Set);return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const s=this._subscriptionsByHash[n];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[n],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(n,{...s,state:"subscribing"});const c=await this._rpcWebSocket.call(o,i);this._setSubscription(n,{...s,serverSubscriptionId:c,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[c]=s.callbacks,await this._updateSubscriptions()}catch(c){if(console.error(`Received ${c instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:c}),!e())return;this._setSubscription(n,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(n,{...s,state:"unsubscribing"}),this._setSubscription(n,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(c){if(c instanceof Error&&console.error(`${o} error:`,c.message),!e())return;this._setSubscription(n,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const n=this._subscriptionCallbacksByServerSubscriptionId[t];n!==void 0&&n.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:n}=j(t,Ph);this._handleServerNotification(n,[e.value,e.context])}_makeSubscription(t,e){const n=this._nextClientSubscriptionId++,s=To([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[n]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[s];kt(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(t,e,n){const{commitment:s,config:i}=_t(n),o=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:n}=j(t,qh);this._handleServerNotification(n,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,n,s){const{commitment:i,config:o}=_t(n),c=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:Uo(s)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},c)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,n){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],n||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:n}=j(t,md);this._handleServerNotification(n,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:n}=j(t,$h);this._handleServerNotification(n,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:n}=j(t,Wh);this._handleServerNotification(n,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,n,s){const i=e||this._commitment;if(i||n||s){let o={};n&&(o.encoding=n),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,n,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,n,s)}_wsOnSignatureNotification(t){const{result:e,subscription:n}=j(t,Hh);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,n){const s=this._buildArgs([t],n||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,c)=>{if(o.type==="status"){e(o.result,c);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,n){const{commitment:s,...i}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([t],s,void 0,i),c=this._makeSubscription({callback:(d,b)=>{e(d,b);try{this.removeSignatureListener(c)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return c}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:n}=j(t,Vh);this._handleServerNotification(n,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:et([st("instruction"),tr("recentSlot"),bt("bumpSeed")])},FreezeLookupTable:{index:1,layout:et([st("instruction")])},ExtendLookupTable:{index:2,layout:et([st("instruction"),tr(),Ee(yt(),_n(st(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:et([st("instruction")])},CloseLookupTable:{index:4,layout:et([st("instruction")])}});new ct("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:et([bt("instruction"),st("units"),st("additionalFee")])},RequestHeapFrame:{index:1,layout:et([bt("instruction"),st("bytes")])},SetComputeUnitLimit:{index:2,layout:et([bt("instruction"),st("units")])},SetComputeUnitPrice:{index:3,layout:et([bt("instruction"),tr("microLamports")])}});new ct("ComputeBudget111111111111111111111111111111");et([bt("numSignatures"),bt("padding"),Pe("signatureOffset"),Pe("signatureInstructionIndex"),Pe("publicKeyOffset"),Pe("publicKeyInstructionIndex"),Pe("messageDataOffset"),Pe("messageDataSize"),Pe("messageInstructionIndex")]);new ct("Ed25519SigVerify111111111111111111111111111");If.utils.isValidPrivateKey;et([bt("numSignatures"),Pe("signatureOffset"),bt("signatureInstructionIndex"),Pe("ethAddressOffset"),bt("ethAddressInstructionIndex"),Pe("messageDataOffset"),Pe("messageDataSize"),bt("messageInstructionIndex"),Rt(20,"ethAddress"),Rt(64,"signature"),bt("recoveryId")]);new ct("KeccakSecp256k11111111111111111111111111111");var yc;new ct("StakeConfig11111111111111111111111111111111");class wc{constructor(t,e,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=n}}yc=wc;wc.default=new yc(0,0,ct.default);Object.freeze({Initialize:{index:0,layout:et([st("instruction"),Uf(),Nf()])},Authorize:{index:1,layout:et([st("instruction"),yt("newAuthorized"),st("stakeAuthorizationType")])},Delegate:{index:2,layout:et([st("instruction")])},Split:{index:3,layout:et([st("instruction"),Ie("lamports")])},Withdraw:{index:4,layout:et([st("instruction"),Ie("lamports")])},Deactivate:{index:5,layout:et([st("instruction")])},Merge:{index:7,layout:et([st("instruction")])},AuthorizeWithSeed:{index:8,layout:et([st("instruction"),yt("newAuthorized"),st("stakeAuthorizationType"),Hn("authoritySeed"),yt("authorityOwner")])}});new ct("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:et([st("instruction"),Of()])},Authorize:{index:1,layout:et([st("instruction"),yt("newAuthorized"),st("voteAuthorizationType")])},Withdraw:{index:3,layout:et([st("instruction"),Ie("lamports")])},UpdateValidatorIdentity:{index:4,layout:et([st("instruction")])},AuthorizeWithSeed:{index:10,layout:et([st("instruction"),Ff()])}});new ct("Vote111111111111111111111111111111111111111");new ct("Va1idator1nfo111111111111111111111111111111");$({name:H(),website:it(H()),details:it(H()),iconUrl:it(H()),keybaseUsername:it(H())});new ct("Vote111111111111111111111111111111111111111");et([yt("nodePubkey"),yt("authorizedWithdrawer"),bt("commission"),pe(),Ee(et([pe("slot"),st("confirmationCount")]),_n(st(),-8),"votes"),bt("rootSlotValid"),pe("rootSlot"),pe(),Ee(et([pe("epoch"),yt("authorizedVoter")]),_n(st(),-8),"authorizedVoters"),et([Ee(et([yt("authorizedPubkey"),pe("epochOfLastAuthorizedSwitch"),pe("targetEpoch")]),32,"buf"),pe("idx"),bt("isEmpty")],"priorVoters"),pe(),Ee(et([pe("epoch"),pe("credits"),pe("prevCredits")]),_n(st(),-8),"epochCredits"),et([pe("slot"),pe("timestamp")],"lastTimestamp")]);const bc=1e9;let An,ur=[],Xr=0,xc=vt.DEFAULT_CLUSTER,es=0;const ns=()=>Date.now(),wd=r=>Array.from(new Set(r));function bd(r){const e=String((r==null?void 0:r.message)||r||"").toLowerCase();return e.includes("429")||e.includes("rate")||e.includes("fetch")||e.includes("network")||e.includes("timeout")||e.includes("forbidden")||e.includes("403")}function xd(r){return/rpc\.ankr\.com\/multichain/i.test(r)}function vd(r,t){return r.length>0?r:t==="devnet"?["https://rpc.publicnode.com/solana-devnet","https://api.devnet.solana.com"]:["https://rpc.publicnode.com/solana","https://solana.drpc.org","https://api.mainnet-beta.solana.com"]}function vc(r){xc=r;const t=r==="devnet"?vt.DEVNET_RPCS:vt.MAINNET_RPCS;let e=wd(t).filter(Boolean);const n=e.length;e=e.filter(s=>!xd(s)),e.length!==n&&console.warn("[RPC] Ignoring Ankr Multichain endpoints for Solana JSON-RPC. Supply native Solana RPC URLs instead."),e=vd(e,r),ur=e,Xr=0,An=new mc(Jr(),{commitment:"confirmed"})}function Ed(r){Xr=(Xr+1)%(ur.length||1),An=new mc(Jr(),{commitment:"confirmed"}),console.warn("[RPC] rotated ",Jr(),r?`(${r})`:"")}function Jr(){return ur.length||vc(vt.DEFAULT_CLUSTER),ur[Xr%ur.length]}function Zs(r=vt.DEFAULT_CLUSTER){return vc(r),An}function Sd(){return An||Zs(vt.DEFAULT_CLUSTER),An}function gr(){return xc}async function ys(r,t="op",e=2){An||Zs(vt.DEFAULT_CLUSTER),ns()<es&&await new Promise(s=>setTimeout(s,Math.max(0,es-ns())));let n=700;for(let s=0;s<=e;s++)try{return await r(An)}catch(i){const o=bd(i);if(console.warn(`[RPC] ${t} failed on ${Jr()} (try ${s+1}/${e+1})`,i),!o||s===e)throw i;String((i==null?void 0:i.message)||"").includes("429")&&(es=ns()+15e3),Ed(t),await new Promise(c=>setTimeout(c,n+Math.floor(Math.random()*300))),n=Math.min(n*2,6e3)}throw new Error("failover loop exhausted")}async function Bd(r){if(!r)return null;try{const t=r.endsWith(".sol")?r.slice(0,-4):r,e=await fetch(`https://sns-api.bonfida.com/resolve/${encodeURIComponent(t)}`);if(!e.ok)return null;const n=await e.json(),s=n==null?void 0:n.address;return s&&Nr(s)?s:null}catch{return null}}function Nr(r){try{return new ct(r),!0}catch{return!1}}async function _d(r,t){const e=await In(),n=new ct(e),{blockhash:s}=await ys(v=>v.getLatestBlockhash({commitment:"finalized"}),"getLatestBlockhash"),i=dr.transfer({fromPubkey:r,toPubkey:n,lamports:Math.round(Number(t)*bc)}),o=new Ks({payerKey:r,recentBlockhash:s,instructions:[i]}).compileToV0Message(),c=new Ws(o),d=Qr();if(!(d!=null&&d.signAndSendTransaction))throw new Error("No wallet found. Open Phantom and connect.");const b=await d.signAndSendTransaction(c);return String((b==null?void 0:b.signature)??b)}async function kd(){var o,c,d,b;const r=await In(),t=new ct(r),e=await ys(v=>v.getSignaturesForAddress(t,{limit:15},"confirmed"),"getSignaturesForAddress");if(!(e!=null&&e.length))return[];const n=e.map(v=>v.signature).slice(0,12),s=await ys(async v=>(await Promise.all(n.map(k=>v.getTransaction(k,{maxSupportedTransactionVersion:0})))).filter(Boolean),"getTransaction(batch)"),i=[];for(const v of s)try{const _=v.transaction.message.accountKeys.map(R=>typeof R=="string"?R:R!=null&&R.toBase58?R.toBase58():String((R==null?void 0:R.pubkey)??R)),k=_.indexOf(r);if(k<0)continue;const S=((c=(o=v.meta)==null?void 0:o.preBalances)==null?void 0:c[k])??0,T=(((b=(d=v.meta)==null?void 0:d.postBalances)==null?void 0:b[k])??0)-S;T>0&&i.push({sol:(T/bc).toFixed(4),sig:v.transaction.signatures[0],from:_[0],when:v.blockTime??0})}catch{}return i.slice(0,10)}function Qr(){const r=window.solana;return r!=null&&r.isPhantom?r:null}let Cr=null;async function In(){if(Cr&&Nr(Cr))return Cr;let r=vt.TIP_DEST_SOL;if(!Nr(r)&&vt.OWNER_SOL_DOMAIN){const t=await Bd(vt.OWNER_SOL_DOMAIN);t&&(r=t)}if(!Nr(r))throw new Error("Invalid recipient. Set VITE_OWNER_WALLET to a base58 address.");return Cr=r,r}function ti(r,t,e,n){const s=new URL(`solana:${r}`);return t>0&&s.searchParams.set("amount",String(t)),e&&s.searchParams.set("label",e),n&&s.searchParams.set("message",n),s.toString()}const ei=/Android|iPhone|iPad|iPod/i.test(navigator.userAgent||""),he=r=>{const t=document.querySelector(r);if(!t)throw new Error(`Missing element: ${r}`);return t};let rs=null,is=!1,zn=0;function Zn(r){rs&&window.clearTimeout(rs),rs=window.setTimeout(Id,r)}function Ad(r){return r?new Date(r*1e3).toLocaleString():""}async function Id(){if(!is){is=!0;try{const r=await kd(),t=he("#tip-feed");if(!r.length)t.innerHTML='<li class="text-white/60 text-sm">No recent tips yet.</li>';else{const e=gr(),n=e==="mainnet"?"":`?cluster=${e}`;t.innerHTML=r.map(s=>`<li class="glass rounded px-3 py-2 border border-white/10 flex items-center justify-between">
              <div>
                <a class="underline" href="${`https://explorer.solana.com/tx/${s.sig}${n}`}" target="_blank" rel="noopener">${s.sig.slice(0,4)}${s.sig.slice(-4)}</a>
                <span class="ml-2 text-white/70">${s.sol} SOL</span>
              </div>
              <div class="text-xs text-white/50">${Ad(s.when)}</div>
            </li>`).join("")}zn=0,Zn(6e4)}catch(r){const t=String((r==null?void 0:r.message)||r).includes("429")||/too many requests/i.test(String((r==null?void 0:r.message)||r));zn=zn?Math.min(zn*2,12e4):2e4,Zn(Math.max(t?6e4:45e3,zn))}finally{is=!1}}}async function Md(){const r=he("#owner-sol");try{const t=await In();r.textContent=`${t.slice(0,4)}${t.slice(-4)}`}catch{r.textContent=""}}function or(r){const t=he("#connect-wallet");r?(t.textContent=`${r.slice(0,4)}${r.slice(-4)}`,t.classList.add("opacity-90")):(t.textContent="Connect Wallet",t.classList.remove("opacity-90"))}let ws=null;function Rd(r){return`https://phantom.app/ul/v1/pay?link=${encodeURIComponent(r)}`}function Td(){return window.QRCode?Promise.resolve(!0):new Promise(r=>{const t=document.createElement("script");t.src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js",t.async=!0,t.onload=()=>r(!0),t.onerror=()=>r(!1),document.head.appendChild(t)})}function Ld(r){let t=document.getElementById("qr-box");return t||(t=document.createElement("div"),t.id="qr-box",t.className=r.className,r.insertAdjacentElement("afterend",t)),t}function Cd(r,t){r.classList.remove("hidden");const e=r.getContext("2d");e.fillStyle="#fff",e.fillRect(0,0,r.width,r.height),e.fillStyle="#000",e.font="14px monospace",(t.match(/.{1,40}/g)||[t]).forEach((s,i)=>e.fillText(s,10,28+i*18))}async function Ud(r){const t=he("#qr-canvas");if(await Td()&&window.QRCode){const n=Ld(t);t.classList.add("hidden"),n.innerHTML="";try{new window.QRCode(n,{text:r,width:256,height:256,correctLevel:0});return}catch{}}Cd(t,r)}async function ni(r,t,e){ws=r;const n=he("#qr-backdrop"),s=he("#qr-open"),i=he("#qr-amount"),o=he("#qr-recipient");i.textContent=String(t),o.textContent=e,ei?(s.href=Rd(r),s.textContent="Open in Phantom",s.classList.remove("hidden")):(s.removeAttribute("href"),s.classList.add("hidden")),await Ud(r),n.classList.remove("hidden")}function Nd(){he("#qr-close").addEventListener("click",()=>{he("#qr-backdrop").classList.add("hidden")}),he("#qr-copy").addEventListener("click",async()=>{try{if(!ws)return;await navigator.clipboard.writeText(ws)}catch{}})}async function bs(r){if(!r||r<=0)return;const t=Qr();if(!t){if(ei){const e=await In(),n=ti(e,r,`${vt.OWNER_SOL_DOMAIN||"Tip Jar"}`,`Thanks for the tip (${gr()})`);await ni(n,r,e)}else window.open("https://phantom.app/","_blank","noopener");return}try{t.publicKey||await t.connect({onlyIfTrusted:!1});const e=t.publicKey;if(!e)throw new Error("connect_failed");await _d(e,r),Zn(4e3)}catch(e){const n=e==null?void 0:e.code,s=String((e==null?void 0:e.message)||e||"");if(n===4001||/reject/i.test(s))return;if(!ei){console.warn("Send failed on desktop:",e);return}try{const i=await In(),o=ti(i,r,`${vt.OWNER_SOL_DOMAIN||"Tip Jar"}`,`Thanks for the tip (${gr()})`);await ni(o,r,i)}catch{}}}function Od(){const r=he("#qr-tip");let t=document.getElementById("send-tip");t||(t=document.createElement("button"),t.id="send-tip",t.type="button",t.className="btn-grad px-3 py-2 rounded-lg font-semibold text-sm hover:scale-105 transition",t.textContent="Send",r.insertAdjacentElement("beforebegin",t)),t.onclick=async()=>{const e=he("#custom-tip"),n=Number(e.value);await bs(n)}}function Fd(){var e,n,s;Sd(),Nd(),Md(),Od();const r=he("#custom-tip");r.addEventListener("keydown",async i=>{if(i.key==="Enter"){i.preventDefault();const o=Number(r.value);await bs(o)}});const t=he("#connect-wallet");t.onclick=async()=>{var o,c,d,b;const i=Qr();if(!i){if(ei){const v=await In(),_=Number(he("#custom-tip").value)||.05,k=ti(v,_,`${vt.OWNER_SOL_DOMAIN||"Tip Jar"}`,`Thanks for the tip (${gr()})`);await ni(k,_,v)}else window.open("https://phantom.app/","_blank","noopener");return}try{const v=await i.connect({onlyIfTrusted:!1}),_=((c=(o=v==null?void 0:v.publicKey)==null?void 0:o.toBase58)==null?void 0:c.call(o))??((b=(d=i.publicKey)==null?void 0:d.toBase58)==null?void 0:b.call(d));or(_),Zn(2e3)}catch{or(void 0)}};try{const i=Qr();(e=i==null?void 0:i.on)==null||e.call(i,"connect",()=>{var c,d;const o=(d=(c=i.publicKey)==null?void 0:c.toBase58)==null?void 0:d.call(c);or(o),Zn(2e3)}),(n=i==null?void 0:i.on)==null||n.call(i,"disconnect",()=>{or(void 0)}),(s=i==null?void 0:i.on)==null||s.call(i,"accountChanged",o=>{or(o?o.toBase58():void 0)})}catch{}document.querySelectorAll(".tip-btn").forEach(i=>{i.onclick=async()=>{const o=Number(i.dataset.amount||"0");await bs(o)}}),he("#qr-tip").addEventListener("click",async()=>{const i=he("#custom-tip"),o=Number(i.value)||.05,c=await In(),d=ti(c,o,`${vt.OWNER_SOL_DOMAIN||"Tip Jar"}`,`Thanks for the tip (${gr()})`);await ni(d,o,c)}),Zn(3e3)}const ss=24,lr={gru:4,"get-better-material":4,crow:4,"expanding-brain":4,"tintin-and-snowy":3};let De=(vt==null?void 0:vt.OWNER_SOL_DOMAIN)||"";function ar(r){De=(r||"").trim(),Ys();const t=document.getElementById("api-watermark-hint");t&&(t.textContent=De?`Watermark: ${De}`:""),Or==null||Or()}const Ze={encode(r){return r.trim().replace(/_/g,"__").replace(/-/g,"--").replace(/ /g,"_").replace(/\?/g,"~q").replace(/%/g,"~p").replace(/#/g,"~h").replace(/\//g,"~s").replace(/\\/g,"~b").replace(/</g,"~l").replace(/>/g,"~g")},normalizeLines(r){return(r||[]).map(t=>t&&t.trim()?t:"_")},inferLineCountFromSample(r){if(!r)return 2;try{const e=r.split("?")[0].match(/\/images\/[^/]+\/(.+?)\.(?:png|jpg|jpeg|webp|gif)$/i);if(e&&e[1]){const n=e[1].split("/").filter(Boolean).length;return Math.max(1,n||2)}}catch{}return 2},async list(){let r=[];try{const n=await fetch("https://api.memegen.link/templates/");if(!n.ok)throw new Error("Failed to load meme templates");r=await n.json()}catch{r=[{key:"fry",name:"Futurama Fry",example:{text:["Not sure if","or just"]}},{key:"drake",name:"Drake Hotline Bling",example:{text:["No","Yes"]}},{key:"gru",name:"Gru Plan",example:{text:["1","2","3","4"]}}]}const t=r.map(n=>{var _,k;const s=(n.key||n.id||n.template||n.slug||"").toString(),i=(n.name||n.id||n.key||"Template").toString(),o=((_=n.example)==null?void 0:_.url)||n.sample,c=Array.isArray((k=n.example)==null?void 0:k.text)?n.example.text.length:0,d=Ze.inferLineCountFromSample(o),v=lr[s]||c||d||2;return s?{key:s,name:i,sample:o,lines:v}:null}).filter(Boolean),e=new Set;return t.filter(n=>e.has(n.key)?!1:(e.add(n.key),!0))},_detailCache:new Map,async details(r){var o,c,d;const t=this._detailCache.get(r);if(t)return t;let e=lr[r]||0,n,s;try{const b=await fetch(`https://api.memegen.link/templates/${encodeURIComponent(r)}`);if(b.ok){const v=await b.json(),_=Array.isArray((o=v==null?void 0:v.example)==null?void 0:o.text)?v.example.text.length:0,k=Ze.inferLineCountFromSample(((c=v==null?void 0:v.example)==null?void 0:c.url)||(v==null?void 0:v.blank));e=Math.max(e,_||k||0),Array.isArray((d=v==null?void 0:v.example)==null?void 0:d.text)&&(n=v.example.text),typeof(v==null?void 0:v.blank)=="string"&&(s=v.blank)}}catch{}(!e||e<1)&&(e=2);const i={lines:e,example:n,blank:s};return this._detailCache.set(r,i),i},previewUrl(r,t){const e=new URL("https://api.memegen.link/images/preview.jpg");return e.searchParams.set("template",r),Ze.normalizeLines(t).forEach(n=>e.searchParams.append("text[]",n)),e.searchParams.set("font","impact"),e.searchParams.set("width","600"),e.searchParams.set("cb",String(Date.now()%1e9)),e.toString()},finalUrl(r,t){const n=Ze.normalizeLines(t).map(i=>i==="_"?"_":Ze.encode(i)).join("/"),s=new URL(`https://api.memegen.link/images/${encodeURIComponent(r)}/${n}.png`);return s.searchParams.set("font","impact"),s.searchParams.set("width","600"),vt!=null&&vt.MEMEGEN_API_KEY&&s.searchParams.set("api_key",vt.MEMEGEN_API_KEY),s.toString()}},Mt=(...r)=>{for(const t of r){const e=document.getElementById(t);if(e)return e}return null},$e=(r,t,e)=>r==null?void 0:r.addEventListener(t,e),Pd=r=>r.replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[t]);let Or=null;function Dd(){const r=Mt("meme-upload"),t=Mt("top-text"),e=Mt("bottom-text"),n=Mt("meme-canvas"),s=Mt("download-meme"),i=(n==null?void 0:n.getContext("2d"))||null;if(!r||!t||!e||!n||!i)return;let o=null;const c=_=>{const k=Math.min(1e3,_.naturalWidth||1e3),S=_.naturalWidth?k/_.naturalWidth:1;n.width=Math.round((_.naturalWidth||1e3)*S),n.height=Math.round((_.naturalHeight||1e3)*S)},d=()=>{if(!De)return;const _=Math.max(8,Math.round(n.width*.02)),k=Math.max(12,Math.round(n.width/32)),S=De;i.save(),i.font=`600 ${k}px Inter, system-ui, sans-serif`,i.textAlign="right",i.textBaseline="bottom";const T=i.measureText(S).width,R=k*1.35,C=T+_*1.5,D=R+_*.8,F=n.width-_,W=n.height-_;i.fillStyle="rgba(0,0,0,0.45)",Ec(i,F-C,W-D,C,D,Math.max(6,Math.round(k/3))),i.fill(),i.fillStyle="#fff",i.fillText(S,F-_*.75,W-_*.4),i.restore()},b=(_,k)=>{const S=Math.max(8,Math.round(n.width*.02)),I=Math.max(18,Math.round(n.width/10));i.font=`bold ${I}px Impact, Arial Black, Arial, sans-serif`,i.textAlign="center",i.textBaseline="top",i.lineJoin="round",i.lineWidth=Math.max(4,Math.round(I/10));const T=Math.round(n.height*k);i.strokeStyle="black",i.fillStyle="white";const R=(_||"").split(/\s+/),C=[];let D="";for(const Y of R){const tt=D?D+" "+Y:Y;i.measureText(tt).width>n.width-2*S?(D&&C.push(D),D=Y):D=tt}D&&C.push(D);const F=I+6;let W=T;for(const Y of C){const tt=Math.round(n.width/2);i.strokeText(Y,tt,W),i.fillText(Y,tt,W),W+=F}},v=()=>{i.clearRect(0,0,n.width,n.height),o?i.drawImage(o,0,0,n.width,n.height):(i.fillStyle="#111827",i.fillRect(0,0,n.width,n.height)),b(t.value,.04),i.textBaseline="bottom",b(e.value,.8),d()};Or=v,$e(r,"change",()=>{var I;const _=(I=r.files)==null?void 0:I[0];if(!_)return;const k=URL.createObjectURL(_),S=new Image;S.onload=()=>{o=S,c(S),v(),URL.revokeObjectURL(k)},S.src=k}),$e(t,"input",v),$e(e,"input",v),$e(s,"click",()=>{v();const _=document.createElement("a");_.href=n.toDataURL("image/png"),_.download=(De?`${De}-`:"")+"meme.png",document.body.appendChild(_),_.click(),_.remove()}),c({naturalWidth:800,naturalHeight:800}),v()}let rn="fry",os="";function qd(){var n;const r=(n=document.getElementById("api-preview")||document.getElementById("meme-preview"))==null?void 0:n.parentElement,t=document.getElementById("api-preview")||document.getElementById("meme-preview");if(!r||!t)return;getComputedStyle(r).position==="static"&&(r.style.position="relative");let e=document.getElementById("api-wm-overlay");e||(e=document.createElement("div"),e.id="api-wm-overlay",e.style.position="absolute",e.style.right="10px",e.style.bottom="10px",e.style.padding="6px 10px",e.style.borderRadius="8px",e.style.background="rgba(0,0,0,0.45)",e.style.color="#fff",e.style.font="600 12px Inter, system-ui, sans-serif",e.style.pointerEvents="none",r.appendChild(e)),Ys()}function Ys(){const r=document.getElementById("api-wm-overlay");r&&(r.textContent=De||"",r.style.display=De?"block":"none")}async function zd(){var at,q,Q;const r=document.getElementById("api-mode");r==null||r.classList.remove("hidden"),Fr(!1);const t=Mt("api-templates");let e=Mt("api-lines");const n=Mt("meme-preview","api-preview"),s=Mt("meme-open","api-open"),i=Mt("meme-copy","api-copy"),o=Mt("meme-download","api-download"),c=Mt("meme-search","template-search"),d=Mt("meme-prev-page","api-prev"),b=Mt("meme-next-page","api-next"),v=Mt("api-page"),_=Mt("api-pages"),k=Mt("api-watermark-hint");let S=document.getElementById("api-example");if(!e){const z=document.getElementById("api-mode")||(t==null?void 0:t.parentElement)||document.body;e=document.createElement("div"),e.id="api-lines",e.className="grid md:grid-cols-2 gap-2",S=document.createElement("div"),S.id="api-example",S.className="text-xs text-white/70 italic mt-2";const K=z.querySelector(".glass.rounded-lg.p-3");K?(z.insertBefore(e,K),z.insertBefore(S,K)):(z.appendChild(e),z.appendChild(S)),(at=document.getElementById("api-top"))==null||at.classList.add("hidden"),(q=document.getElementById("api-bottom"))==null||q.classList.add("hidden")}if(!t||!e||!n||!s)return;k&&(k.textContent=De?`Watermark: ${De}`:"");let I=await Ze.list(),T=I.slice(),R=1,C=((Q=T[0])==null?void 0:Q.lines)||2,D;const F=()=>Array.from(e.querySelectorAll("input.api-line")).map(z=>z.value),W=(()=>{let z=0;return()=>{cancelAnimationFrame(z),z=requestAnimationFrame(()=>{const K=F(),m=Ze.previewUrl(rn,K),a=Ze.finalUrl(rn,K);n.src=m,s.href=a,os=a})}})(),Y=()=>{if(!S)return;if(!(D!=null&&D.length)){S.textContent="";return}const z=D.filter(Boolean).join("  ");S.innerHTML=`<span class="opacity-80">Example:</span> ${Pd(z)} <button id="api-example-fill" class="ml-2 underline underline-offset-2 opacity-90 hover:opacity-100">Reset to example</button>`;const K=document.getElementById("api-example-fill");K==null||K.addEventListener("click",m=>{m.preventDefault(),e.querySelectorAll("input.api-line").forEach((f,p)=>f.value=D[p]??""),W()})},tt=(z,K)=>{C=Math.max(1,z|0),e.innerHTML="";for(let m=0;m<C;m++){const a=document.createElement("input");a.type="text",a.className="api-line w-full bg-transparent border border-white/10 rounded-lg px-3 py-2 text-sm focus-glow",a.placeholder=`Text ${m+1}`,a.autocomplete="off",a.spellcheck=!1,K&&typeof K[m]=="string"&&(a.value=K[m]),a.addEventListener("input",W),e.appendChild(a)}Y()},ot=()=>{const z=Math.max(1,Math.ceil(T.length/ss));R=Math.min(Math.max(1,R),z);const K=(R-1)*ss,m=T.slice(K,K+ss);t.innerHTML=m.map(a=>`
      <button class="group relative block rounded-lg overflow-hidden border border-white/10 hover:border-white/30 transition"
              data-id="${a.key}" data-lines="${a.lines}" title="${a.name}">
        <img src="https://api.memegen.link/images/${encodeURIComponent(a.key)}.jpg?height=90"
             alt="${a.name}" loading="lazy"
             class="w-full h-20 object-cover group-hover:scale-105 transition" />
        <span class="absolute bottom-1 left-1 text-[10px] px-1.5 py-0.5 rounded bg-black/60">${a.name}</span>
      </button>`).join(""),t.querySelectorAll("button").forEach(a=>a.addEventListener("click",async()=>{var w;const f=a;rn=f.dataset.id||"fry";let p=parseInt(f.dataset.lines||"2",10);(!Number.isFinite(p)||p<1)&&(p=2);try{const E=await Ze.details(rn);E.lines>p&&(p=E.lines),D=E.example}catch{D=void 0}lr[rn]&&lr[rn]>p&&(p=lr[rn]),tt(p,D),W(),(w=e.querySelector("input.api-line"))==null||w.focus()})),v&&(v.textContent=String(R)),_&&(_.textContent=String(z)),d&&(d.disabled=R<=1),b&&(b.disabled=R>=z)};$e(c,"input",()=>{const z=(c.value||"").toLowerCase().trim();T=z?I.filter(K=>K.name.toLowerCase().includes(z)||K.key.toLowerCase().includes(z)):I.slice(),R=1,ot()}),$e(d,"click",()=>{R--,ot()}),$e(b,"click",()=>{R++,ot()}),ot();try{const z=await Ze.details(rn);z.lines&&(C=z.lines),D=z.example}catch{D=void 0}tt(C||2,D),qd(),Ys(),W(),$e(i,"click",async z=>{var K,m,a,f;z.preventDefault();try{await navigator.clipboard.writeText(os),(m=(K=window==null?void 0:window.toast)==null?void 0:K.success)==null||m.call(K,"Copied image URL")}catch{(f=(a=window==null?void 0:window.toast)==null?void 0:a.error)==null||f.call(a,"Failed to copy")}}),$e(o,"click",async z=>{var K,m;z.preventDefault();try{const a=os,f=(rn||"meme")+".png";await Kd(a,f,De)}catch{(m=(K=window==null?void 0:window.toast)==null?void 0:K.error)==null||m.call(K,"Download failed")}})}function Fr(r){[Mt("meme-upload"),Mt("top-text"),Mt("bottom-text"),Mt("meme-canvas"),Mt("download-meme")].filter(Boolean).forEach(e=>e.style.display=r?"":"none")}function $d(){const r=Mt("api-mode"),t=Mt("mode-api"),e=Mt("mode-local"),n=s=>{r&&(r.style.display=s?"":"none")};n(!0),Fr(!1),t==null||t.classList.add("bg-white/10"),e==null||e.classList.remove("bg-white/10"),$e(t,"click",()=>{n(!0),Fr(!1),t==null||t.classList.add("bg-white/10"),e==null||e.classList.remove("bg-white/10")}),$e(e,"click",()=>{n(!1),Fr(!0),e==null||e.classList.add("bg-white/10"),t==null||t.classList.remove("bg-white/10")})}function Ec(r,t,e,n,s,i){i=Math.min(i,n/2,s/2),r.beginPath(),r.moveTo(t+i,e),r.arcTo(t+n,e,t+n,e+s,i),r.arcTo(t+n,e+s,t,e+s,i),r.arcTo(t,e+s,t,e,i),r.arcTo(t,e,t+n,e,i),r.closePath()}async function Kd(r,t,e){const n=await Wd(r),s=document.createElement("canvas");s.width=n.naturalWidth||n.width,s.height=n.naturalHeight||n.height;const i=s.getContext("2d");if(i.drawImage(n,0,0,s.width,s.height),e){const c=Math.max(12,Math.round(s.width*.02)),d=Math.max(18,Math.round(s.width/32));i.save(),i.font=`600 ${d}px Inter, system-ui, sans-serif`,i.textAlign="right",i.textBaseline="bottom";const v=i.measureText(e).width,_=d*1.35,k=v+c*1.5,S=_+c*.8,I=s.width-c,T=s.height-c;i.fillStyle="rgba(0,0,0,0.45)",Ec(i,I-k,T-S,k,S,Math.max(8,Math.round(d/2.5))),i.fill(),i.fillStyle="#fff",i.fillText(e,I-c*.75,T-c*.4),i.restore()}const o=await new Promise(c=>s.toBlob(c,"image/png"));if(o){const c=document.createElement("a");c.href=URL.createObjectURL(o),c.download=t,document.body.appendChild(c),c.click(),c.remove(),setTimeout(()=>URL.revokeObjectURL(c.href),0)}}function Wd(r){return new Promise((t,e)=>{const n=new Image;n.crossOrigin="anonymous",n.onload=()=>t(n),n.onerror=s=>e(s),n.src=r})}async function Hd(){$d(),Dd(),await zd()}function Vd(r){return r&&r.length>10?`${r.slice(0,4)}${r.slice(-4)}`:r}function jd(){var r,t,e;try{const n=((e=(t=(r=window.solana)==null?void 0:r.publicKey)==null?void 0:t.toBase58)==null?void 0:e.call(t))??"";return n?Vd(n):""}catch{return""}}function Gd(){ar(vt.OWNER_SOL_DOMAIN||"");const r=()=>{const e=jd();e&&ar(e)};window.addEventListener("stonky:walletLabel",e=>{var s;const n=(s=e==null?void 0:e.detail)==null?void 0:s.label;typeof n=="string"&&n.trim()&&ar(n.trim())});const t=e=>{var n,s,i;e&&(e.isConnected&&e.publicKey&&r(),(n=e.on)==null||n.call(e,"connect",r),(s=e.on)==null||s.call(e,"accountChanged",o=>{o?r():ar(vt.OWNER_SOL_DOMAIN||"")}),(i=e.on)==null||i.call(e,"disconnect",()=>{ar(vt.OWNER_SOL_DOMAIN||"")}))};if(window.solana)t(window.solana);else{let e=0;const n=setInterval(()=>{(window.solana||e++>40)&&(clearInterval(n),window.solana&&t(window.solana))},250)}}function Zd(){const e=(vt.DEFAULT_CLUSTER==="devnet"?vt.DEVNET_RPCS:vt.MAINNET_RPCS).filter(s=>{const i=s.toLowerCase();return!(i.includes("solana.drpc.org")||i.includes("rpc.ankr.com/multichain"))});return e.find(s=>s.includes("helius-rpc.com"))||e[0]}function Yd(){const r="jup-widget";if(!document.getElementById(r))return;const e=()=>{var i;if(!((i=window.Jupiter)!=null&&i.init))return!1;const n=document.getElementById("jup-cluster-label");n&&(n.textContent=vt.DEFAULT_CLUSTER);const s=Zd();try{window.Jupiter.init({displayMode:"integrated",integratedTargetId:r,defaultExplorer:"Solscan",endpoint:s,passThroughWallet:window.solana??void 0})}catch(o){console.warn("[Jupiter] init failed:",o)}return!0};if(!e()){let n=0;const s=setInterval(()=>{(e()||++n>40)&&clearInterval(s)},250)}}document.addEventListener("DOMContentLoaded",()=>{Zs(),Fd(),Hd(),Yd(),Gd()})});export default Xd();
